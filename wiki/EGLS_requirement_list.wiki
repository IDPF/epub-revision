#summary Working document for collecting EGLS requirements

<wiki:toc max_depth="3" />

= Leftover from the IDPF EPUB Maintenance WG = 

 * Bad potential interaction between required Unicode normalization and Japanese language text
	   (http://www.daisy.org/epub/issues/bad-potential-interaction-between-required-unicode-normalization-and-japanese-language-text)

 * Support for page progression independent of script writing-direction
	   (http://www.daisy.org/epub/issues/support-page-progression-independent-script-writing-direction)
 *  EPUB needs support for vertical directionality in writing
	   (http://www.daisy.org/epub/issues/epub-needs-support-vertical-directionality-writing)

= MURATA =

Requirements here are based on [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/ "Requirements for Japanese Text Layout" (W3C Note)"].

== Vertical Writing ==
=== EGLS_MM_01 Vertical Writing === 
*Requirement: EPUB 2.1 should support two styles of vertical writing:
"Top to Bottom - Right to Left" and "Top to Bottom - Left to Right" *.

Rationale: Japan and Taiwan heavily use "Top to Bottom - Right to
Left" vertical writing, while mainland China and Korea occasionally
use it.  The Inner Mongolia autonomous region of China uses "Top to
Bottom - Left to Right" vertical writing.

Example: [http://www.w3.org/TR/jlreq/#fig1_13-en Fig.18] in the W3C JLREQ shows an example of vertical writing in Japanese.

Example: [http://en.wikipedia.org/wiki/File:Mongolian_text_crop.jpg Mongolian text with Arabic numerals, Latin alphabet and Chinese characters.]

=== EGLS_MM_02 Principal Text Direction  ===

*Requirement:  It should be possible to specify "Top to Bottom - Right to Left" or "Top to Bottom - Left to Right" as the principal text
direction of an OPS document.  If the principal text direction is "Top to Bottom - Right to Left" of "Top to Bottom - Left to Right" , main
text in this OPS document should be in "Top to Bottom - Left to Right" or "Top to Bottom - Left to Right" writing mode, respectively.*

Rationale: [http://www.w3.org/TR/jlreq/#en-subheading1_1_3 2.2.3 Elements of Page Formats] in the W3C JLREQ introduces "principal text direction" as a basic element of a page format.

MURATA: Should it be also possible to specify a principal text direction at the OPF level?  In other words, when OPSs having different principal text directions are combined in a single OPF package, do we want to choose one of them and specify it at the OPF level?

=== EGLS_MM_03 Column progression and Page progression ===


*Requirement:  The principal text direction "Top to Bottom - Right to Left" should imply that columns are arranged from top to bottom and page progression is from right to left.*

Rationale: According to
[http://www.w3.org/TR/jlreq/#en-subheading1_3_2 2.3.2 Major Differences between Vertical Writing Mode and Horizontal Writing Mode] in the W3C JLREQ, when the principal text direction is vertical, page progression is from right to left.
See [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#fig1_16-en Fig
21:Progression of pages for a vertically set books].
Moreover, columns are arranged from top to bottom.
See [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#fig1_15-en Fig
20:Direction of arrangement of characters in vertical writing mode].

Note: What is the requirement when the principal text direction is "Top to Bottom - Left to Right"?

MURATA: This is inconsistent with [#EGLS_TK_03_Binding_direction].

=== EGLS_MM_04 Writing direction of captions and table entries ===
*Requirement:  Captions, table entries, running heads, and page numbers should be in horizontal writing mode even when the principal text direction is vertical.*

Rationale: Note 4 in 
[http://www.w3.org/TR/jlreq/#en-subheading1_3_1 2.3.1 Directional Factors in Japanese Composition] in W3C JLREQ shows that even when the principal text direction is
"Top to Bottom - Right to
Left", <a target="_blank" href="http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#running-head">running
heads</a>, <a target="_blank" href="http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#page-number">page
numbers</a>, <a target="_blank" href="http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#caption">captions</a>,
and <a target="_blank" href="http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#table">table</a>
entries are typically in horizontal writing mode.

Example: See [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#fig1_14-en Fig.19: Example of horizontal writing mode in parts of vertically set books].

Note: What is the requirement when the principal text direction is "Top to Bottom - Left to Right"?


=== EGLS_MM_05 Switching principal text directions ===

*Requirement: It should be possible to render a document of the principal text direction "Top to Bottom - Right to Left" using the principal text direction "Left to Right - Top to Bottom", and vice versa.*

Rationale:  Several existing ebook readers in Japan already allow such switching.  Moreover, if fallback to "Left to Right - Top to Bottom" does not work, content providers are likely to hesitate the use of "Top to Bottom - Right to Left" since they do not want to lose business chances.

Note: One could argue that rendering of a document of the principal text direction  "Left to Right - Top to Bottom" using the principal text direction "Top to Bottom - Right to Left" is less important.

Note: What is the requirement when the principal text direction is "Top to Bottom - Left to Right"?

=== EGLS_MM_06 Stylesheets for more than on principal text direction ===
*Requirement: It should be possible to provide stylesheets for both "Left to Right - Top to Bottom" and "Top to Bottom - Right to Left" principal text directions.*

Rationale: Swtiching will lead to clumsy results if this requirement is not satisfied.

Note: This requirement does not necessarily mean that the same stylesheet can be used for both directions. Providing one stylesheet for each principal text direction is an option.

Note: What is the requirement when the principal text direction is "Top to Bottom - Left to Right"?

== Japanese and Western Mixed Text Composition ==
=== EGLS_MM_07 Mixed Text: One by one ===

*Requirement: It should be possible to specify "one by one in inline direction"
setting style for a sequence of Latin letters or European numerals in the
"Top to Bottom - Right to Left" writing direction.  That is, each Latin letter or
European numeral should be set one by one (i.e., no rotation) in
inline direction with Japanese characters.*

Rationale: This style is described in *a* in [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/en-subheading2_2_3 3.2.3 Mixed Text Composition in Vertical Writing Mode] of the W3C JLREQ.

Example: [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#fig_2_2_50-en Fig.94: Example of Latin letters in normal orientation]

Note: What is the requirement when the principal text direction is "Top to Bottom - Left to Right"? 

=== EGLS_MM_08 Mixed Text: rotation ===

*Requirement: It should be possible to specify "90 degrees clockwise rotation"
setting style for a sequence of Latin letters or European numerals in
the "Top to Bottom - Right to Left" writing direction.  That is, this sequence of Latin letters or a European numerals should be first arranged from left to right, and the whole string should be then rotated 90 degrees clockwise.*

Rationale: This style is described in *b* in [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/en-subheading2_2_3 3.2.3 Mixed Text Composition in Vertical Writing Mode] of the W3C JLREQ.

Example: [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#fig2_2_6-en Fig.95 Example of Latin letters rotated 90 degrees clockwise]

Note: What is the requirement when the principal text direction is "Top to Bottom - Left to Right"? 

=== EGLS_MM_09 Mixed Text: Tate-chu-yoko ===
*Requirement: It should be possible to specify "tate-chu-yoko" setting style for
a sequence of Latin letters or European numerals in  the "tb-rl" writing mode
writing mode.  That is, this sequence of Latin letters or a European
numerals should be arranged from left to right, and the whole string
should be then aligned to the center of the vertical line.*

Rationale: This style is described in *b* in [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/en-subheading2_2_3 3.2.3 Mixed Text Composition in Vertical Writing Mode] of the W3C JLREQ.

Example: [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#fig2_2_7-en Fig.96 Example of European numerals in tate-chu-yoko (horizontal-in-vertical setting)] and 
[http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#fig2_2_9-en Fig.101 Example of tate-chu-yoko (horizontal-in-vertical text setting)].

== Line Breaking Rules ==
=== EGLS_MM_10: Characters Not Starting a Line ===
*Requirement: A line should not begin with the characters shown below:

    * closing brackets (cl-02),
    * hyphens (cl-03),
    * dividing punctuation marks (cl-04),
    * middle dots (cl-05),
    * full stops (cl-06),
    * commas (cl-07),
    * iteration marks (cl-09),
    * a prolonged sound mark (cl-10),
    * small kana (cl-11), and
    * warichu closing brackets (cl-29)

Rationale: This rule comes from [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#ja-subheading2_1_7 3.1.7 Characters Not Starting a Line] in the W3C JLREQ.  It is based 
on character classes in [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#character-classes-en Appendix A] in the W3C JLREQ.

*Note:* Some printed publications adopt a less strict rule, which allows iteration marks, prolonged sound marks, and small kana. Even KATAKANA MIDDLE DOT and dividing punctuation marks (cl-04) are sometimes allowed, for example in newspaper.

*Note:* [#EGLS_TK_06 "Line-start prohibition rules"] is more advanced than this requirement, since it allows content authors to specify which character is disallowed.

=== EGLS_MM_11 Characters Not Ending a Line===
*Requirement: A line should not end with the characters shown below:

    * opening brackets (cl-01), and
    * warichu opening brackets (cl-28)

Rationale: This rule comes from [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#ja-subheading2_1_8 3.1.8 Characters Not Ending a Line] in the W3C JLREQ.  It is based 
on character classes in [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#character-classes-en Appendix A] in the W3C JLREQ.


Note: [#EGLS_TK_07 "Line-end prohibition rules"] is more advanced than this requirement, since it allows content authors to specify which character is disallowed.
=== EGLS_MM_12 Unbreakable Character Sequences ===
*Requirement: A line should not be broken within the following character sequences. In other words, such sequences should be handled as one unit.

    * sequences of EM DASH characters,
    * sequences of HORIZONTAL ELLIPSIS characters,
    * sequences of TWO DOT LEADER characters,
    * sequences of European numerals,
    * prefixed abbreviations (cl-12) followed by arabic or ideographic numeral characters,
    * postfixed abbreviations (cl-13) preceded by European numeral or ideographic numeral characters, and
    * group-ruby (see Clause 4)

Rationale: This rule comes from [http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#en-subheading2_1_10 3.1.10 Unbreakable Character Sequences] in the W3C JLREQ.


Note: [#EGLS_TK_10 Non-breaking characters] is more advanced than this requirement, since it allows content authors to specify which character sequence should not be broken.

== Ruby and Emphasis Dots ==

=== EGLS_MM_13 Ruby===
Rationale: To be supplied.

*Requirement: It should be possible to specify mono-ruby as well as fallback information.
=== EGLS_MM_14 ===
Rationale: To be supplied.

*Requirement: It should be possible to attach emphasis dots to text runs. At least two characters (SESAME DOT and BULLET) should be available as emphasis dots.

= Joshua Tallent =
== BIDI ==
= Karen Broome =
= Tommy Lee =
= Catherine Zekri =
= Mei-Li Chen =
See http://epub-revision.googlecode.com/files/EGLS_TW_eng.ppt and http://epub-revision.googlecode.com/files/EGLS_Requirement_from_Taiwan.doc
== EGLS_TW_1: Let EPUB 2.1 OPS support CSS3 subset --> Text Layout Module ==
In Taiwan, vertical writing has been widely used in classical Chinese books, novels, storybooks and school textbooks. CSS3 writing mode (tb-rl) may be the most possible solution.

== EGLS_TW_2: way to display Traditional Chinese -->Mix Mode  ==
When the Horizontal display mode has changed to the Vertical mode, the reading system follows the rules below:
	* Not to rotate single Alphabet/Number/Chinese Character
	* Not to rotate Punctuation Marks
	* to rotate English Words and Continuous Numbers to 90-degree
	  # More than Two Consequent Letters
	  # More than Two Consequent Numbers

==  EGLS_TW_3: Let EPUB 2.1 OPS support CSS3 subset --> Bopomofo RUBY ==
Those six following categories need RUBY to support Zhuyin Fuhao(Bopomofo) :
 * One phonetic symbol with stress accent
 * One phonetic symbol with light accent
 * Two phonetic symbols with stress accent
 * Two phonetic symbol with light accent
 * Three phonetic symbols with stress accent
 * Three phonetic symbol with light accent

In the CSS3 draft, bopomofo RUBY may support those six categories above.
{{{
	ruby.bopomofo { writing-mode: tb-rl }
}}}
==  EGLS_TW_4: to Mark Stress Accent (but Light Accent) at Upside of Zhuyin Fuhao phonetic symbols  ==

==  EGLS_TW_5: In Horizontal Layout Mode, Readers can choose Zhuyin Fuhao shown at Right Side or Top Side (to Set Zhuyin Fuhao shown at Right Side as Default) == 

== EGLS_TW_6: Complete Continuity of Content has Highest Priority ==
 * Small size screen (or low resolution) reading device may not display whole ruby markup correctly.
 * Readers may not need the ruby, but concern the continuity of content.
 * Students could choose to have RUBY displayed while learning Zhuyin Fuhao.
 * Readers could choose to have RUBY displayed via hidden ruby or pop-up screen.


= Cho Ching Lu =
= Si Wei Wang =
= Takeshi Kanai =
== Character set/Glyph enhancement ==
*These are not requirements to define a displayable character set.*

=== EGLS_TK_01 Unicode version ===
*Requirement: Unicode 6.0.0 (not released yet) should be supported in epub formats. We need Unicode IVS and newly added emoji symbol codes (not those glyphs), at least.*
=== EGLS_TK_02 SVG font ===
*Requirement: SVG font should be available as one of font formats for embedded fonts.*

MURATA:  The use of SVG font is not a requirement but is a solution.  Moreover, 
[#EGLS_CHANG_R1], [#EGLS_CHANG_R2], [#EGLS_CHANG_R3], and [#EGLS_CHANG_R4] are relevent requirements, which are extracted from [http://epub-revision.googlecode.com/files/Requirement%20on%20EPUB%20for%20End%20User%20Defined%20Characters%20Support.htm End User Defined Characters Display].  I think that these requirements should be merged.


== Page Layout ==
=== EGLS_TK_03 Binding direction ===
*Requirement: The binding direction should be selectable regardless of content layout. Reading System's UI should dynamicaly change reading direction. *

MURATA: Use expressions in [http://www.w3.org/TR/jlreq/ Requirements for Japanese Text Layout], such as [http://www.w3.org/TR/jlreq/#bound-on-the-right-hand-side "bound on the right-hand side"] or "binding side" wherever possible.
  
== Japanese Text Layout ==
=== EGLS_TK_04 Ruby ===
*Requirement: http://www.w3.org/TR/ruby/ *

MURATA: This XHTML module is not a requirement but a solution.   Is this already covered by [#EGLS_MM_13]?

=== EGLS_TK_05 Vertical text layout ===
*Requirement: CSS3 Text Layout:writing-mode*

MURATA:  Again, the CSS property "writing-mode" is not a requirement but a solution.  Is this covered by [#EGLS_MM_01]?

=== EGLS_TK_06 "Line-start prohibition rules" ===
*Requirement: No line should start with one of characters defined by contents creator. The rule must be implemented and the characters should be adjustable.*

MURATA: I would propose "It should be possible for content authors to specify which character is disallowed as the [http://www.w3.org/TR/jlreq/#en-subheading2_1_7 start character of a line]."

=== EGLS_TK_07 "Line-end prohibition rules" ===
*Requirement: No line should end with one of characters defined by contents creator. The rule must be implemented and the characters should be adjustable.*

MURATA:  Again, I would propose  "It should be possible for content authors to specify which character is disallowed as the [http://www.w3.org/TR/jlreq/#en-subheading2_1_8 end character of a line]."


=== EGLS_TK_08 Hanging punctuation ===
*Requirement: CSS3 Text:hanging-punctuation*

MURATA:  This is not a requirement but a solution.  Please reformulate this requirement 
using the terminology of [http://www.w3.org/TR/jlreq/ Requirements for Japanese Text Layout].

=== EGLS_TK_09 Hanging punctuation rule setting ===
*Requirement: Contents creator can set hanging punctuations*

MURATA: I would propose "It should be possible for content authors to specify which character is allowed as a [http://www.w3.org/TR/jlreq/#line-adjustment-by-hanging-punctuation hunging punctuation]. 


=== EGLS_TK_10 Non-breaking characters ===
*Requirement: Contents creator can adjust non-breaking characters.*

MURATA:  I would propose "It should be possible for content authors to specify which sequence of characters is [http://www.w3.org/TR/jlreq/#en-subheading2_1_10 unbreakable] by line breaks.

=== EGLS_TK_11 Non-separating chracters ===
*Requirement: Contents creator can adjust non-separating characters.*

MURATA: I would propose "It should be possible for content authors to specify
[http://www.w3.org/TR/2009/NOTE-jlreq-20090604/#en-subheading2_1_11 which character sequence does allow space insertion as part of line adjustment processing]."

=== EGLS_TK_12 Emphasis dots ===
*Requirement: CSS3 Text: text-emphasis *

MURATA: This is not a requirement but a solution.  Is the intended requirement already covered by [#EGLS_MM_14]?

=== EGLS_TK_13 "Tate-chu-yoko" ===
*Requirement: Inline block should change its layout depending on writing-mode property and an inline horizontal text block is going to be displayed within a vertical line.*

MURATA:  Is this covered by [#EGLS_MM_09]?

== General ==
=== EGLS_TK_14 Language inheritance ===
*Requirement: OPF must specify a primal language and it should inherit to OPS language setting.*

Rationale: Multilingual Reading system needs one primal language information to determine which font set should be applied for displaying metadata/contents as a default, especially for CJK languages.

Reading system can not rely on language settings in XHTML files.
In fact, most of ePub titles do not contain xml:lang or lang in each XHTML file.

Additionaly, since OPF allows to have multiple <dc:language>, a primal language needs to be specified to build the fallback system.


= Kyoji Tahara =
= Shu Tanabe =
= Brady Duga =
= Yu Ming Chang =
= Lin Mei Wei =
= Peter Lin =
= Voyager =
== EGLS_Voyager_01 Horizontal and Vertical writing/ Binding Direction ==

Requirement: EPUB 2.1 should support specifying writing modes and binding directions separately. The support should be considered to the following cases: 

<p><strong>Four writing modes:</strong> </p><p>1) horizontal writing "left to right - top to bottom": lr-tb  (U.S., Europe and others) </p><p>2) vertical writing "top to bottom - right to left": tb-rl (Japan, Taiwan and others) </p><p>3) horizontal writing "right to left - top to bottom": rl-tb (Arabic and others) </p><p>4) vertical writing "top to bottom - left to right": tb-lr (Inner Mongolia and others) </p><p><strong>Two binding directions:</strong> </p><p>1) left </p><p>2) right </p><p><strong>Rational:</strong> In US/Europe, binding left for lr-tb, and in Japan/Taiwan, binding right for tb-rl. In the meantime, considering global language support for multiple languages, combinations of writing mode and binding direction for other languages, binding direction shall be specified independently to any writing mode. This way, EPUB can support broader utility. 

== EGLS_Voyager_02 Ruby, Tate-chu-yoko ==
Requirement: EPUB 2.1 should support ruby by complying with W3C specifications, instead of relying on extended module. Tate-chu-yoko in Japanese, writing mode horizontal within vertical writing mode shall be supported by standard xhtml element in EPUB 2.1.

*Rational: Tate-chu-yoko can be displayed by CSS but it can be complicated.

= CHANG Yu-Ming =
See http://epub-revision.googlecode.com/files/Requirement%20on%20EPUB%20for%20End%20User%20Defined%20Characters%20Support.htm for details.
== EGLS_CHANG_R1 ==
For any character
which is not defined in Unicode standard, or which is defined in Unicode
standard but its code point is outside of Unicode BMP can be used in the
context of any one EPUB document via EUDC support.

== EGLS_CHANG_R2 ==
For an EPUB documents which
contains EUDC, all resource files to support the display of EUDC can be
embedded inside EPUB file.

== EGLS_CHANG_R3 ==
It would be better to
provide a mechanism to assign a corresponding resource to support EUDC display
for each font using in an EPUB document.

== EGLS_CHANG_R4 ==
It would be better to
embed mapping information for all the EUDC using inside an EPUB document. When
embeds mapping information inside an EPUB documents, for EUDC that are interpreted
by Unicode standard but beyond BMP, mapping information should contain corresponding
code point such as U+20000 for each character; for EUDC that are not interpreted
by Unicode standard, mapping information should contain useful reference coding
scheme, such as TF-2121.used in Taiwan’s CNS11643 standard.

= Peter Sorotokin =

== EGLS_PS_R1 ==

The most widely used algorithm for line breaking rules in UAX#14 (Unicode Line Breaking Algorithm). It is impractical for an implementation that is targeted to work in multi-lingual requirement to add a separate algorithm for each language, especially as a single paragraph can contain parts in many languages. Line breaking rules must be described as tailorings to the standard Unicode algorithm (see section 8 in UAX#14) and neither as an ad-hoc set of rules, nor as a language-specific algorithm.

Reference: http://unicode.org/reports/tr14/#Customization