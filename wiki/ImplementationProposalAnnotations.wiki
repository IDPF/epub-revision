#summary Implementation proposal for annotations.

= Introduction =

This is a wiki page to collaboratively edit an implementation proposal for the "annotations" part of the revision of the EPUB standard. This document is in inception phase.

Please refer to the [Annotations annotations requirements page] (http://code.google.com/p/epub-revision/wiki/Annotations)


= Editors / Contributors =

  * Will Manis
  * Daniel Weck
 * (add your name here)

Annotations would be an additional part of an OCF container.

== Abstract Container: ==
{{{
META-INF/
   container.xml – Note: includes multiple <rootfile> elements
   [manifest.xml]
   [metadata.xml]
   [signatures.xml]
   [encryption.xml]
   [rights.xml]
***[annotations.xml]***
OEBPS/
   Great Expectations.opf
   cover.html
   chapters/
      chapter01.html
      chapter02.html
      … other OPS files for the remaining chapters …
}}}

An annotation itself would refer to annotated content and the annotators content, which could be co-located or contained in other documents. It is probably reasonable to limit the annotators content to be local to the container holding the annotations.

The example below illustrates a textual annotation on textual content. 
Need examples for:
  # ink annotation of text
  # ink annotation of image or svg
  # annotation of audio/video

== annotations.xml ==
{{{
<annotations xmlns="http://www.idpf.org/2011/annotation">

   <annotation id="uuid">
      <referenceddocument>
	 <documentidentifier>
	    ISBN, DOI etc.
	 </documentidentifier>
	 <date>
	    2010:09:08:17:17:34 UT
	 </date>
	 
	 <contentsignature>
	    a dsig over the referenced content or a superset of the content
	 </contentsignature>

	 [
	 
	    <range>
	       <start>
		  <part>part in ocf container</part>
		  <location>a valid xpath 1.0 expression</location>
	       </start>
	       <end>
		  <part>part in ocf container</part>
		  <location>a valid xpath 1.0 expression</location>
	       </end>	 
	    </range>
	 
	    or
	    
	    <point>
	       <part>part in ocf container</part>
	       <location>a valid xpath 1.0 expression</location>
	    </point>
	 
	 ]
	 
	 <renderinginfo>
	    <hilight>yellow</hilight>
	 </renderinginfo>	 
      </referenceddocument>
   
      <annotationcontent>

	 <date>
	    2010:09:08:17:17:34 UT
	 </date>

	 <range>
	    <start>
	       <part>part in ocf container</part>
	       <location>a valid xpath 1.0 expression</location>
	    </start>
	    <end>
	       <part>part in ocf container</part>
	       <location>a valid xpath 1.0 expression</location>
	    </end>	 
	 </range>
	 
      </annotationcontent>
   </annotation>
   
   <annotation id="uuid">
      .
      .
      .
   </annotation>
      
</annotations>
}}}

== User agent rendering ==
It will be up to the UA to determine the UI to capture and render annotations.

