#summary Styling and Layout Sub-group Page

= Styling and Layout Sub-group Page =

<wiki:toc max_depth="4" />

== Mission ==

Identify styling and layout limitations in the epub spec that can improved or extended using existing or new technologies. We will make specific recommendations as to what styling and layout should be added and how that should be done. We will pay particular attention to current industry needs and weigh any changes against difficulty in use or implementation. This corresponds to [http://www.idpf.org/idpf_groups/IDPF-EPUB-WG-Charter-4-27-2010.html item 5 in our charter].

== Sub-group participation ==

There is no required technical requirements for sub-group members (i.e. you don't have to be a CSS wiz), though conversation on the group will, at times, become quite technical. I still encourage participation by members who have a high-level knowledge of styling and layout issues even if they will not be able to offer specific solutions.

 * Brady Duga; eBook Technologies, Inc. (co-coordinator)
 
 * Peter Sorotokin; Adobe
 * Ric Wright; Adobe
 * Eric Freese; Aptara
 * Garth Conboy; eBook Technologies, Inc.
 * Steve Kotrch; Simon & Schuster
 * Bill McCoy; WebPaper
 * Adam Witwer; O'Reilly Media
 * Chelsea Valentine; LibreDigital
 * Dave Gunn; RNIB Centre for Accessible Information 
 * John Prabhu; HOV Services, Inc.
 * Liza Daly; Threepress Consulting Inc.
 * George Kerscher; DAISY Consortium.
 * MURATA Makoto; JEPA
 * Roger Webster; Barnes & Noble
 * Karen Broome; Sony Electronics
 * Alexis Wiles; OverDrive
 * Eric Muller; Adobe
 * Soo Choi, HarperCollins Publishers
 * Elliott Beard, HarperCollins Publishers
 * Andrew Gilbert, Dartmouth Journal Services
 * Hadrien Gardeur, Feedbooks
 * Beno√Æt Larroque, Feedbooks
 * Eric Gold, Digital Divide Data (DDD)
 * Kyoji Tahara, Toppan Printing
 * Shu Tanabe, Toppan Printing
 * Tom Hadfield, CourseSmart, LLC
 * Dianne Kennedy, IDEAlliance

== Decisions ==

=== 1 Multiple Display Surfaces ===

=== 2 Page-level Layout ===

=== 3 Miscellaneous ===

==== SNL_D3.1 Include full CSS2.1 ====

_Rationale: it is formatting-limiting, confusing, spec-maintenance intensive, and not fully leveraged to specify a required subset of CSS2 in OPS_

*Decision: Replace the OPS 2.0.1 required CSS2 subset with a reference to full CSS2.1 (http://www.w3.org/TR/CSS2/) *

Note: this decision was made on June 16, 2010 a the Working Group face-to-face meeting in New York.

Note: this decision addresses two EPUB 2.0.1 "future consideration" issues: http://www.daisy.org/epub/issues/consider-supporting-css2-quotes-property and http://www.daisy.org/epub/issues/add-text-transform-css

=== 4 Formatted (Paginated) Content Support ===

== Requirements ==

Note: !RichLayout.pdf is uploaded to the "Downloads" section to illustrate some of these

=== 1 Multiple Display Surfaces ===

==== SNL_R1.1 Selection of Styles for Various Displays Properties ====
 
Rationale: Different display surfaces have different optimal styling. 

Examples/use cases:

  # Justified text may look good for a large display, but smaller displays may need to switch to a ragged edge to avoid large spaces or repetive hyphenation.
  # When displaying a full-page image (say a cover), content creators may want to specifically design different looks for landscape and portrait orientations. 
  # Default text sizes on small displays may want to be smaller than large devices to allow for reasonable amounts of text displayed at any one time.
  # Font sizes may want to take into account PPI differences (very small fonts may be inappropriate on low PPI devices).
  # Different media may be provided based on the capabilities of different devices. For instance, displays with poor refresh rates may want to use a static image in place of a video.

*Requirement: Ability to choose different rule sets based on display properties (size, width/height ratio, ppi, etc). [Note: user preferences moved to SNL_R1.5]*

Note: related to conditional rendering "future consideration" from EPUB 2.0.1 (http://www.daisy.org/epub/issues/conditional-rendering-reading-systems)

==== SNL_R1.2 Property value calculation based on environment ====

_Rationale: screen real estate needs to be partitioned differently for different displays properties and user preferences_

*Requirement: ability to do simple calculations based on the environment to express things like "half of a viewport plus 10 pixels" or "one and a half of a column width".* 

==== SNL_R1.3 Image/content selection ====

_Rationale: images need to be scaled, cropped, and, in some cases, even selected differently for different display surfaces_

*Requirement: ability to select images (or other content) based on the display environment*

Note: Related to image scaling "future consideration" from EPUB 2.0.1 (http://www.daisy.org/epub/issues/proportional-image-scaling-problem-paged-environment)

==== SNL_R1.4 ====

This has been moved to SNL_R4.1

==== SNL_R1.5 Selection of Styles for Various User Settings ====
 
Rationale: Optimal content display may change based on user preferences.

Examples/use cases:

  # Many reading systems allow for font-size and even font family changes. Content may want to adapt itself to account for such changes. For instance, the margin of paragraphs may need to be altered.
  # Content may want to adapt itself if a Reading System provides a night mode. Typical night mode (found in cell phones, GPS navigators, and other handheld devices) assumes dark background with light text. Some of this can be done using user stylesheet (in CSS terms) and it works for simple files, but in many cases the result is unsatisfactory, for instance if some text was already styled to be light on dark background for some sort of highlighting or special effect, that effect/highlighting is lost. It is better to give the author explicit control over styling in night mode.
  # A Reading System may enable switches to default text flow. So, a Japanese user may be able to choose between horizontal and vertical text directions based on personal preference. Content may want to use different rendering in this case. The most notable issue is margins (what is side margin in one mode is spacing margin in the other), but many aspects of the presentation (image and sidebar placements, alignments) are specific for vertical vs. horizontal layout. CSS can do it in both modes, but portions of a stylesheet must be turned on and off depending on which mode is used.
  
*Requirement: Add ability to choose styles and calculate property values based on user preferences.*

Note: This is related to SNL_R1.1 and SNL_R1.2, but accounts for user preferences instead of display properties. 

Note: this is related to requirement RGLS_MM_06 on [EGLS_requirement_list]

=== 2 Page-level Layout ===

==== SNL_R2.1 Multi-region flow ====

_Rationale: when a unit of presentation is a "page" or a screen (not an only, but primary use case for ebooks), and when screen size is sufficiently large (e.g. a larger hand-held device or a laptop/PC), professionally layed-out content is typically organized in multiple columns with headers, footers, sidebars, pull quotes and other similar layout elements, collectively called "regions"_

*Requirement: ability to partition screen real estate into regions and ability to (a) flow the primary content from one region to the next; (b) push content to occupy a secondary region; (c) move secondary content to a different page if no space for it can be found on a current page without breaking the primary flow; (d) force other content to flow around a region*

==== SNL_R2.2 Fixed (repeatable) content ====

_Rationale: current header/footer support is too limiting_

*Requirement: ability to control positioning of repeatable content on the page*

==== SNL_R2.3 Page elements alignment ====

_Rationale: professionally-done publications pay great attention to lining up various elements of a page/screen to have maximal impact on a reader_

*Requirement: align various elements on a page/screen, such as (a) make sure that body text lines are aligned across columns even when headings, decorations or images are present; (b) align elements in different regions by precisely placing the regions on a page*

==== SNL_R2.4 Region-based styling ====

_Rationale: content sometimes needs to be styled slightly differently when it flows from one region to the next. This is similar to first line or first character styles, but for regions_

*Requirement: assign region-specific styling rules which affect content which flows into those regions*

==== SNL_R2.5 Dynamic formatting based on intersection of multiple properties ====

*Requirement: optimal formatting may depend on multiple factors including the display surface characteristics, user font size preferences, and content properties *

Use case examples:

  # for a newspaper front/section page view, whether full articles with photos, articles with blurbs, or just headlines for articles are displayed is a function of display surface size, font size preference, as well as the number of articles and their relative importance (see for example the "Times Reader" applications).
  # magazines - see Wired for iPad

Note: could be viewed as overlapping with, perhaps even subsuming, multiple display surfaces requirements (SNL_R1.x), and perhaps as well Selection of Styles for Various User Settings (SNL_R1.5). This requirement is intended to capture the need to handle the intersection of multiple conditions and the content itself in order to produce an optimally formatted result per publisher preferences.

Note: the use of "formatting" above is perhaps synonymous with "Selection of Styles" and "styling" in SNL_R1.1 etc.; one might consider styling as a particular component of the formatting process, and/or as a possible implementation mechanisms, so the arguably more general term is used here.

Note: an experimental vendor-specific EPUB extension, "XPGT", can be viewed as implementing this requirement (see: http://wiki.mobileread.com/wiki/XPGT )

Note: a number of Reading Systems have implemented Media Queries (either HTML or CSS3) and can be viewed as implementing this requirement (see http://www.w3.org/TR/css3-mediaqueries/ Candidate Recommendation)

=== 3 Miscellaneous ===

==== SNL_R3.1 Improved column support ====

_Rationale: Current column support in epub does not provide enough control over specific properties (e.g. column size)_

*Requirement: Ability to specify number of columns, width of columns, gaps between columns and rules in those gaps. Ability to float boxes across columns and indicate if column balancing should be employed are both desirable features*

==== SNL_R3.2 Declarative ====

_Rationale: to make sure that document can be analyzed for search, navigation, accressibility, etc. and so that a viewer for it can be produced for all popular platforms, layout should be described in declarative terms_

*Requirement: Layout should be described without resorting to running embedded imperative code which is impossibe to analyze and not possible to run on all devices*

==== SNL_R3.3 Hyphenation ====

_Rationale: hyphenation is almost always used in printed books._

*Requirement: minimal hyphenation control; including hyphenation dictionaries with the content (similar to fonts)*

==== SNL_R3.4 text-transform ====

_Obviated by decision SNL_D3.1_

==== SNL_R3.5 CSS2 quotes ====

_Obviated by decision SNL_D3.1_

==== SNL_R3.6 Poetry alignment =====

_Rationale: When typesetting poetry, it is normal to have lines left-aligned. If a line doesn't fit the page (due to restricted width), it is broken at a convenient place and the second part is right-aligned, and often with a mark (like an opening square bracket) before it. This is a rather specific need and it's not a supported property in CSS, so if accepted it would be an extension for EPUB._

*Requirement: Add support for "too long line" poetry alignment styling  (http://www.daisy.org/epub/issues/special-alignment-option-poetry) *

==== SNL_R3.7 Vertical image centering ====

_Rationale: It is currently not possible to vertically center a picture within a box. The desire to do this occurs frequently within publications. For example, typically one would like to vertically center the cover image of a book._

*Requirement: Provide an easy method of requesting vertical centering.*

==== SNL_R3.8 Preserve aspect ratio when scaling images ====

_Rationale: It is currently not possible to scale an image without distortion if you don't know the aspect ratio of the image. Typically one would like to scale a cover image to be as large as possible without distortion. To do this, you need to fix the size of the dimension that will be limited by the page size first. It is not possible to know which dimension this is if you don't know the size of the image._

*Requirement: Provide an easy method of preserving the aspect ratio of an image while the image is scaled to fit within a box.*

==== SNL_R3.9 Enhance image float contral ====

_Rationale: It is frequently desireable for design reasons to float images to locations other than right or left. One might for example wish to float images to the top left of a box, rather than just to the left. It seems that it may be desireable to float images to any of the following 8 locations within a box that they fall in: top/left, left, center/left, bottom/left, top/right, right, center/right, bottom/right.

*Requirement: Provide an easy method of floating images to locations other than left and right.*

==== SNL_R3.10 Text Overlay of Images ====

_Rationale: It is frequently desireable for design reasons to overlay text on top of an image and to position that overlay relative to the image or a page._

*Requirement: Provide an easy method of requesting text overlay for images.*

=== 4 Formatted (Paginated) Content Support ===

==== SNL_R4.1 Specific sized renditions ====

*Requirement: in addition to a standard reflowable EPUB contained within an OCF file, it should also be possible to include additional OPS/OPF rendition(s) which are pre-formatted (paginated), together with standardized metadata describing the characteristics of each rendition, so that reading systems would have an easy way to identify which one was best for them.*

Examples/use cases:

- A publisher may want to deliver a rendition optimized for a particular device (screen size, color capabilities, resolution, etc.) 

- A publisher may have content that is already pre-paginated, for example from digitization of paper or print-production workflows, and the reflowable text created from it may not be fully accurate

- A publisher may have formatted content that has an information and/or artistic design tied to a particular paginated layout, such that even on devices that may not match the page size, it may be preferable in some circumstances to display that formatted content rather than render the reflowable text. Examples: O'Reilly "Head First" series,  Dr. Seuss "Cat in the Hat"..

Note: Related to "Multiple Display Surface" (esp. first use case).

Note: overlapping requirement with the metadata sub-group for target device specification metadata.

Note: should also allow specification of portrait versus landscape renditions of a publication.

Note: related to identification of alternate renditions "future consideration" from EPUB 2.0.1 (http://www.daisy.org/epub/issues/identification-alternate-renditions)