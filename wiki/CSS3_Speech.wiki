#summary Log / discussion tracker for CSS3-Speech Module revival

<wiki:toc max_depth="5" />

= Main references =

Latest published Working Draft:
  * http://www.w3.org/TR/2004/WD-css3-speech-20041216/

Latest internal (unpublished) editor's version:
  * http://dev.w3.org/csswg/css3-speech/

Previous (superceded) specification / informal / non-normative appendix:
  * http://www.w3.org/TR/CSS21/aural.html

Public mailing-list:
  * http://lists.w3.org/Archives/Public/www-style/

W3C issue tracker (members-only):
  * http://www.w3.org/Style/CSS/Tracker/users/45653
  * http://www.w3.org/Style/CSS/Tracker/products/29

EPUB issue tracker:
  * http://code.google.com/p/epub-revision/issues/detail?id=53
  * http://code.google.com/p/epub-revision/issues/detail?id=54

= Goals, schedule =

  * Publish new official Working Draft or Last Call Working Draft, ideally in early January 2011.
  * Propose Candidate Recommendation publication in February.

Reminder: 2004 draft anouncement
  * http://lists.w3.org/Archives/Public/www-style/2004Dec/0080.html

{{{
[css3-speech] new WD: CSS3 Speech Module

This message: [ Message body ] [ Respond ] [ More options ]
Related messages: [ Next message ] [ Previous message ]
From: Bert Bos <bert@w3.org>
Date: Tue, 21 Dec 2004 15:57:02 +0100
To: www-style@w3.org
Message-Id: <200412211557.02853.bert@w3.org>

Some people already noticed it: there is a new CSS working draft, since
last Friday:

    CSS3 Speech Module
    http://www.w3.org/TR/2004/WD-css3-speech-20041216

This module defines aural properties that give control over rendering to
speech. It is designed to match the model described in the Speech
Synthesis Markup Language (SSML) 1.0. Which means in particular that it
should be possible to take a document and a style sheet and produce an
SSML document that contains the exact rendering of that document as
described by the style sheet.

Compared to the previous version, you may notice the introduction of an
"aural box model," that describes the layers of aural "padding" before
and after each element. The new property 'rest' represents one of those
layers.

If you have comments, please send them to this list. To make it easier
for the editors to find the comments, please prefix the subject line
with "[css3-speech]" like I have done for this e-mail.

Bert
}}}

= "phonemes" property =

Corresponding EPUB issue:
  * http://code.google.com/p/epub-revision/issues/detail?id=54

References:
  * http://www.w3.org/TR/css3-speech/#phonemes
  * http://www.w3.org/TR/speech-synthesis/#S3.1.9
  * http://www.w3.org/TR/CSS21/aural.html ==> note: no phonemes

It seems like HTML integration of pronunciation lexicons (e.g. PLS) via `<link rel="pronunciation" type="application/pls+xml" href="lexicon.pls"/>` is unlikely (this could be an argument in favor of CSS-Speech phonemes):

  * http://www.w3.org/Bugs/Public/show_bug.cgi?id=7601
  * http://wiki.whatwg.org/wiki/RelExtensions

Email communication:

http://lists.w3.org/Archives/Public/www-style/2010Dec/0237.html

{{{
Hello !

The "phonemes" property [1] described in the current Working Draft of 
the CSS3 Speech Module covers functionality that is arguably not 
related to styling. The concept of "phonemes" is inherited from SSML 
[2], and indeed represents an important aspect of speech synthesis. 
However, the relevance of phonetic instructions in the presentation 
layer needs to be discussed.

To bring concrete arguments into this discussion, I would like to cite 
the ongoing revision of the DAISY open-standard (format for Digital 
Talking Books and synchronized text/audio publications). ANSI/NISO 
Z39.86-AI defines a markup grammar [3] that 'adopts' SSML "phonemes" 
to enable the provision of pronunciation instructions on XML elements 
that are not within the SSML namespace. In other words, this 
specification considers that phonetic instructions are part of the 
data layer, not part of styling/presentation. In this case, 
pronunciation information is inlined within the content itself, but it 
could alternatively be provided via some non-CSS out-of-band mechanism.

Additionally, the working group responsible for the ongoing revision 
of the EPUB open-standard (the IDPF industry format for electronic 
publications) is also in the process of drafting the adoption of SSML 
elements for inline use within XHTML markup [4].

Due to the contentious nature of the "phonemes" property in the 
current CSS3-Speech Working Draft, and because of the planned release 
schedule of both aforementioned specification works, I would like to 
strongly urge interested parties to provide feedback as soon as 
possible.

Many thanks !
Regards, Daniel


[1]
http://www.w3.org/TR/css3-speech/#phonemes

[2]
http://www.w3.org/TR/speech-synthesis/#S3.1.9

[3]
http://www.daisy.org/z3986/2011/schema/mod/ssml-phoneme-attrib.rng

[4]
http://epub-revision.googlecode.com/svn-history/r1932/trunk/build/EPUB_ContentDocs30.html#sec-css-phonemes

}}}

http://lists.w3.org/Archives/Public/www-style/2010Dec/0276.html

{{{
I won't repeat my arguments from
http://lists.w3.org/Archives/Public/www-style/2010Oct/0466.html as
you've seen them.

Nevertheless, if phonetics were to be eliminated from CSS, they 
would need to be added to HTML to permit inlined phonetics.  
Overloading the title tag with this feature would lead to 
potentially inappropriate title tags for sighted website 
visitors.  I say potentially, since phonetics in a title 
attribute may well be appropriate for some websites.

I am also not clear upon reviewing the SSML spec how an HTML Web 
page would be able link to an SSML file the way HTML links to 
CSS.   From http://www.w3.org/TR/speech-synthesis/#S1:  "The 
markup may be produced either automatically, for instance via 
XSLT or CSS3 from an XHTML document, or by human authoring. 
Markup may be present within a complete SSML document (see 
Section 2.2.2) or as part of a fragment (see Section 2.2.1) 
embedded in another language, <em>although no interactions 
with other languages are specified as part of SSML 
itself.</em>" (Emphasis added)

But this seems to imply, if I am reading this correctly, that 
SSML could be embedded in an HTML or CSS document.  I would 
hope I don't have to repeat the SSML code itself in each HTML 
document.

I realize it is not CSS's concern whether phonemes are inlined 
in HTML or coded as SSML within or linked to HTML, but unless 
such capabilities exist or are planned, then my desire for 
phonetics within CSS have not been relieved.
}}}

Related (older) email discussion:
  * http://lists.w3.org/Archives/Public/www-style/2010Oct/0453.html
  * http://lists.w3.org/Archives/Public/www-style/2010Oct/0462.html
  * http://lists.w3.org/Archives/Public/www-style/2010Oct/0466.html

= "mark" property =

http://lists.w3.org/Archives/Public/www-style/2010Dec/0239.html

Re: [css3-speech] Drop mark properties

Fantasai wrote:

Also, the 'mark' properties seem to be redundant with using @media 
speech with :before/:after. Claudio, do you remember why it was added?

{{{
h1 {mark-before: "section"}
p {mark-before: attr(id) }
}}}

vs

{{{
@media speech {
    h1:before { content: "section"; }
    p:before { content: attr(id); }
}
}}}

Daniel replies:

If I understand correctly, the purpose of SSML's "mark" element [1] is 
two-fold:

  # provide a destination 'anchor' in the text flow, for the speech synthesizer / processor to address (similar to `<a name="link_target"/>` in XHTML).
  # raise an event when a named "mark" is encountered (trigger asynchronous notification when reaching a pre-authored point in the text/audio flow).

Now, to me this functionality isn't of stylistic nature. I think this 
feature allows authors to define actual *data* (i.e. it does not 
provide a mean to encode presentational instructions for existing 
data). I am therefore in favor to remove the "mark" property from the 
CSS3-Speech Working Draft.

Regards, Daniel

[1]
http://www.w3.org/TR/speech-synthesis/#edef_mark

[2]
http://www.w3.org/TR/2004/WD-css3-speech-20041216/#mark-props

= "speak-header" property, tables =

http://lists.w3.org/Archives/Public/www-style/2010Dec/0235.html

{{{
Hi !
One of the dependencies listed [1] in the current Working Draft for 
the CSS3 Speech Module is "CSS3 Tables". As hinted by my exploration 
of the public mailing-list archive [2][3], the historical motivation 
for introducing this (rather loose) dependency in the CSS-Speech 
specification was primarily to set a placeholder for a future 
reference to the "speak-header" property of the CSS table model. The 
"speak-header" property is actually defined in CSS2.1 Aural 
Stylesheets [4], and it seems clear that at some point this property 
was moved out of CSS2 Tables [5][6], into the Aural appendix.

Now, "CSS3 Tables" doesn't seem close to finalization (by the way, is 
this [7] the document in question ?), so we need to decide whether:

* to drop "speak-header" altogether (I don't have enough knowledge at 
this stage to assert whether this is reasonable or not).

* to reference CSS2.1 Aural Stylesheets (this seems weird, given the 
non-normative nature of Appendix A, and the fact that CSS3-Speech is 
meant to supercede it).

* to (re)include the "speak-header" property in CSS3-Speech.

Thoughts very welcome ! :)
Cheers, Daniel

[1]
http://www.w3.org/TR/2004/WD-css3-speech-20041216/#dependencies

[2]
http://lists.w3.org/Archives/Public/www-style/2004Jul/0281.html

[3]
http://lists.w3.org/Archives/Public/www-style/2004Aug/0004.html

[4]
http://www.w3.org/TR/CSS21/aural.html#aural-tables

[5]
http://www.w3.org/TR/2008/REC-CSS2-20080411/tables.html#q21

[6]
http://www.w3.org/TR/CSS2/tables.html

[7]
http://dev.w3.org/csswg/css3-tables-algorithms/Overview.src.htm
}}}

Fantasai replies:

http://lists.w3.org/Archives/Public/www-style/2010Dec/0240.html

{{{
I would either include the speak-header property in CSS3 Speech or
drop it altogether. (The goal of css3-speech is to replace the
CSS2.1 Aural section with a normative spec that is better-designed.
Referencing the CSS2.1 Aural chapter doesn't make sense within that
goal!)

If lack of implementation interest (rather than poor design) is the
reason to drop it, the compromise solution is to include it and mark
it at risk.
}}}

= Media types, groups =

Note: this issue is resolved, but kept here for tracking purposes. The resolution is that CSS3-Speech should only need to reference CSS2.1, and CSS3-Values-and-Units. The other CSS3 Modules such as CSS3-Syntax are not active-enough to be relied upon at this stage.

See issue:

http://www.w3.org/Style/CSS/Tracker/actions/286

== Reminders ==

Media type "speech" (introduced in CSS 2) and "aural" (deprecated) => semantically equivalent ("intended for speech synthesizer").

Extended types:
  * http://www.w3.org/TR/css3-mediaqueries/

== Communication ==

http://lists.w3.org/Archives/Public/www-style/2010Dec/0223.html

{{{
Hi all,
I am in the process of completing a review of the CSS3 Speech Module  
and its related dependencies, and I came across general statements  
that seems ambiguous to me. Please correct me if I'm wrong.

In section "7.1.4. Recognized media types" of the CSS-Syntax  
specification [1], the following normative statement is pretty clear  
(note the "MUST"):

"A CSS media type names a set of CSS properties. A user agent that  
claims to support a media type by name must implement all of the  
properties that apply to that media type. ... The names of media types  
are normative."

So for example, let's take the CSS-Speech Module [2]: conforming user  
agents (e.g. web-browsers with screen-reader support) must implements  
all of the CSS Properties marked with the "speech" media type. To me,  
this means that the "Media" field in the description of each CSS  
Property has a critical normative value: it is the only way for  
implementors to know, without ambiguity, what properties MUST be  
handled in order to claim conformance as a user-agent supporting  
speech-synthesis.

The same remark obviously applies to any other CSS Property, for any  
other media type normatively specified in CSS3 (e.g. visual, braille,  
print, etc.).

Yet, in the same section "7.1.4" we read:

"the 'Media' field in the description of each property is informative."

I would have thought that this should be "normative", not  
"informative". Could one of the CSS-Syntax editors please clarify this ?

Additionally, section "7.1.4" also states:

"Media types are mutually exclusive in the sense that a user agent can  
only support one media type when rendering a document."

This statement is not problematic in itself, but section "2.  
Introduction" of the CSS-Speech Module seems to be make a  
contradictory assertion:

"Style sheet properties for text to speech may be used together with  
visual properties (mixed media)"

Any thoughts ?

Thank you :)
Regards, Daniel

[1]
http://www.w3.org/TR/css3-syntax/#media

[2]
http://www.w3.org/TR/css3-speech/#property-index
}}}

http://lists.w3.org/Archives/Public/www-style/2010Dec/0234.html

{{{
On 11 Dec 2010, at 00:11, fantasai wrote:
> I'm not seeing
>>> "A CSS media type names a set of CSS properties. A user agent that  
>>> claims to support a media type by name must implement all
>>> of the properties that apply to that media type. ... The names of  
>>> media types are normative."
> in CSS2.1:7.3.

Well, actually the last part ("the names of media types are  
normative") is in CSS2.1:7.3 "Recognized media types" [1], but  
otherwise you are correct ! This is a confusion on my part due to  
CSS2.1:7.3.1 "Media groups" [2] being 'shifted' to CSS3-Syntax:10.7  
"Media groups" [3] (a long way down from CSS3-Syntax:7.1.4.  
"Recognized media types" [4]). Anyway, I will just pretend the CSS3- 
Syntax Module doesn't exist from now on. :o)

This resolves my first issue.

My second issue (mutual exclusion versus mixed media speech+visual) is  
resolved by virtue of CSS2.1 "Media Groups".

Case closed.
Thanks !
Daniel

[1]
http://www.w3.org/TR/CSS21/media.html#media-types

[2]
http://www.w3.org/TR/CSS21/media.html#media-groups

[3]
http://www.w3.org/TR/css3-syntax/#media-groups

[4]
http://www.w3.org/TR/css3-syntax/#media-types

[5]
http://www.w3.org/TR/css3-speech/#introduction
}}}

= CSS3 Syntax Module =

Note: this issue is sort of resolved, but kept here for tracking purposes. The resolution should be that CSS3-Speech will only need to reference CSS2.1, and CSS3-Values-and-Units. The other CSS3 Modules are not active-enough to be relied upon at this stage.

See issue:

http://www.w3.org/Style/CSS/Tracker/actions/286

http://lists.w3.org/Archives/Public/www-style/2010Dec/0236.html

{{{
Dear all,

The current Working Draft of the CSS3 Speech Module contains a 
normative dependency [1] to the CSS3 Syntax specification draft [2]. 
It is my understanding that CSS3-Syntax is "severely unmaintained" (as 
recently pointed out by Fantasai ;) ), so I propose to replace the 
following statement from "10. Voice characteristic properties" [3]:

"
Names of specific voices may be quoted, and indeed must be quoted if 
any of the words that make up the name does not conform to the syntax 
rules for identifiers [CSS3-Syntax].
"

...with a reference to CSS2.1 identifiers syntax [4] instead.

Any comments and/or objections ?
Regards, Daniel


[1]
http://www.w3.org/TR/2004/WD-css3-speech-20041216/#dependencies

[2]
http://www.w3.org/TR/css3-syntax/

[3]
http://www.w3.org/TR/2004/WD-css3-speech-20041216/#voice-char-props

[4]
http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
}}}

Fantasai agrees:

http://lists.w3.org/Archives/Public/www-style/2010Dec/0241.html

= Grammar syntax, square bracket, optionality =

*FIXED*

Filed W3C issue:
  * http://www.w3.org/Style/CSS/Tracker/issues/150

Email communication:

http://lists.w3.org/Archives/Public/www-style/2010Dec/0229.html

{{{
> From: Bjoern Hoehrmann <derhoermi@gmx.net>
 > Date: Sun, 07 Jan 2007 19:25:09 +0100
 > Hi, http://www.w3.org/TR/2004/WD-css3-speech-20041216/ seems to use 
square
 > brackets in property syntax definitions as if they imply 
optionality but they
 > do not. An example is the 'voice-family' property in the draft.
 > regards, -- Björn Höhrmann mailto:bjoern@hoehrmann.de

Mailing-list archive link:
http://lists.w3.org/Archives/Public/www-style/2007Jan/0026.html

Dear Bjoern,
whilst reviewing the status of the CSS3-Speech Module I came across 
what seems to be an unanswered message from you (at least I can't find 
any relevant reply in the public mailing-list archive). I realize that 
you raised your point way back in early 2007, but I might as well 
address it now ;)

(1) the square bracket notation is used not only in CSS-Speech, but 
also in other modules, and in fact in CSS 2.1 too (for example [1]).

(2) optionality is represented using a question mark, square bracket 
is used for grouping.

Regards, Daniel

[1]
http://www.w3.org/TR/CSS21/propidx.html
}}}

http://lists.w3.org/Archives/Public/www-style/2010Dec/0231.html

{{{
The <age> and <number> fields of the "voice-family" CSS 3 Speech property [1] were added to the fields specified by CSS 2.1 Aural style 
sheets [2].

There seems to be a typo in the CSS 3 grammar indeed, as the examples 
are correct (they are backward compatible with the CSS 2.1 notation).

I would suggest the following errata (line breaks for clarity, "xxx" 
is the exact duplicate of line #2):

----------------
[xxx,]*
[[<specific-voice> | [<age>? <generic-voice>]] <number>?]
| inherit
----------------

...but actually I am questioning the use of the <number> discriminator 
based on a <specific-voice>. I can understand the selection logic 
based on a <generic-voice>, but I am not sure how the "preferred 
variant" heuristics can apply to a specific voice instance. Therefore 
I hereby present the errata of the errata:

----------------
[xxx,]*
[<specific-voice> | [<age>? <generic-voice> <number>?]]
| inherit
----------------

Comments welcome.
Regards, Daniel

[1]
http://www.w3.org/TR/css3-speech/#voice-family

[2]
http://www.w3.org/TR/CSS21/aural.html#propdef-voice-family
}}}

= Implementors, stakeholders =

!WebKit:
  * https://bugs.webkit.org/show_bug.cgi?id=46827

Opera:
  * http://lists.w3.org/Archives/Public/www-style/2005Feb/0137.html

Forms player:
  * http://lists.w3.org/Archives/Public/www-style/2004Aug/0193.html

= Minor editorial issues =

  * *FIXED* "In a similar way text-to-speach strings in a document can be replaced by a previously recorded version:" ==> s/speach/speech/g
  * *FIXED* in "Abstract", "CSS defines aural properties that give control over rendering XML to speech." ==> XML *and HTML* ?
  * *FIXED* in "Status of this document", "W3C technical reports index at http://www.w3.org/TR/" ==> Broken link
  * *FIXED* in "6. Pause properties", "if any 'cue-before' or 'cue-after' is specified, before (or after)" ==> add parentheses around "or 'cue-after'"
  * *FIXED* in "6. Pause properties", "The stronger boundaries are typically accompanied by pauses." ==> shift sentence to the right (just before "The breaks between...")

= HTML Speech Incubator Group =

Homepage:
  * http://www.w3.org/2005/Incubator/htmlspeech/

Mailing-list:
  * http://lists.w3.org/Archives/Public/public-xg-htmlspeech/

Related requirements:
  * http://www.w3.org/2005/Incubator/htmlspeech/live/draft-20101223-requirements.html#r9
  * http://www.w3.org/2005/Incubator/htmlspeech/live/draft-20101223-requirements.html#r10
  * http://www.w3.org/2005/Incubator/htmlspeech/live/requirements.html#fpr3