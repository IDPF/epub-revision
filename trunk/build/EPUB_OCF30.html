<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>EPUB Open Container Format (OCF) 3.0</title>
      <link rel="stylesheet" type="text/css" href="epub-spec.css" />
      <meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.0" />
      <meta name="description" content="Abstract TODO" />
   </head>
   <body>
      <div class="book" title="EPUB Open Container Format (OCF) 3.0">
         <h1 class="title">EPUB Open Container Format (OCF) 3.0</h1>
         <p class="identity"><span class="releaseinfo">Editors Draft</span> <span class="pubdate">16 December 2010</span></p>
         <dl class="printhistory">
            <dt>This version</dt>
            <dd><a class="link" href="www.idpf.org/specs/TODO">www.idpf.org/specs/TODO</a></dd>
            <dt>Previous version</dt>
            <dd><a class="link" href="www.idpf.org/specs/TODO">www.idpf.org/specs/TODO</a></dd>
            <dt>Diffs to previous version</dt>
            <dd><a class="link" href="www.idpf.org/specs/TODO">www.idpf.org/specs/TODO</a></dd>
         </dl>
         <div class="legal">
            <p class="copyright">Copyright © 2010, 2011 International Digital Publishing Forum™</p>
            <div class="legalnotice" title="Legal Notice"><a id="d22303e32"></a><p>All rights reserved. This work is protected under Title 17 of the United States
                  Code. Reproduction and dissemination of this work with changes is prohibited except
                  with the written permission of the International Digital Publishing Forum.
               </p>
            </div>
         </div>
         <div class="authorgroup">
            <p class="bridgehead">Editors</p>
            <p class="editor">James Pritchett, 
               Recording for the Blind &amp; Dyslexic
               
            </p>
            <p class="editor">Garth Conboy, 
               eBook Technologies
               
            </p>
            <p class="editor">Markus Gylling, 
               DAISY Consortium
               
            </p>
            <p class="editor">William McCoy, 
               WebPaper, inc.
               
            </p>
         </div>
         <div class="toc">
            <p>Table of Contents</p>
            <dl>
               <dt><span class="chapter"><a href="#sec-overview">1. Overview</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#sec-overview-purpose-and-scope">1.1. Purpose and Scope</a></span></dt>
                     <dt><span class="section"><a href="#sec-overview-terminology">1.2. Terminology</a></span></dt>
                     <dt><span class="section"><a href="#sec-overview-conformance">1.3. Conformance</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="section"><a href="#sec-conformance-statements">1.3.1. Conformance statements</a></span></dt>
                           <dt><span class="section"><a href="#sec-overview-conforming-containers">1.3.2. Conforming Containers</a></span></dt>
                           <dt><span class="section"><a href="#sec-overview-conforming-reading-systems">1.3.3. Conforming Processors</a></span></dt>
                        </dl>
                     </dd>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#sec-ocf-overview">2. OCF Overview</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#sec-ocf-overview-intro">2.1. OCF: A General Container Technology</a></span></dt>
                     <dt><span class="section"><a href="#sec-ocf-overview-abstract-vs-physical">2.2. OCF Abstract Container vs. OCF Physical Container</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#sec-container">3. OCF Abstract Container</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#sec-container-file-and-dir-structure">3.1. File and directory structure</a></span></dt>
                     <dt><span class="section"><a href="#sec-container-iri">3.2. Relative IRIs for referencing other components</a></span></dt>
                     <dt><span class="section"><a href="#sec-container-filenames">3.3. File Names</a></span></dt>
                     <dt><span class="section"><a href="#sec-container-metainf">3.4. META-INF</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="section"><a href="#sec-container-metainf-container.xml">3.4.1. Container – META-INF/container.xml (Required)</a></span></dt>
                           <dt><span class="section"><a href="#sec-container-metainf-signatures.xml">3.4.2. Digital Signatures – META-INF/signatures.xml (Optional)</a></span></dt>
                           <dt><span class="section"><a href="#sec-container-metainf-encryption.xml">3.4.3. Encryption – META-INF/encryption.xml (Optional)</a></span></dt>
                           <dt><span class="section"><a href="#sec-container-metainf-metadata.xml">3.4.4. Metadata – META-INF/metadata.xml (Optional)</a></span></dt>
                           <dt><span class="section"><a href="#sec-container-metainf-rights.xml">3.4.5. Rights Management – META-INF/rights.xml (Optional)</a></span></dt>
                           <dt><span class="section"><a href="#sec-container-metainf-manifest.xml">3.4.6. Manifest – META-INF/manifest.xml (Optional)</a></span></dt>
                        </dl>
                     </dd>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#physical-container-zip">4. OCF Physical Container:  The ZIP Container</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#sec-zip-container-zipreqs">4.1. ZIP file requirements</a></span></dt>
                     <dt><span class="section"><a href="#sec-zip-container-mime">4.2. OCF ZIP Container media type identification</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#font-obfuscation">5. Font obfuscation</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#fobfus-intro">5.1. Introduction</a></span></dt>
                     <dt><span class="section"><a href="#fobfus-algorithm">5.2. Obfuscation algorithm</a></span></dt>
                     <dt><span class="section"><a href="#fobfus-keygen">5.3. Generating the obfuscation key</a></span></dt>
                     <dt><span class="section"><a href="#fobfus-specifying">5.4. Specifying obfuscated resources</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="appendix"><a href="#rng-ocf-schema">A. RELAX NG OCF Schema</a></span></dt>
               <dt><span class="appendix"><a href="#example">B. Example</a></span></dt>
               <dt><span class="appendix"><a href="#acknowledgements">C. Contributors</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#sec-contributors">C.1. Acknowledgements and Contributors</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="bibliography"><a href="#references">References</a></span></dt>
            </dl>
         </div>
         <div class="list-of-examples">
            <p>List of Examples</p>
            <dl>
               <dt>B.1. <a href="#example-files">Ordered list of files in the ZIP Container</a></dt>
               <dt>B.2. <a href="#example-mimetype">The contents of the <code class="filename">mimetype</code> file</a></dt>
               <dt>B.3. <a href="#example-container">The contents of the <code class="filename">META-INF/container.xml</code> file</a></dt>
               <dt>B.4. <a href="#example-signatures">The contents of the <code class="filename">META-INF/signatures.xml</code> file</a></dt>
               <dt>B.5. <a href="#example-encryption">The contents of the <code class="filename">META-INF/encryption.xml</code> file</a></dt>
               <dt>B.6. <a href="#example-opf">The contents of the <code class="filename">OEBPS/As You Like It.opf</code> file</a></dt>
            </dl>
         </div>
         <div class="chapter" title="1. Overview">
            <h2 class="title" id="sec-overview"><a class="hidden-reveal" title="Link here" href="#sec-overview">›</a> 1. Overview
            </h2>
            <p>This specification, the EPUB Open Container Format (<a class="firstterm" href="#gloss-ocf"><em class="firstterm">OCF</em></a>), defines a file format and processing model for encapsulating a
               set of related resources into a single-file (ZIP) or logical (file system)
               container
            </p>
            <p>This document is meant to be read and understood in concert with the other
               documents that make up EPUB3. The EPUB3 Overview <a class="xref" href="#refEPUB3Overview" title="EPUB3 OverviewTODO fix link">[<abbr class="abbrev">EPUB3Overview</abbr>]</a>,
               which provides an informative overview of EPUB and a roadmap to the rest of the
               EPUB3 documents, should be read first.
            </p>
            <div class="section" title="1.1. Purpose and Scope">
               <h3 class="title" id="sec-overview-purpose-and-scope"><a class="hidden-reveal" title="Link here" href="#sec-overview-purpose-and-scope">›</a> 1.1. Purpose and Scope
               </h3>
               <p>This specification defines the Open Container Format (OCF). OCF is a
                  general-purpose container technology. This specification describes the
                  general-purpose container technology in the context of encapsulating EPUB
                  publications and OPTIONAL alternate renditions thereof. It is however anticipated
                  that the general-purpose container technology described herein may ultimately be
                  used in other bundling applications.
               </p>
               <p>OCF collects a related set of files into a predictable, machine-readable structure
                  which can be encapsulated in a single file. OCF can be used to collect files in
                  various document formats and for classes of applications. The standardized container
                  structure enables easy transport of, management of, and random access to, the
                  collection.
               </p>
               <p>OCF defines the rules for structuring the file collection in the abstract: the
                  “abstract container”. It also defines the rules for the representation of
                  this abstract container within a ZIP archive (the "physical container"). The rules for
                  ZIP physical containers build upon and are backward compatible with the ZIP
                  technologies used by <a class="link" href="#refODF"
                     title="Current version of spec is 1.1; update?ODF Open Document Format">Open Document Format
                     (ODF)</a>.  OCF also defines a standard method for obfuscating embedded fonts for those EPUB publications that require this functionality.
               </p>
               <p>OCF is the REQUIRED container technology for EPUB publications. OCF MAY play a
                  role in the following workflows:
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist">
                     <li class="listitem">
                        <p>During the preparation steps in producing an electronic publication, OCF
                           MAY be used as the container format when exchanging in-progress publications
                           between different individuals and/or different organizations.
                        </p>
                     </li>
                     <li class="listitem">
                        <p>When providing an electronic publication from publisher or conversion
                           house (Content Provider) to the distribution or sales channel, OCF is the
                           RECOMMENDED container format to be used as the transport format.
                        </p>
                     </li>
                     <li class="listitem">
                        <p>When delivering the final publication to an EPUB Reading System or
                           end-user, OCF is the REQUIRED format for the container that holds all of the
                           assets that make up the publication.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section" title="1.2. Terminology">
               <h3 class="title" id="sec-overview-terminology"><a class="hidden-reveal" title="Link here" href="#sec-overview-terminology">›</a> 1.2. Terminology
               </h3><span class="todo">Rethink/revise after the rest of the rewrites are done.</span><div class="glosslist">
                  <dl>
                     <dt id="gloss-ascii">ASCII</dt>
                     <dd>
                        <p>American Standard Code for Information Interchange – a 7-bit character
                           encoding based on the English alphabet (ANSI X3.4-1986). When used in
                           this document, ASCII refers to the printable graphic characters in the
                           range 33 (decimal) through 126 (decimal) and the nonprintable space
                           character 32 (decimal).
                        </p>
                     </dd>
                     <dt id="gloss-content-provider">Content Provider</dt>
                     <dd>
                        <p>A publisher, author, individual, or other information source that
                           provides a publication to distribution or sales channels or directly to
                           one or more EPUB Reading Systems using OCF as described in this
                           specification.
                        </p>
                     </dd>
                     <dt id="gloss-epub">EPUB</dt>
                     <dd>
                        <p>The publication format as defined by the OCF 3.0, <a class="link" href="EPUB_Publications30.xml">OPF 3.0</a> and <a class="link" href="EPUB_ContentDocs30.xml">OPS 3.0</a>
                           specifications.
                        </p>
                     </dd>
                     <dt id="gloss-epub-publication">EPUB Publication</dt>
                     <dd>
                        <p>A collection of OPS Documents, an OPF Package file, and other files,
                           typically in a variety of media types, including structured text and
                           graphics, packaged in an OCF container that constitute a cohesive unit
                           for publication, as defined by the EPUB standards.
                        </p>
                     </dd>
                     <dt id="gloss-reading-system">EPUB Reading System (or Reading System)</dt>
                     <dd>
                        <p>A combination of hardware and/or software that accepts EPUB
                           Publications and makes them available to consumers of the content. Great
                           variety is possible in the architecture of Reading Systems. A Reading
                           System MAY be implemented entirely on one device, or it MAY be split
                           among several computers. In particular, a reading device that is a
                           component of a Reading System need not directly accept OCF-Packaged EPUB
                           Publications, but all Reading Systems MUST do so. Reading Systems MAY
                           include additional processing functions, such as compression, indexing,
                           encryption, rights management, and distribution.
                        </p>
                     </dd>
                     <dt id="gloss-rootfile">Rootfile</dt>
                     <dd>
                        <p>The top-level file of a rendition of a publication; either the “root”
                           from which all other components can be found or the lone file
                           encapsulating the rendition. The EPUB rootfile is the OPF Package file.
                           A PDF file containing the PDF rendition could also be a rootfile.
                        </p>
                     </dd>
                     <dt id="gloss-ocf">OCF</dt>
                     <dd>
                        <p>The Open Container Format defined by this specification.</p>
                     </dd>
                     <dt id="gloss-opf-package">OPF Package</dt>
                     <dd>
                        <p>An XML document that describes the contents of an EPUB Publication
                           providing metadata, manifest, reading-order and navigation information
                           for the publication.
                        </p>
                     </dd>
                     <dt id="gloss-ops-document">OPS Document</dt>
                     <dd>
                        <p>An XML document that conforms to <a class="link" href="EPUB_ContentDocs30.xml">the OPS 3.0
                              specification</a>, containing the textual content of an EPUB
                           Publication.
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="section" title="1.3. Conformance">
               <h3 class="title" id="sec-overview-conformance"><a class="hidden-reveal" title="Link here" href="#sec-overview-conformance">›</a> 1.3. Conformance
               </h3>
               <div class="section" title="1.3.1. Conformance statements">
                  <h4 class="title" id="sec-conformance-statements"><a class="hidden-reveal" title="Link here" href="#sec-conformance-statements">›</a> 1.3.1. Conformance statements
                  </h4>
                  <p>The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
                     "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as
                     described in <a class="xref" href="#refRFC2119"
                        title="Key words for use in RFCs to Indicate Requirement Levels (RFC 2119)">[<abbr class="abbrev">RFC2119</abbr>]</a>.
                  </p>
                  <p>All sections of this specification are normative except where identified by 
                     the informative status label "This section is informative". The application of informative 
                     status to sections and appendices applies to all child content and subsections 
                     they may contain.
                  </p>
                  <p>All examples in this specification are informative.</p>
               </div>
               <div class="section" title="1.3.2. Conforming Containers">
                  <h4 class="title" id="sec-overview-conforming-containers"><a class="hidden-reveal" title="Link here"
                        href="#sec-overview-conforming-containers">›</a> 1.3.2. Conforming Containers
                  </h4>
                  <p>The term “Conforming OCF Abstract Container” indicates an OCF Abstract
                     Container (see <a class="xref" href="#sec-ocf-overview-abstract-vs-physical"
                        title="2.2. OCF Abstract Container vs. OCF Physical Container">Section 2.2, “OCF Abstract Container vs. OCF Physical Container”</a>) that
                     conforms to all of the relevant conformance criteria defined in this
                     specification. The term “Conforming OCF ZIP Container” indicates a ZIP archive
                     that conforms to the relevant ZIP container conformance criteria (see <a class="xref" href="#physical-container-zip"
                        title="4. OCF Physical Container: The ZIP Container">Chapter 4, OCF Physical Container:  The ZIP Container</a>) and whose contents is a Conforming OCF
                     Abstract Container.
                  </p>
                  <p>
                     <span class="todo">JP:  This appears to duplicate the document requirements of the OPF and OPS specs.  Can this be removed?</span>In addition to other conformance criteria defined in this specification, all
                     XML files in a Conforming OCF Abstract Container MUST meet the following
                     conditions:
                  </p>
                  <div class="itemizedlist">
                     <ul class="itemizedlist">
                        <li class="listitem">
                           <p>All XML files MUST be well-formed XML Documents as defined by <a class="xref" href="#refXML"
                                 title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">[<abbr class="abbrev">XML</abbr>]</a></p>
                        </li>
                        <li class="listitem">
                           <p>All XML files MUST be compatible with the XML 1.0
                              specification (http://www.w3.org/TR/2006/REC-xml-20060816/) and the
                              Namespaces in XML specification
                              (http://www.w3.org/TR/2006/REC-xml-names-20060816/)
                           </p>
                        </li>
                        <li class="listitem">
                           <p>All XML files MUST be encoded in UTF-8 or UTF-16 as defined by <a class="xref" href="#refUnicode5"
                                 title="The Unicode Consortium. The Unicode Standard, Version 5.0.0, defined by: The Unicode Standard, Version 5.0 (Boston, MA, Addison-Wesley, 2007. ISBN 0-321-48091-0)">[<abbr class="abbrev">Unicode</abbr>]</a></p>
                        </li>
                        <li class="listitem">
                           <p>All XML files MUST conform to the relevant XML specification for the
                              MIME type specified for the file
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="section" title="1.3.3. Conforming Processors">
                  <h4 class="title" id="sec-overview-conforming-reading-systems"><a class="hidden-reveal" title="Link here"
                        href="#sec-overview-conforming-reading-systems">›</a> 1.3.3. Conforming Processors
                  </h4>
                  <p>
                     <span class="todo">JP:  This needs review and revision to align with conformance statements in other specs.</span>
                     
                  </p>
                  <p>The term “Conforming EPUB Reading System” indicates a Reading System that
                     supports all of the mandatory features defined by this specification and the OPF
                     and OPS specifications.
                  </p>
                  <p>An EPUB Reading System that does not support all of the features defined in
                     this specification and the OPF and OPS specifications MUST NOT claim to be a
                     Conforming EPUB Reading System and SHOULD provide readily available
                     documentation of the subset of features it supports.
                  </p>
                  <p>An EPUB Reading System SHOULD provide readily available documentation of the
                     accessibility features it supports. This documentation SHOULD conform to the
                     relevant version of the W3C's Web Content Accessibility Guidelines.
                  </p>
               </div>
            </div>
         </div>
         <div class="chapter" title="2. OCF Overview">
            <h2 class="title" id="sec-ocf-overview"><a class="hidden-reveal" title="Link here" href="#sec-ocf-overview">›</a> 2. OCF Overview
            </h2>
            <div class="section" title="2.1. OCF: A General Container Technology">
               <h3 class="title" id="sec-ocf-overview-intro"><a class="hidden-reveal" title="Link here" href="#sec-ocf-overview-intro">›</a> 2.1. OCF: A General Container Technology
               </h3>
               <p>OCF is purposely designed as a general container technology that can be used by
                  other file formats, not just EPUB.
                  
               </p>
            </div>
            <div class="section" title="2.2. OCF Abstract Container vs. OCF Physical Container">
               <h3 class="title" id="sec-ocf-overview-abstract-vs-physical"><a class="hidden-reveal" title="Link here"
                     href="#sec-ocf-overview-abstract-vs-physical">›</a> 2.2. OCF Abstract Container vs. OCF Physical Container
               </h3>
               <p>An “OCF Abstract Container” defines a file system model for the contents of the
                  container. The file system model uses a single common root directory for all of the
                  contents of the container. All (non-remote) electronic assets for embedded
                  publications are located within the directory tree headed by the container’s root
                  directory, although no specific file system structure is mandated for this. The file
                  system model also includes a mandatory directory named <code class="filename">META-INF</code>
                  that is a direct child of the root directory and which is used to store the
                  following special files: 
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist">
                     <li class="listitem">
                        <p>container.xml points to the file that is the point of entry for the
                           publication. This file is always present.
                        </p>
                     </li>
                     <li class="listitem">
                        <p><code class="filename">signatures.xml</code> contains digital signatures for
                           various assets (if used).
                        </p>
                     </li>
                     <li class="listitem">
                        <p><code class="filename">encryption.xml</code> contains information about the
                           encryption of various assets (if used).
                        </p>
                     </li>
                     <li class="listitem">
                        <p><code class="filename">metadata.xml</code> may be used to store metadata about
                           the container (optional).
                        </p>
                     </li>
                     <li class="listitem">
                        <p><code class="filename">rights.xml</code> may be used to store information about
                           digital rights, if necessary.
                        </p>
                     </li>
                     <li class="listitem">
                        <p><code class="filename">manifest.xml</code> is an optional manifest of container
                           contents, compatible with <a class="link" href="#refODF"
                              title="Current version of spec is 1.1; update?ODF Open Document Format">Open Document Format
                              (ODF)</a>.
                        </p>
                     </li>
                  </ul>
               </div>
               <p> Full details of conformance requirements for the various files in
                  <code class="filename">META-INF</code> are found in <a class="xref" href="#sec-container-metainf" title="3.4. META-INF">Section 3.4, “META-INF”</a>. 
               </p>
               <p>An “OCF Physical Container” is the physical manifestation of an abstract
                  container. This specification defines how an abstract container MUST be mapped to a ZIP
                  archive (<a class="xref" href="#physical-container-zip"
                     title="4. OCF Physical Container: The ZIP Container">Chapter 4, OCF Physical Container:  The ZIP Container</a>).
               </p>
            </div>
         </div>
         <div class="chapter" title="3. OCF Abstract Container">
            <h2 class="title" id="sec-container"><a class="hidden-reveal" title="Link here" href="#sec-container">›</a> 3. OCF Abstract Container
            </h2>
            <div class="section" title="3.1. File and directory structure">
               <h3 class="title" id="sec-container-file-and-dir-structure"><a class="hidden-reveal" title="Link here"
                     href="#sec-container-file-and-dir-structure">›</a> 3.1. File and directory structure
               </h3>
               <p>The virtual file system for the OCF Abstract Container MUST have a single common
                  root directory for all of the contents of the container.
               </p>
               <p> The OCF Abstract Container MUST include a directory named
                  <code class="filename">META-INF</code> at the root level of the virtual file system.
                  Requirements for the contents of this directory are described in <a class="xref" href="#sec-container-metainf" title="3.4. META-INF">Section 3.4, “META-INF”</a>.
               </p>
               <p>The file name <code class="filename">mimetype</code> in the root directory is reserved for
                  use by OCF ZIP Containers, as explained in <a class="xref" href="#physical-container-zip"
                     title="4. OCF Physical Container: The ZIP Container">Chapter 4, OCF Physical Container:  The ZIP Container</a>.
               </p>
               <p>All other files used by the publication rendition(s) within the OCF Abstract
                  Container MAY be in any location descendant from the root directory except for
                  <code class="filename">mimetype</code> at the root level or within the
                  <code class="filename">META-INF</code> directory.
               </p>
               <p>It is RECOMMENDED that the contents of individual publications be stored within
                  dedicated directories under the root to minimize potential file name collisions in
                  the event that multiple renditions are used.
               </p>
            </div>
            <div class="section" title="3.2. Relative IRIs for referencing other components">
               <h3 class="title" id="sec-container-iri"><a class="hidden-reveal" title="Link here" href="#sec-container-iri">›</a> 3.2. Relative IRIs for referencing other components
               </h3>
               <p>Files
                  within the OCF Abstract Container MUST reference each other via Relative IRI References
                  (<a class="xref" href="#refRFC3987"
                     title="Internationalized Resource Identifiers (IRIs) (RFC 3987)">[<abbr class="abbrev">RFC3987</abbr>]</a> and <a class="xref" href="#refRFC3986"
                     title="Uniform Resource Identifier (URI): Generic Syntax (RFC 3986)">[<abbr class="abbrev">RFC3986</abbr>]</a>).
                  For example, if a file named <code class="filename">chapter1.html</code> references an image
                  file named <code class="filename">image1.jpg</code> that is located in the same directory,
                  then <code class="filename">chapter1.html</code> might contain the following as part of its
                  content:
               </p>
               <div class="informalexample"><pre class="synopsis">
&lt;img src="image1.jpg" alt="…" /&gt;
                </pre></div>
               <p>For Relative IRI References, the Base IRI (see <a class="xref" href="#refRFC3986"
                     title="Uniform Resource Identifier (URI): Generic Syntax (RFC 3986)">[<abbr class="abbrev">RFC3986</abbr>]</a>) is
                  determined by the relevant language specifications for the given file formats. For
                  example, the CSS specification defines how relative IRI references work in the
                  context of CSS style sheets and property declarations. Note that some language
                  specifications reference RFCs that preceded RFC3987, in which case the earlier RFC
                  applies for content in that particular language.
               </p>
               <p>Unlike most language specifications, the Base IRIs for all files within the
                  META-INF/ directory use the root folder for the Abstract Container as the default
                  Base IRI. For example, if <code class="filename">META-INF/container.xml</code> has the
                  following content:
               </p>
               <div class="informalexample"><pre class="synopsis">
&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path="OEBPS/Great Expectations.opf"
            media-type="application/oebps-package+xml" /&gt;	
    &lt;/rootfiles&gt;
&lt;/container&gt;
            </pre></div>
               <p>then the path <code class="filename">OEBPS/Great Expectations.opf</code> is relative to the
                  root directory for the OCF Abstract Container and not relative to the
                  <code class="filename">META-INF/</code> directory.
               </p>
            </div>
            <div class="section" title="3.3. File Names">
               <h3 class="title" id="sec-container-filenames"><a class="hidden-reveal" title="Link here" href="#sec-container-filenames">›</a> 3.3. File Names
               </h3>
               <p>The term <code class="literal">File Name</code> represents the name of any type of file,
                  either a directory or an ordinary file within a directory within an OCF Abstract
                  Container. For a given directory within the OCF Abstract Container, the Path Name is
                  a string holding all directory names in the full path concatenated together with a
                  “/” (ASCII 0x2F) character separating the directory names. For a given file within
                  the Abstract Container, the Path Name is the string holding all directory names
                  concatenated together with a “/” character separating the directory names, followed
                  by a “/” character and then the name of the file. The File Name restrictions
                  described below are designed to allow directory names and file names to be used
                  without modification on most commonly used operating systems. This specification
                  does not specify how an OCF Processor that is unable to represent OCF conforming
                  File Names would compensate for this incompatibility.
               </p>
               <p>The following statements apply to Conforming OCF Abstract Containers:</p>
               <div class="itemizedlist">
                  <ul class="itemizedlist">
                     <li class="listitem">
                        <p>File Names MUST be UTF-8 (<a class="xref" href="#refUnicode5"
                              title="The Unicode Consortium. The Unicode Standard, Version 5.0.0, defined by: The Unicode Standard, Version 5.0 (Boston, MA, Addison-Wesley, 2007. ISBN 0-321-48091-0)">[<abbr class="abbrev">Unicode</abbr>]</a>) encoded with the
                           restrictions below
                        </p>
                     </li>
                     <li class="listitem">
                        <p>When represented as UTF-8, File Names MUST NOT exceed 255 bytes</p>
                     </li>
                     <li class="listitem">
                        <p>When represented as UTF-8, the Path Name for any directory or file within
                           the Abstract Container MUST NOT exceed 65535 bytes
                        </p>
                     </li>
                     <li class="listitem">
                        <p>File Names MUST NOT use the following characters (Reason: these characters
                           may not be supported always across commonly used operating systems):
                        </p>
                        <div class="itemizedlist">
                           <ul class="itemizedlist">
                              <li class="listitem">
                                 <p>Slash: <code class="literal">/</code> (ASCII 0x2F)
                                 </p>
                              </li>
                              <li class="listitem">
                                 <p>Double quote: <code class="literal">"</code> (ASCII 0x22)
                                 </p>
                              </li>
                              <li class="listitem">
                                 <p>Asterisk: <code class="literal">*</code> (ASCII 0x2A)
                                 </p>
                              </li>
                              <li class="listitem">
                                 <p>Period as the last character: <code class="literal">.</code> (ASCII
                                    0x3A)
                                 </p>
                              </li>
                              <li class="listitem">
                                 <p>Colon: <code class="literal">:</code> (ASCII 0x3A)
                                 </p>
                              </li>
                              <li class="listitem">
                                 <p>Less than: <code class="literal">&lt;</code> (ASCII 0x3C)
                                 </p>
                              </li>
                              <li class="listitem">
                                 <p>Greater than: <code class="literal">&gt;</code> (ASCII 0x3E)
                                 </p>
                              </li>
                              <li class="listitem">
                                 <p>Question mark: <code class="literal">?</code> (ASCII 0x3F)
                                 </p>
                              </li>
                              <li class="listitem">
                                 <p>Back slash : <code class="literal">\</code> (ASCII 0x5C)
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="listitem">
                        <p>File Names are case sensitive.</p>
                     </li>
                     <li class="listitem">
                        <p>Two File Names within the same directory MUST NOT map to the same string
                           following case normalization as described in section 3.13 of (<a class="xref" href="#refUnicode5"
                              title="The Unicode Consortium. The Unicode Standard, Version 5.0.0, defined by: The Unicode Standard, Version 5.0 (Boston, MA, Addison-Wesley, 2007. ISBN 0-321-48091-0)">[<abbr class="abbrev">Unicode</abbr>]</a>). Two File Names that differ only in case are
                           disallowed within the same directory.
                        </p>
                     </li>
                     <li class="listitem">
                        <p>Two File Names within the same directory MAY map to the same string
                           following accent normalization.
                        </p>
                     </li>
                  </ul>
               </div>
               <p>Note that some commercial ZIP tools do not support the full Unicode range and may
                  only support the ASCII range for File Names. Content creators who want to use ZIP
                  tools that have these restrictions MAY find it is best to restrict their File Names
                  to the ASCII range. If the names of files can not be preserved during the unzipping
                  process, it will be necessary to compensate for any name translation which took
                  place when the files are referenced by URI from within the content.
               </p>
            </div>
            <div class="section" title="3.4. META-INF">
               <h3 class="title" id="sec-container-metainf"><a class="hidden-reveal" title="Link here" href="#sec-container-metainf">›</a> 3.4. META-INF
               </h3>
               <p>All valid OCF Abstract Containers MUST include a directory called
                  <code class="filename">META-INF</code> at the root level of the container file system.
                  This directory contains the files specified below that describe the contents,
                  metadata, signatures, encryption, rights and other information about the contained
                  publication.
               </p>
               <p>The semantics of the following files that MAY be present at the
                  <code class="filename">META-INF/</code> level are specified. All other files found at the
                  <code class="filename">META-INF/</code> level MUST be ignored by conformant OCF
                  Processor.
               </p>
               <div class="section" title="3.4.1. Container – META-INF/container.xml (Required)">
                  <h4 class="title" id="sec-container-metainf-container.xml"><a class="hidden-reveal" title="Link here"
                        href="#sec-container-metainf-container.xml">›</a> 3.4.1. Container – META-INF/container.xml (Required)
                  </h4>
                  <p>All valid OCF Containers MUST include a file called
                     <code class="filename">container.xml</code> within the <code class="filename">META-INF</code>
                     directory at the root level of the container file system. The
                     <code class="filename">container.xml</code> file MUST identify the MIME type of, and
                     path to, the rootfile for the OPF/OPS version of the publication and any
                     OPTIONAL alternate renditions included within the container.
                  </p>
                  <p>The <code class="filename">container.xml</code> file MUST NOT be encrypted.
                  </p>
                  <p>A RELAX NG OCF schema describing the &lt;container&gt; element can be found in
                     <a class="xref" href="#rng-ocf-schema" title="Appendix A. RELAX NG OCF Schema">Appendix A, RELAX NG OCF Schema</a>. Conforming
                     <code class="filename">container.xml</code> files MUST be valid according to the
                     <a class="link" href="#rng-ocf-schema" title="Appendix A. RELAX NG OCF Schema">RELAX NG OCF schema</a> with the
                     <code class="code">&lt;container&gt;</code> element as the root element after removing
                     all elements (and child nodes of these elements) and attributes from other
                     namespaces.
                  </p>
                  <p class="contentconf">The <code class="code">&lt;rootfiles&gt;</code> element must contain at
                     least one &lt;rootfile&gt; element, each of which must uniquely reference a
                     single form of of the contained publication.
                  </p><span class="todo">TODO: consider supporting human-readable label and/or
                     machine-readable type metadata to facilitate choosing from multiple
                     alternatives</span><p class="epubconf">For EPUB Publications, there must be at least one
                     &lt;rootfile&gt; element with a media-type of
                     <code class="literal">application/oebps-package+xml</code>. The target of such a
                     reference (an OPF package file) must not be encrypted. 
                  </p>
                  <p class="rsconf">A Reading System should consider the first such reference to
                     occur within the &lt;rootfiles&gt; element to be the default rendition for the
                     contained publication.
                  </p>
                  <div class="informalexample">
                     <p>The following example shows a sample container.xml for an EPUB Publication
                        with the root file <code class="filename">OEBPS/My Crazy Life.opf</code> (the OPF
                        package file):
                     </p><pre class="synopsis">
&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path="OEBPS/My Crazy Life.opf"
            media-type="application/oebps-package+xml" /&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;
                    </pre></div>
                  <div class="informalexample">
                     <p>The following example adds an alternate PDF version of the
                        publication:
                     </p><pre class="synopsis">
&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path="OEBPS/My Crazy Life.opf"
            media-type="application/oebps-package+xml" /&gt;
        &lt;rootfile full-path="PDF/My Crazy Life.pdf"
            media-type="application/pdf" /&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;
                    </pre></div>
                  <p>The <code class="code">&lt;manifest&gt;</code> element contained within the OPF root
                     package file specifies the one and only manifest used for OPS processing; all
                     items referenced in this manifest MUST be included in the ZIP archive. Ancillary
                     manifest information contained in the ZIP archive or in the OPTIONAL
                     <code class="filename">manifest.xml</code> file MUST NOT be used for OPS processing
                     purposes. Any extra files in the ZIP archive (i.e., files within the ZIP archive
                     that are not listed within the package files’ <code class="code">&lt;manifest&gt;</code>
                     element, such as META-INF files or alternate derived renditions of the
                     publication) MUST NOT be used in the processing of the OPS publication.
                  </p>
                  <p>The values of the <code class="code">full-path</code> attributes MUST contain a
                     <code class="literal">path component</code> (as defined by <a class="xref" href="#refRFC3986"
                        title="Uniform Resource Identifier (URI): Generic Syntax (RFC 3986)">[<abbr class="abbrev">RFC3986</abbr>]</a>) which MUST only take the form of a <code class="literal">path-rootless</code> (as
                     defined by RFC3986). The path components are relative to the root of the
                     container in which they are used.
                  </p>
                  <p>Conforming OCF Processors MUST ignore unrecognized elements (and their
                     contents) and unrecognized attributes within a
                     <code class="filename">container.xml</code> file, including unrecognized elements and
                     unrecognized attributes from other namespaces.
                  </p>
               </div>
               <div class="section"
                    title="3.4.2. Digital Signatures – META-INF/signatures.xml (Optional)">
                  <h4 class="title" id="sec-container-metainf-signatures.xml"><a class="hidden-reveal" title="Link here"
                        href="#sec-container-metainf-signatures.xml">›</a> 3.4.2. Digital Signatures – META-INF/signatures.xml (Optional)
                  </h4>
                  <p>An OPTIONAL <code class="filename">signatures.xml</code> file within the
                     <code class="filename">META-INF</code> directory at the root level of the container
                     file system holds digital signatures of the container and its contents. This
                     file is an XML document whose root element is <code class="code">&lt;signatures&gt;</code>.
                     The <code class="code">&lt;signatures&gt;</code> element contains child elements of type
                     <code class="code">&lt;Signature&gt;</code> as defined by <a class="xref" href="#refXMLDSIGCORE"
                        title="1.1 going to CR soon. Update reference as necessary XML-Signature Syntax and Processing (Second Edition)">[<abbr class="abbrev">XML DSIG Core</abbr>]</a>. Signatures can be applied to the publication and any alternate renditions as
                     a whole or to parts of the publication and renditions. XML Signature can specify
                     the signing of any kind of data, not just XML.
                  </p>
                  <p>The signatures.xml file MUST NOT be encrypted.</p>
                  <p>When the <code class="filename">signatures.xml</code> file is not present, the OCF
                     container provides no information indicating any part of the container is
                     digitally signed at the container level. It is however possible that digital
                     signing exists within any optional alternate contained renditions.
                  </p>
                  <p>A RELAX NG OCF schema describing the <code class="code">&lt;signatures&gt;</code> element
                     can be found in the <a class="xref" href="#rng-ocf-schema" title="Appendix A. RELAX NG OCF Schema">Appendix A, RELAX NG OCF Schema</a>. Conforming
                     <code class="filename">signatures.xml</code> files MUST be valid according to this
                     schema with the <code class="code">&lt;signatures&gt;</code> element as the root element
                     after removing all elements (and child nodes of these elements) and attributes
                     from other namespaces.
                  </p>
                  <p>When an OCF agent creates a signature of data in a container, it SHOULD add
                     the new signature as the last child <code class="code">&lt;Signature&gt;</code> element of
                     the <code class="code">&lt;signatures&gt;</code> element in the
                     <code class="filename">signatures.xml</code> file.
                  </p>
                  <p>Each <code class="code">&lt;Signature&gt;</code> in the signatures.xml file identifies by
                     IRI the data to which the signature applies, using the XML Signature
                     <code class="code">&lt;Manifest&gt;</code> element and its <code class="code">&lt;Reference&gt;</code>
                     sub-elements. Individual contained files MAY be signed separately or together.
                     Separately signing each file creates a digest value for the resource that can be
                     validated independently. This approach MAY make a Signature element larger. If
                     files are signed together, the set of signed files can be listed in a single XML
                     Signature <code class="code">&lt;Manifest&gt;</code> element and referenced by one or more
                     <code class="code">&lt;Signature&gt;</code> elements.
                  </p>
                  <p>Any or all files in the container can be signed in their entirety with the
                     exception of the signatures.xml file since that file will contain the computed
                     signature information. Whether and how the signatures.xml file SHOULD be signed
                     depends on the objective of the signer.
                  </p>
                  <p>If the signer wants to allow signatures to be added or removed from the
                     container without invalidating the signer’s signature, the signatures.xml file
                     SHOULD NOT be signed.
                  </p>
                  <p>If the signer wants any addition or removal of a signature to invalidate the
                     signer’s signature, the Enveloped Signature transform (defined in <a class="link"
                        href="http://www.w3.org/TR/2008/REC-xmldsig-core-20080610/#sec-EnvelopedSignature">Section 6.6.4</a> of <a class="xref" href="#refXMLDSIGCORE"
                        title="1.1 going to CR soon. Update reference as necessary XML-Signature Syntax and Processing (Second Edition)">[<abbr class="abbrev">XML DSIG Core</abbr>]</a>) can be used to
                     sign the entire preexisting signature file excluding the
                     <code class="code">&lt;Signature&gt;</code> being created. This transform would sign all
                     previous signatures, and it would become invalid if a subsequent signature was
                     added to the package.
                  </p>
                  <p>If the signer wants the removal of an existing signature to invalidate the
                     signer’s signature but also wants to allow the addition of signatures, an XPath
                     transform can be used to sign just the existing signatures. (This is only a
                     suggestion. The particular XPath transform is not a part of OCF
                     specification.)
                  </p>
                  <p>XML-Signature does not associate any semantics with a signature, however an
                     agent MAY include semantic information, for example, by adding information to
                     the Signature element that describes the signature. XML Signature describes how
                     additional information can be added to a signature (for example, by using the
                     <code class="code">&lt;SignatureProperties&gt;</code> element).
                  </p>
                  <div class="informalexample">
                     <p>The following XML expression shows the content of an example
                        <code class="filename">signatures.xml</code> file, and is based on the examples
                        found in <a class="link"
                           href="http://www.w3.org/TR/2008/REC-xmldsig-core-20080610/#sec-Overview">Section 2</a> of <a class="xref" href="#refXMLDSIGCORE"
                           title="1.1 going to CR soon. Update reference as necessary XML-Signature Syntax and Processing (Second Edition)">[<abbr class="abbrev">XML DSIG Core</abbr>]</a>. It contains one
                        signature, and the signature applies to two resources,
                        <code class="filename">OEBFPS/book.html</code> and
                        <code class="filename">OEBFPS/images/cover.jpeg</code>, in the container.
                     </p><pre class="synopsis">
&lt;signatures&gt;
    &lt;Signature Id="MyFirstSignature" xmlns="http://www.w3.org/2000/09/xmldsig#"&gt;
        &lt;SignedInfo&gt;
            &lt;CanonicalizationMethod 
                Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
            &lt;SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"/&gt;
            &lt;Reference URI="#Manifest1"&gt;
                &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                &lt;DigestValue&gt;j6lwx3rvEPO0vKtMup4NbeVu8nk=&lt;/DigestValue&gt;
            &lt;/Reference&gt;
        &lt;/SignedInfo&gt;
        &lt;SignatureValue&gt;MC0CFFrVLtRlk=...&lt;/SignatureValue&gt;
        &lt;KeyInfo&gt;
            &lt;KeyValue&gt;
                &lt;DSAKeyValue&gt;
                    &lt;P&gt;...&lt;/P&gt;&lt;Q&gt;...&lt;/Q&gt;&lt;G&gt;...&lt;/G&gt;&lt;Y&gt;...&lt;/Y&gt; 
                &lt;/DSAKeyValue&gt;
            &lt;/KeyValue&gt;
        &lt;/KeyInfo&gt;
        &lt;Object&gt;
            &lt;Manifest Id="Manifest1"&gt;
                &lt;Reference URI="OEBFPS/book.xml"&gt;
                    &lt;Transforms&gt;
                        &lt;Transform
                            Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
                    &lt;/Transforms&gt;
                &lt;/Reference&gt;
                &lt;Reference URI="OEBFPS/images/cover.jpeg"/&gt;
            &lt;/Manifest&gt;
        &lt;/Object&gt;
    &lt;/Signature&gt;
&lt;/signatures&gt;
                    </pre></div>
               </div>
               <div class="section" title="3.4.3. Encryption – META-INF/encryption.xml (Optional)">
                  <h4 class="title" id="sec-container-metainf-encryption.xml"><a class="hidden-reveal" title="Link here"
                        href="#sec-container-metainf-encryption.xml">›</a> 3.4.3. Encryption – META-INF/encryption.xml (Optional)
                  </h4>
                  <p>An OPTIONAL “encryption.xml” file within the “META-INF” directory at the root
                     level of the container file system holds all encryption information on the
                     contents of the container. This file is an XML document whose root element is
                     <code class="code">&lt;encryption&gt;</code>. The <code class="code">&lt;encryption&gt;</code> element
                     contains child elements of type <code class="code">&lt;EncryptedKey&gt;</code> and
                     <code class="code">&lt;EncryptedData&gt;</code> as defined by <a class="xref" href="#refXMLENCCORE"
                        title="1.1 due to go to CR very soon; update reference as needed XML Encryption Syntax and Processing">[<abbr class="abbrev">XML ENC Core</abbr>]</a>. Each <code class="code">&lt;EncryptedData&gt;</code> element
                     describes how one or more container files are encrypted. Consequently, if any
                     resource within the container is encrypted, “encryption.xml” MUST be present to
                     indicate that the resource is encrypted and provide information on how it is
                     encrypted.
                  </p>
                  <p>An <code class="code">&lt;EncryptedKey&gt;</code> element describes each encryption key
                     used in the container, while an <code class="code">&lt;EncryptedData&gt;</code> element
                     describes each encrypted file. Each <code class="code">&lt;EncryptedData&gt;</code> element
                     refers to an <code class="code">&lt;EncryptedKey&gt;</code> element, as described in XML
                     Encryption.
                  </p>
                  <p>A RELAX NG OCF schema describing the <code class="code">&lt;encryption&gt;</code> element
                     of encryption.xml can be found in <a class="xref" href="#rng-ocf-schema" title="Appendix A. RELAX NG OCF Schema">Appendix A, RELAX NG OCF Schema</a>. Conforming
                     <code class="filename">encryption.xml</code> files MUST be valid according to this
                     schema with the <code class="code">&lt;encryption&gt;</code> element as the root element
                     after removing all elements (and child nodes of these elements) and attributes
                     from other namespaces.
                  </p>
                  <p>When the encryption.xml file is not present, the OCF Abstract Container
                     provides no information indicating any part of the container is
                     encrypted.
                  </p>
                  <p>OCF encrypts individual files independently, trading off some security for
                     improved performance, allowing the container contents to be incrementally
                     decrypted. Encryption in this way still exposes the directory structure and file
                     naming of the whole package.
                  </p>
                  <p>OCF uses XML Encryption (<a class="xref" href="#refXMLENCCORE"
                        title="1.1 due to go to CR very soon; update reference as needed XML Encryption Syntax and Processing">[<abbr class="abbrev">XML ENC Core</abbr>]</a>) to provide a
                     framework for encryption, allowing a variety of algo­rithms to be used. XML
                     Encryption specifies a process for encrypting arbitrary data and representing
                     the result in XML. Even though an OCF Abstract Container MAY contain non-XML
                     data, XML Encryption can be used to encrypt all data in an OCF Abstract
                     Container. OCF encryption sup­ports only encryption of whole files. The
                     encryption.xml file, if present, MUST NOT be encrypted.
                  </p>
                  <p>Encrypted data replaces unencrypted data in an OCF Abstract Container. For
                     example, if an image named “photo.jpeg” is encrypted, the contents of the
                     photo.jpeg resource SHOULD be replaced by its encrypted contents. When stored in
                     a ZIP container, streams of data MUST be compressed before they are encrypted;
                     Deflate compression MUST be used. Within the ZIP directory, encrypted files
                     SHOULD be stored rather than Deflate-compressed.
                  </p>
                  <p>
                     It MAY be desired to obfuscate the storage of embedded fonts referenced by an
                     EPUB Publication to tie them to the “parent” publication and make them more
                     difficult to extract for unrestricted use. In these cases,
                     <code class="filename">encryption.xml</code> SHOULD be used to provide requisite font
                     decoding information according to <a class="xref" href="#font-obfuscation" title="5. Font obfuscation">Chapter 5, Font obfuscation</a>.
                  </p>
                  <p>The following files MUST never be encrypted (regardless of whether default or
                     specific encryption is requested):
                  </p>
                  <table border="0" summary="Simple list" class="simplelist">
                     <tr>
                        <td><code class="filename">mimetype</code></td>
                     </tr>
                     <tr>
                        <td><code class="filename">META-INF/container.xml</code></td>
                     </tr>
                     <tr>
                        <td><code class="filename">META-INF/manifest.xml</code></td>
                     </tr>
                     <tr>
                        <td><code class="filename">META-INF/metadata.xml</code></td>
                     </tr>
                     <tr>
                        <td><code class="filename">META-INF/signatures.xml</code></td>
                     </tr>
                     <tr>
                        <td><code class="filename">META-INF/encryption.xml</code></td>
                     </tr>
                     <tr>
                        <td><code class="filename">META-INF/rights.xml</code></td>
                     </tr>
                     <tr>
                        <td><code class="filename">EPUB rootfile (the OPF Package file)</code></td>
                     </tr>
                  </table>
                  <p>Signed resources MAY subsequently be encrypted by using the Decryption
                     Transform for XML Signature. This feature enables an application such as an OCF
                     agent to distinguish data that was encrypted before signing from data that was
                     encrypted after signing. Only data that was encrypted after signing MUST be
                     decrypted before computing the digest used to validate the signature.
                  </p>
                  <div class="informalexample">
                     <p>In the following example, adapted from <a class="link"
                           href="http://www.w3.org/TR/2002/REC-xmlenc-core-20021210/#sec-eg-Symmetric-Key">Section 2.2.1 </a> of <a class="xref" href="#refXMLENCCORE"
                           title="1.1 due to go to CR very soon; update reference as needed XML Encryption Syntax and Processing">[<abbr class="abbrev">XML ENC Core</abbr>]</a> the resource
                        image.jpeg is encrypted using a symmetric key algorithm (AES) and the
                        symmetric key is further encrypted using an asymmetric key algorithm (RSA)
                        with a key of John Smith.
                     </p><pre class="synopsis">
&lt;encryption
    xmlns ="urn:oasis:names:tc:opendocument:xmlns:container"
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#"
    xmlns:ds="http://www.w3.org/2000/09/xmldsig#"&gt;
    &lt;enc:EncryptedKey Id="EK"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:KeyName&gt;John Smith&lt;/ds:KeyName&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherValue&gt;xyzabc&lt;/enc:CipherValue&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedKey&gt;
    &lt;enc:EncryptedData Id="ED1"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:RetrievalMethod URI="#EK"
                Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherReference URI="image.jpeg"/&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedData&gt;
&lt;/encryption&gt;
                    </pre></div>
               </div>
               <div class="section" title="3.4.4. Metadata – META-INF/metadata.xml (Optional)">
                  <h4 class="title" id="sec-container-metainf-metadata.xml"><a class="hidden-reveal" title="Link here"
                        href="#sec-container-metainf-metadata.xml">›</a> 3.4.4. Metadata – META-INF/metadata.xml (Optional)
                  </h4>
                  <p>A file with the reserved name <code class="filename">metadata.xml</code> within the
                     <code class="filename">META-INF</code> directory at the root level of the container
                     file system may appear in a valid OCF Abstract Container. This file, if present,
                     MUST be used for container-level metadata. In version 3.0 of OCF, no such
                     container-level metadata is specified. It is in this file that future innovation
                     and extension SHOULD occur.
                  </p>
                  <p>If the <code class="filename">META-INF/metadata.xml</code> file exists, its contents
                     MUST be valid XML with namespace-qualified elements to avoid collision with
                     future versions of OCF that MAY specify a particular grammar and namespace for
                     elements and attributes within this file.
                  </p>
                  <p>The <code class="filename">metadata.xml</code> file, if present, MUST NOT be
                     encrypted.
                  </p>
               </div>
               <div class="section"
                    title="3.4.5. Rights Management – META-INF/rights.xml (Optional)">
                  <h4 class="title" id="sec-container-metainf-rights.xml"><a class="hidden-reveal" title="Link here"
                        href="#sec-container-metainf-rights.xml">›</a> 3.4.5. Rights Management – META-INF/rights.xml (Optional)
                  </h4>
                  <p>An OPTIONAL file with the name <code class="filename">rights.xml</code> within the
                     <code class="filename">META-INF</code> directory at the root level of the container
                     file system is a reserved name in a valid OCF Abstract Container. This location
                     is reserved for digital rights management (DRM) information for trusted exchange
                     of Publications among rights holders, intermediaries, and users. In version
                     2.0.1 of OCF, there is not a REQUIRED format for DRM information, but a future
                     version of this specification MAY specify a particular format for DRM
                     information.
                  </p>
                  <p>If the <code class="filename">META-INF/rights.xml</code> file exists, it MUST be a
                     well-formed XML document which uses and conforms to XML Namespaces it uses, and
                     its contents SHOULD be valid XML with namespace-qualified elements to avoid
                     collision with future versions of OCF that MAY specify a particular format this
                     file.
                  </p>
                  <p>The <code class="filename">rights.xml</code> file MUST NOT be encrypted.
                  </p>
                  <p>When the <code class="filename">rights.xml</code> file is not present, the OCF
                     container provides no information indicating any part of the container is rights
                     governed.
                  </p>
               </div>
               <div class="section" title="3.4.6. Manifest – META-INF/manifest.xml (Optional)">
                  <h4 class="title" id="sec-container-metainf-manifest.xml"><a class="hidden-reveal" title="Link here"
                        href="#sec-container-metainf-manifest.xml">›</a> 3.4.6. Manifest – META-INF/manifest.xml (Optional)
                  </h4>
                  <p>An OPTIONAL file with the reserved name <code class="filename">manifest.xml</code>
                     within the <code class="filename">META-INF</code> directory at the root level of the
                     container may appear in a valid OCF Abstract Container. If present, the content
                     of this file MUST be as defined in the <a class="link" href="#refODFManifestSchema" title="ODF 1.0 Manifest Schema">ODF
                        1.0 manifest schema</a>.
                  </p>
                  <p>The <code class="filename">manifest.xml</code> file, if present, MUST NOT be
                     encrypted.
                  </p>
               </div>
            </div>
         </div>
         <div class="chapter" title="4. OCF Physical Container: The ZIP Container">
            <h2 class="title" id="physical-container-zip"><a class="hidden-reveal" title="Link here" href="#physical-container-zip">›</a> 4. OCF Physical Container:  The ZIP Container
            </h2>
            <div class="section" title="4.1. ZIP file requirements">
               <h3 class="title" id="sec-zip-container-zipreqs"><a class="hidden-reveal" title="Link here" href="#sec-zip-container-zipreqs">›</a> 4.1. ZIP file requirements
               </h3>
               <p>An OCF ZIP Container supports the ZIP format as specified by the application
                  note at <a class="xref" href="#refZIP" title="ZIP File Format Specification">[<abbr class="abbrev">ZIP APPNOTE</abbr>]</a>, but with the following constraints and
                  clarifications:
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist">
                     <li class="listitem">
                        <p>Conforming OCF ZIP Containers MUST NOT use the features in the ZIP
                           application note that allow ZIP files to be split across multiple
                           storage media. Conforming EPUB Reading Systems MUST treat any OCF files
                           that specify that the ZIP file is split across multiple storage media as
                           being in error.
                        </p>
                     </li>
                     <li class="listitem">
                        <p>Conforming OCF ZIP Containers MUST only include uncompressed files or
                           Deflate-compressed files within the ZIP archive. Conforming EPUB Reading
                           Systems MUST treat any OCF Containers that use compression techniques
                           other than Deflate as being in error. 
                        </p>
                     </li>
                     <li class="listitem">
                        <p>
                           Conforming OCF ZIP Containers MAY use the ZIP64 extensions defined as "Version 1" in section V, subsection G of
                           the application note at <a class="xref" href="#refZIP" title="ZIP File Format Specification">[<abbr class="abbrev">ZIP APPNOTE</abbr>]</a> and SHOULD
                           only use those extensions when the content requires them.  Conforming OCF
                           Processors MUST support the ZIP64 extensions defined as "Version 1".
                        </p>
                     </li>
                     <li class="listitem">
                        <p>Conforming OCF ZIP Containers MUST NOT use the encryption features
                           defined by the ZIP format; instead, encryption MUST be done using the
                           features described in <a class="xref" href="#sec-container-metainf-encryption.xml"
                              title="3.4.3. Encryption – META-INF/encryption.xml (Optional)">Section 3.4.3, “Encryption – META-INF/encryption.xml (Optional)”</a>. Conforming EPUB
                           Reading Systems MUST treat any other OCF ZIP Containers that use ZIP
                           encryption features as being in error.
                        </p>
                     </li>
                     <li class="listitem">
                        <p>It is not a requirement that Conforming OCF Processors preserve
                           information from an OCF ZIP Container through load and save operations
                           that do not map to corresponding representation within the OCF Abstract
                           Container; in particular, a Conforming OCF Processor does not have to
                           preserve CRC values, comment fields or fields that hold file system
                           information corresponding to a particular operating system (e.g.,
                           <code class="code">External file attributes</code> and <code class="code">Extra
                              field</code>).
                        </p>
                     </li>
                     <li class="listitem">
                        <p>Conforming OCF ZIP Containers MUST encode File System Names using
                           UTF-8 (<a class="xref" href="#refUnicode5"
                              title="The Unicode Consortium. The Unicode Standard, Version 5.0.0, defined by: The Unicode Standard, Version 5.0 (Boston, MA, Addison-Wesley, 2007. ISBN 0-321-48091-0)">[<abbr class="abbrev">Unicode</abbr>]</a>).
                        </p>
                     </li>
                  </ul>
               </div>
               <p>Here are some details about particular fields in the ZIP archive:</p>
               <div class="itemizedlist">
                  <ul class="itemizedlist">
                     <li class="listitem">
                        <p>In the local file header table, Conforming OCF ZIP Containers MUST set
                           the <code class="code">version needed to extract</code> fields to the values
                           <code class="code">10</code>, <code class="code">20</code> or <code class="code">45</code> in order to
                           match the maximum version level needed by the given file (e.g.,
                           <code class="code">20</code> if Deflate is needed, <code class="code">45</code> if ZIP64 is
                           needed). Conforming OCF Processors MUST treat any other values as being
                           in error.
                        </p>
                     </li>
                     <li class="listitem">
                        <p>In the local file header table, Conforming OCF ZIP Containers MUST set
                           the <code class="code">compression</code> method field to the values <code class="code">0</code>
                           or <code class="code">8</code>. Conforming OCF Processors MUST treat any other values
                           as being in error.
                        </p>
                     </li>
                     <li class="listitem">
                        <p>Conforming OCF Processors MUST treat OCF ZIP Containers with an
                           <code class="code">Archive decryption header</code> or an <code class="code">Archive extra
                              data record</code> as being in error.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section" title="4.2. OCF ZIP Container media type identification">
               <h3 class="title" id="sec-zip-container-mime"><a class="hidden-reveal" title="Link here" href="#sec-zip-container-mime">›</a> 4.2. OCF ZIP Container media type identification
               </h3>
               <p>It is frequently necessary for applications to determine the media type of a
                  file. This is usually accomplished by looking at the file extension of the file.
                  This gives applications a quick way to determine the type of the file without
                  looking inside the file. OCF ZIP Container files SHOULD use an extension
                  <code class="literal">.epub</code> to identify to processing applications that they
                  are OCF ZIP Containers.
               </p>
               <p>In order to translate a file extension into a media type, typically a
                  processing agent will register the relationship between file extension and media
                  type with the operating system. Applications that are interested in OCF ZIP
                  Container files SHOULD register the media type of
                  <code class="literal">application/epub+zip</code> as corresponding to the file
                  extension of <code class="filename">.epub</code>.
               </p>
               <p>Unfortunately, the identification of files through the use of file extensions
                  is notoriously unreliable. As a result, it is desirable to have a more robust
                  way of identifying files independent of their file names or extensions. One
                  mechanism that has evolved for doing this is to require the placement of
                  specific information at specific file offsets. A processing agent can then check
                  a fixed location to determine if the file is an OCF ZIP Container.
               </p>
               <p>The method that has evolved for doing this in ZIP archives is the inclusion of
                  an uncompressed, unencrypted file called <code class="filename">mimetype</code> as the
                  first file in the ZIP archive. The contents of this file are the media type of
                  the file. Therefore, the first file in the OCF ZIP Container MUST be a file by
                  the ASCII name of <code class="filename">mimetype</code> which holds the MIME type for
                  the ZIP Container (i.e., <code class="literal">application/epub+zip</code> as an ASCII
                  string; no leading padding, leading white-space, or case change). The file MUST
                  be neither compressed nor encrypted and there MUST NOT be an extra field in its
                  ZIP header. If this is done, then the ZIP Container offers convenient “magic
                  number” support as described in <a class="xref" href="#refRFC2048"
                     title="Multipurpose Internet Mail Extensions (MIME) Part Four: Registration Procedures (RFC 2048)">[<abbr class="abbrev">RFC2048</abbr>]</a> and the following
                  will hold true:
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist">
                     <li class="listitem">
                        <p>The bytes <code class="literal">PK</code> will be at the beginning of the
                           file
                        </p>
                     </li>
                     <li class="listitem">
                        <p>The bytes <code class="literal">mimetype</code> will be at position
                           <code class="code">30</code></p>
                     </li>
                     <li class="listitem">
                        <p>The actual MIME type (i.e., the ASCII string
                           <code class="literal">application/epub+zip</code>) will begin at position
                           <code class="code">38</code></p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
         <div class="chapter" title="5. Font obfuscation">
            <h2 class="title" id="font-obfuscation"><a class="hidden-reveal" title="Link here" href="#font-obfuscation">›</a> 5. Font obfuscation
            </h2>
            <div class="section" title="5.1. Introduction">
               <h3 class="title" id="fobfus-intro"><a class="hidden-reveal" title="Link here" href="#fobfus-intro">›</a> 5.1. Introduction
               </h3>
               <p>Since an OCF Zip Container is fundamentally a ZIP file, commonly available ZIP
                  tools can be used to extract any unencrypted content stream from the package. On
                  some systems, the contents of the ZIP file may appear like any other native
                  container (e.g. a folder). While the ability to do this is quite useful, it can pose
                  a problem for an author of the publication who wishes to include a third-party font.
                  Many commercial fonts allow embedding, but embedding a font implies making it an
                  integral part of the publication, not providing the original font file along with
                  the content. Since integrated ZIP support is so ubiquitous in modern operating
                  systems, simply placing the font in the ZIP archive is insufficient to signify that
                  the font is not intended to be reused in other contexts. This uncertainty can
                  undermine the otherwise very useful font embedding capability that OPF/OPS provides.
                  
               </p>
               <p>In order to discourage reuse of the font, some font vendors may allow use of
                  their fonts in EPUB publications if those fonts are bound in some way to the
                  publication. That is, if the font file can not be installed directly for use on an
                  operating system with the built-in tools of that computing device, and it can not be
                  directly used by other EPUB publications. It is beyond the scope of this document
                  to provide a digital rights management or enforcement system for font files. It will
                  instead propose a method of obfuscation that will require additional work on the
                  part of the final OCF recipient to gain general access to any included fonts. It is
                  the hope of the IDPF that this will meet the requirements of most font vendors.
                  However, no claim is made in this document or by the IDPF that this constitutes
                  encryption, nor does it guarantee that the font file will be secure from copyright
                  infringement. The proposed mechanism will simply provide a stumbling block for those
                  who are unaware of the license details of the supplied font. It will not prevent a
                  determined user from gaining full access to the font. Given the original OCF
                  Container, it is possible to apply the algorithms described in this document to
                  extract the raw font file. Whether this satisfies the requirements of individual
                  font licenses remains a question for the licensor and licensee. 
               </p>
            </div>
            <div class="section" title="5.2. Obfuscation algorithm">
               <h3 class="title" id="fobfus-algorithm"><a class="hidden-reveal" title="Link here" href="#fobfus-algorithm">›</a> 5.2. Obfuscation algorithm
               </h3>
               <p>The algorithm employed to obfuscate the font file consists of modifying the first
                  1040 bytes (~1KB) of the font file. In the unlikely event that the file is less than
                  1040 bytes, then the entire file will be modified. The key for the algorithm must be
                  a 20 byte (160 bit) <a class="xref" href="#refSHA1"
                     title="Federal Information Processing Standards Publication 180-3: Secure Hash Standard (SHS)">[<abbr class="abbrev">SHA-1</abbr>]</a> digest of the publication's unique identifier. Details
                  on generating this key are given in the section <a class="xref" href="#fobfus-keygen" title="5.3. Generating the obfuscation key">Section 5.3, “Generating the obfuscation key”</a>. To
                  obfuscate the original data, the result of performing a logical exclusive or (XOR)
                  on the first byte of the raw file and the first byte of the key is stored as the
                  first byte of the embedded font file. This process is repeated with the next byte of
                  source and key, until all bytes in the key have been used. At this point, the
                  process continues starting with the first byte of the key and 21st byte of the
                  source. Once 1040 bytes have been encoded in this way (or the end of the source is
                  reached), any remaining data in the source is directly copied to the destination. In
                  pseudo-code, this is the algorithm: 
               </p><pre class="programlisting">
                set source to font file
                set destination to obfuscated file
                set keyData to key for font
                set outer to 0
                while outer &lt; 52 and not (source at EOF)
                    set inner to 0
                    while inner &lt; 20 and not (source at EOF)
                        read 1 byte from source     //Assumes read advances file position
                        set sourceByte to result of read
                        set keyByte to byte inner of keyData
                        set obfuscatedByte to (sourceByte XOR keyByte)
                        write obfuscatedByte to destination
                        increment inner
                    end while
                    increment outer
                end while
                if not (source at EOF) then
                    read source to EOF
                    write result of read to destination
                end if 
            </pre><p>To get the original font data back, the process is simply reversed. That is, the
                  source file becomes the obfuscated data and the destination file will contain the
                  raw font data.
               </p>
            </div>
            <div class="section" title="5.3. Generating the obfuscation key">
               <h3 class="title" id="fobfus-keygen"><a class="hidden-reveal" title="Link here" href="#fobfus-keygen">›</a> 5.3. Generating the obfuscation key
               </h3>
               <p>To tie a font to a particular EPUB publication, it is necessary to bind to a unique
                  property of that publication. Such a value is required by the EPUB Publications 3.0 specification,
                  as detailed in its section 4.3.2.5 "Publication Identifiers". Every compliant OPF file has a
                  <code class="code">dc:identifier</code> element which uniquely identifies the
                  publication. The OPF 3.0 specification details finding this element by examining the
                  <code class="code">unique-identifier</code> attribute of the package file's
                  <code class="code">package</code> element. This element provides the required
                  characteristic of being unique to a publication, however it is not suitable for use
                  directly as the obfuscation key (for instance, its length is not defined).
               </p>
               <p>In order to create a suitable key that is tied to the publication, an <a class="xref" href="#refSHA1"
                     title="Federal Information Processing Standards Publication 180-3: Secure Hash Standard (SHS)">[<abbr class="abbrev">SHA-1</abbr>]</a> digest
                  of the unique identifier should be generated as specified by the Secure Hash
                  Standard. Before generating the digest, all whitespace characters as defined by
                  the XML 1.0 specification (<a class="xref" href="#refXML"
                     title="Extensible Markup Language (XML) 1.0 (Fifth Edition)">[<abbr class="abbrev">XML</abbr>]</a>), section 2.3 are removed. Specifically the Unicode code
                  points <code class="code">0x20</code>, <code class="code">0x09</code>, <code class="code">0x0D</code> and <code class="code">0x0A</code> will be stripped from the string before the digest
                  is computed. This digest is then directly used as the key for the algorithm
                  described in <a class="xref" href="#fobfus-algorithm" title="5.2. Obfuscation algorithm">Section 5.2, “Obfuscation algorithm”</a>.
               </p>
            </div>
            <div class="section" title="5.4. Specifying obfuscated resources">
               <h3 class="title" id="fobfus-specifying"><a class="hidden-reveal" title="Link here" href="#fobfus-specifying">›</a> 5.4. Specifying obfuscated resources
               </h3>
               <p>All encrypted data in an OCF Abstract Container MUST have an entry in the <code class="filename">encryption.xml</code> file
                  accompanying the publication (see <a class="xref" href="#sec-container-metainf-encryption.xml"
                     title="3.4.3. Encryption – META-INF/encryption.xml (Optional)">Section 3.4.3, “Encryption – META-INF/encryption.xml (Optional)”</a>. This includes fonts obfuscated
                  using the method described here. For such obfuscated fonts, in the <code class="filename">encryption.xml</code>
                  file, the <code class="code">EncryptionMethod</code> element child of the <code class="code">EncryptedData</code> MUST have an <code class="code">Algorithm</code>
                  attribute with the value <code class="code">"http://www.idpf.org/2008/embedding"</code>. The presence of this
                  attribute signals the use of the algorithm described in this specification. All
                  resources that have been obfuscated using this approach must be listed in the
                  <code class="code">CipherData</code> element.
               </p>
               <div class="informalexample">
                  <p>An example <code class="filename">encryption.xml</code> file might look like this:
                  </p><pre class="synopsis">
&lt;encryption &#xD;
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container" &#xD;
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#"&gt;&#xD;
    &lt;enc:EncryptedData&gt; &#xD;
        &lt;enc:EncryptionMethod Algorithm="http://www.idpf.org/2008/embedding"/&gt; &#xD;
        &lt;enc:CipherData&gt; &#xD;
            &lt;enc:CipherReference URI="OEBPS/Fonts/BKANT.TTF"/&gt;  &#xD;
        &lt;/enc:CipherData&gt; &#xD;
    &lt;/enc:EncryptedData&gt;  &#xD;
&lt;/encryption&gt; &#xD;

                </pre></div>
               <p>To prevent trivial copying of the embedded font to other publications, the
                  explicit key MUST NOT be provided in the <code class="filename">encryption.xml</code> file. Reading systems that
                  implement this specification must derive the key from the package's unique
                  identifier.
               </p>
            </div>
         </div>
         <div class="appendix" title="Appendix A. RELAX NG OCF Schema">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" id="rng-ocf-schema"><a class="hidden-reveal" title="Link here" href="#rng-ocf-schema">›</a> Appendix A. RELAX NG OCF Schema
                     </h2>
                  </div>
               </div>
            </div>
            <p><span class="todo">TODO <a class="link" href="http://code.google.com/p/epub-revision/issues/detail?id=4">Issue
                     4</a></span></p>
            <p><span class="todo">TODO establish and link to canonical standalone URI of
                  schema</span></p><pre class="synopsis">
        </pre></div>
         <div class="appendix" title="Appendix B. Example">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" id="example"><a class="hidden-reveal" title="Link here" href="#example">›</a> Appendix B. Example
                     </h2>
                  </div>
               </div>
            </div>
            <p>The following example demonstrates the use of this OCF format to contain a signed and
               encrypted EPUB publication with an alternate PDF rendition within a ZIP
               Container.
            </p>
            <div class="example" id="example-files"><a class="hidden-reveal" title="Link here" href="#example-files">›</a> 
               <p class="title">Example B.1. Ordered list of files in the ZIP Container</p>
               <div class="example-contents"><pre class="synopsis">
mimetype
META-INF/container.xml
META-INF/signatures.xml
META-INF/encryption.xml
OEBPS/As You Like It.opf
OEBPS/book.html
OEBPS/images/cover.png
PDF/As You Like It.pdf
            </pre></div>
            </div><br class="example-break" /><div class="example" id="example-mimetype"><a class="hidden-reveal" title="Link here" href="#example-mimetype">›</a> 
               <p class="title">Example B.2. The contents of the <code class="filename">mimetype</code> file
               </p>
               <div class="example-contents"><pre class="synopsis">
application/epub+zip
            </pre></div>
            </div><br class="example-break" /><div class="example" id="example-container"><a class="hidden-reveal" title="Link here" href="#example-container">›</a> 
               <p class="title">Example B.3. The contents of the <code class="filename">META-INF/container.xml</code> file
               </p>
               <div class="example-contents"><pre class="synopsis">
&lt;?xml version="1.0"?&gt;
&lt;container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path="OEBPS/As You Like It.opf"
            media-type="application/oebps-package+xml" /&gt;
        &lt;rootfile full-path="OEBPS/As You Like It.pdf"
            media-type="application/pdf" /&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;
            </pre></div>
            </div><br class="example-break" /><div class="example" id="example-signatures"><a class="hidden-reveal" title="Link here" href="#example-signatures">›</a> 
               <p class="title">Example B.4. The contents of the <code class="filename">META-INF/signatures.xml</code> file
               </p>
               <div class="example-contents"><pre class="synopsis">
&lt;?xml version="1.0"?&gt;
&lt;signatures xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;Signature Id="AsYouLikeItSignature" xmlns="http://www.w3.org/2000/09/xmldsig#"&gt;

        &lt;!-- SignedInfo is the information that is actually signed. In this case --&gt;
        &lt;!-- the SHA1 algorithm is used to sign the canonical form of the XML    --&gt;
        &lt;!-- documents enumerated in the Object element below                    --&gt;
        &lt;SignedInfo&gt;
            &lt;CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
            &lt;SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"/&gt;
            &lt;Reference URI="#AsYouLikeIt"&gt;
                &lt;DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/&gt;
                &lt;DigestValue&gt;j6lwx3rvEPO0vKtMup4NbeVu8nk=&lt;/DigestValue&gt;
            &lt;/Reference&gt;
        &lt;/SignedInfo&gt;

        &lt;!-- The signed value of the digest above using the DSA algorithm --&gt;
        &lt;SignatureValue&gt;MC0CFFrVLtRlk=...&lt;/SignatureValue&gt;

        &lt;!-- The key to use to validate the signature --&gt;
        &lt;KeyInfo&gt;
            &lt;KeyValue&gt;
                &lt;DSAKeyValue&gt;
                    &lt;P&gt;...&lt;/P&gt;
                    &lt;Q&gt;...&lt;/Q&gt;
                    &lt;G&gt;...&lt;/G&gt;
                    &lt;Y&gt;...&lt;/Y&gt;
                &lt;/DSAKeyValue&gt;
            &lt;/KeyValue&gt;
        &lt;/KeyInfo&gt;

        &lt;!-- The list documents to sign. Note that the canonical form of XML   --&gt;
        &lt;!-- documents is signed while the binary form of the other documents --&gt;
        &lt;!-- is used --&gt;
        &lt;Object&gt;
            &lt;Manifest Id="AsYouLikeIt"&gt;
                &lt;Reference URI="OEBPS/As You Like It.opf"&gt;
                    &lt;Transforms&gt;
                        &lt;Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
                    &lt;/Transforms&gt;
                &lt;/Reference&gt;
                &lt;Reference URI="OEBPS/book.html"&gt;
                    &lt;Transforms&gt;
                        &lt;Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/&gt;
                    &lt;/Transforms&gt;
                &lt;/Reference&gt;
                &lt;Reference URI="OEBPS/images/cover.png"/&gt;
                &lt;Reference URI="PDF/As You Like It.pdf"/&gt;
            &lt;/Manifest&gt;
        &lt;/Object&gt;

    &lt;/Signature&gt;
&lt;/signatures&gt;

            </pre></div>
            </div><br class="example-break" /><div class="example" id="example-encryption"><a class="hidden-reveal" title="Link here" href="#example-encryption">›</a> 
               <p class="title">Example B.5. The contents of the <code class="filename">META-INF/encryption.xml</code> file
               </p>
               <div class="example-contents"><pre class="synopsis">
&lt;?xml version="1.0"?&gt;
&lt;encryption xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
    xmlns:enc="http://www.w3.org/2001/04/xmlenc#" xmlns:ds="http://www.w3.org/2000/09/xmldsig#"&gt;

    &lt;!-- The RSA encrypted AES-128 symmetric key used to encrypt the data --&gt;
    &lt;enc:EncryptedKey Id="EK"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:KeyName&gt;John Smith&lt;/ds:KeyName&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherValue&gt;xyzabc...&lt;/enc:CipherValue&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedKey&gt;

    &lt;!-- Each EncryptedData block identifies a single document that has been    --&gt;
    &lt;!-- encrypted using the AES-128 algorithm. The data remains stored in it’s --&gt;
    &lt;!-- encrypted form in the original file within the container.              --&gt;
    &lt;enc:EncryptedData Id="ED1"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:RetrievalMethod URI="#EK" Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherReference URI="OEBPS/book.html"/&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedData&gt;

    &lt;enc:EncryptedData Id="ED2"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/&gt;
        &lt;ds:KeyInfo&gt;
            &lt;ds:RetrievalMethod URI="#EK" Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/&gt;
        &lt;/ds:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherReference URI="OEBPS/images/cover.png"/&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedData&gt;

    &lt;enc:EncryptedData Id="ED3"&gt;
        &lt;enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#kw-aes128"/&gt;
        &lt;enc:KeyInfo&gt;
            &lt;enc:RetrievalMethod URI="#EK" Type="http://www.w3.org/2001/04/xmlenc#EncryptedKey"/&gt;
        &lt;/enc:KeyInfo&gt;
        &lt;enc:CipherData&gt;
            &lt;enc:CipherReference URI="PDF/As You Like It.pdf"/&gt;
        &lt;/enc:CipherData&gt;
    &lt;/enc:EncryptedData&gt;

&lt;/encryption&gt;

            </pre></div>
            </div><br class="example-break" /><div class="example" id="example-opf"><a class="hidden-reveal" title="Link here" href="#example-opf">›</a> 
               <p class="title">Example B.6. The contents of the <code class="filename">OEBPS/As You Like It.opf</code> file
               </p>
               <div class="example-contents"><pre class="synopsis">
&lt;?xml version="1.0"?&gt;
&lt;package version="2.0" xmlns="http://www.idpf.org/2007/opf" unique-identifier="Package-ID"&gt;
    &lt;metadata xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:opf="http://www.idpf.org/2007/opf"&gt;
        &lt;dc:identifier id="Package-ID"&gt;ebook:guid-6B2DF0030656ED9D8&lt;/dc:identifier&gt;
        &lt;dc:title&gt;As You Like It&lt;/dc:title&gt;
        &lt;dc:creator opf:role="aut"&gt;William Shakespeare&lt;/dc:creator&gt;
        &lt;dc:identifier&gt;0-7410-1455-6&lt;/dc:identifier&gt;
        &lt;dc:subject/&gt;
        &lt;dc:type/&gt;
        &lt;dc:date opf:event="publication"&gt;3/24/2000&lt;/dc:date&gt;
        &lt;dc:date opf:event="copyright"&gt;1/1/9999&lt;/dc:date&gt;
        &lt;dc:identifier opf:scheme="ISBN"&gt;0-7410-1455-6&lt;/dc:identifier&gt;
        &lt;dc:publisher&gt;Project Gutenberg&lt;/dc:publisher&gt;
        &lt;dc:language&gt;en&lt;/dc:language&gt;

    &lt;/metadata&gt;
    &lt;manifest&gt;
        &lt;item id="4915" href="book.html" media-type="application/xhtml+xml"/&gt;
        &lt;item id="7184" href="images/cover.png" media-type="image/png"/&gt;
        &lt;item id="ncx" href="toc.ncx" media-type="application/x-dtbncx+xml"/&gt;
    &lt;/manifest&gt;
    &lt;spine toc="ncx"&gt;
        &lt;itemref idref="4915"/&gt;
    &lt;/spine&gt;
&lt;/package&gt;

            </pre></div>
            </div><br class="example-break" /><span class="todo">TODO add the rest of the examples from 2.0.1? They dont add any
               contextually relevant information.</span></div>
         <div class="acknowledgements" title="Appendix C. Contributors">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" id="acknowledgements"><a class="hidden-reveal" title="Link here" href="#acknowledgements">›</a> Appendix C. Contributors
                     </h2>
                  </div>
               </div>
            </div>
            <p class="informative"> This appendix is informative</p>
            <div class="section" title="C.1. Acknowledgements and Contributors">
               <h3 class="title" id="sec-contributors"><a class="hidden-reveal" title="Link here" href="#sec-contributors">›</a> C.1. Acknowledgements and Contributors
               </h3>
               <p>EPUB has been developed by the International Digital Publishing Forum in a cooperative
                  effort, bringing together publishers, vendors, software developers, and experts in the
                  relevant standards.
               </p>
               <p>The EPUB3 specifications were prepared by the International Digital Publishing Forum’s
                  EPUB Maintenance Working Group, operating under a charter approved by the membership in May,
                  201 under the leadership of:
               </p>
               <table border="0" summary="Simple list" class="simplelist">
                  <tr>
                     <td><span class="personname">Markus Gylling</span>
                        <span class="orgname">DAISY Consortium</span>
                        <span class="jobtitle">Chair</span></td>
                  </tr>
                  <tr>
                     <td><span class="personname">Garth Conboy</span>
                        <span class="orgname">eBook Technologies</span>
                        <span class="jobtitle">Vice-chair</span></td>
                  </tr>
                  <tr>
                     <td><span class="personname">Brady Duga</span>
                        <span class="orgname">eBook Technologies</span>
                        <span class="jobtitle">Vice-chair</span></td>
                  </tr>
                  <tr>
                     <td><span class="personname">Bill McCoy</span>
                        <span class="orgname">WebPaper</span>
                        <span class="jobtitle">Secretary</span></td>
                  </tr>
               </table>
               <p> Active members of the working group included: </p>
               <p>Alexis Wiles, Alicia Wise, ... <span class="todo">TODO : COMPLETE LIST OF CURRENT WG
                     MEMBERS</span><em><span class="remark"></span></em>
                  
               </p>
               <p>For more detailed acknowledgements and information about contributors to each version of EPUB, please refer to <a class="link" href="#refEPUB3Overview" title="EPUB3 OverviewTODO fix link">Appendix A</a> of the <a class="link" href="#refEPUB3Overview" title="EPUB3 OverviewTODO fix link">EPUB3 Overview</a> 
               </p>
            </div>
         </div>
         <div class="bibliography" title="References">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" id="references"><a class="hidden-reveal" title="Link here" href="#references">›</a> References
                     </h2>
                  </div>
               </div>
            </div>
            <div class="bibliodiv" title="Normative References">
               <h3 class="title" id="d22303e1228">Normative References</h3>
               <div class="biblioentry" title="EPUB3 OverviewTODO fix link" id="refEPUB3Overview">
                  <p>[<abbr class="abbrev">EPUB3Overview</abbr>] <span class="title"><a class="link" href="http://www.idpf.org/doc_library/epub/OPF_3.0_draft.htm">EPUB3
                           Overview</a><span class="todo">TODO fix link</span>. </span></p>
               </div>
               <div class="biblioentry"
                    title="Current version of spec is 1.1; update?ODF Open Document Format"
                    id="refODF">
                  <p>[<abbr class="abbrev">ODF</abbr>] <span class="title"><span class="todo">Current version of spec is 1.1; update?</span><a class="link"
                           href="http://www.oasis-open.org/committees/download.php/12572/OpenDocument-v1.0-os.pdf">ODF Open Document Format</a>. </span></p>
               </div>
               <div class="biblioentry" title="ODF 1.0 Manifest Schema" id="refODFManifestSchema">
                  <p>[<abbr class="abbrev">ODF10 Manifest Schema</abbr>] <span class="title"><a class="link"
                           href="http://www.oasis-open.org/committees/download.php/12570/OpenDocument-manifest-schema-v1.0-os.rng">ODF 1.0 Manifest Schema</a>. </span></p>
               </div>
               <div class="biblioentry"
                    title="Multipurpose Internet Mail Extensions (MIME) Part Four: Registration Procedures (RFC 2048)"
                    id="refRFC2048">
                  <p>[<abbr class="abbrev">RFC2048</abbr>] <span class="title"><a class="link" href="http://www.ietf.org/rfc/rfc2048.txt">Multipurpose Internet Mail
                           Extensions (MIME) Part Four: Registration Procedures </a> (RFC 2048). </span><span class="author">Freed, et al. </span><span class="date">November 1996. </span></p>
               </div>
               <div class="biblioentry"
                    title="Key words for use in RFCs to Indicate Requirement Levels (RFC 2119)"
                    id="refRFC2119">
                  <p>[<abbr class="abbrev">RFC2119</abbr>] <span class="title">
                        <a class="link" href="http://www.ietf.org/rfc/rfc2119.txt">Key words for use in RFCs to
                           Indicate Requirement Levels</a> (RFC 2119) . </span><span class="date">March 1997. </span></p>
               </div>
               <div class="biblioentry"
                    title="Uniform Resource Identifier (URI): Generic Syntax (RFC 3986)"
                    id="refRFC3986">
                  <p>[<abbr class="abbrev">RFC3986</abbr>] <span class="title">
                        <a class="link" href="http://www.ietf.org/rfc/rfc3986.txt">Uniform Resource Identifier
                           (URI): Generic Syntax</a> (RFC 3986) . </span><span class="author">Berners-Lee, et al. </span><span class="date">January 2005. </span></p>
               </div>
               <div class="biblioentry"
                    title="Internationalized Resource Identifiers (IRIs) (RFC 3987)"
                    id="refRFC3987">
                  <p>[<abbr class="abbrev">RFC3987</abbr>] <span class="title">
                        <a class="link" href="http://www.ietf.org/rfc/rfc3987.txt">Internationalized Resource
                           Identifiers (IRIs)</a> (RFC 3987) . </span><span class="author">M Duerst, et al. </span><span class="date">January 2005. </span></p>
               </div>
               <div class="biblioentry"
                    title="Federal Information Processing Standards Publication 180-3: Secure Hash Standard (SHS)"
                    id="refSHA1">
                  <p>[<abbr class="abbrev">SHA-1</abbr>] <span class="title">
                        <a class="link"
                           href="http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf">Federal Information Processing Standards Publication 180-3:  Secure Hash Standard (SHS)</a>
                        . </span><span class="date">October 2008. </span></p>
               </div>
               <div class="biblioentry"
                    title="The Unicode Consortium. The Unicode Standard, Version 5.0.0, defined by: The Unicode Standard, Version 5.0 (Boston, MA, Addison-Wesley, 2007. ISBN 0-321-48091-0)"
                    id="refUnicode5">
                  <p>[<abbr class="abbrev">Unicode</abbr>] <span class="title">The Unicode Consortium. The Unicode Standard, Version 5.0.0, defined by: The
                        Unicode Standard, Version 5.0 (Boston, MA, Addison-Wesley, 2007. ISBN
                        0-321-48091-0). </span></p>
               </div>
               <div class="biblioentry"
                    title="Extensible Markup Language (XML) 1.0 (Fifth Edition)"
                    id="refXML">
                  <p>[<abbr class="abbrev">XML</abbr>] <span class="title">
                        <a class="link" href="http://www.w3.org/TR/2008/REC-xml-20081126/">Extensible Markup
                           Language (XML) 1.0 (Fifth Edition)</a>
                        . </span><span class="author">T. Bray, et al. </span><span class="date">26 November 2008. </span></p>
               </div>
               <div class="biblioentry"
                    title="1.1 going to CR soon. Update reference as necessary XML-Signature Syntax and Processing (Second Edition)"
                    id="refXMLDSIGCORE">
                  <p>[<abbr class="abbrev">XML DSIG Core</abbr>] <span class="title">
                        <span class="todo">1.1 going to CR soon. Update reference as necessary</span>
                        <a class="link" href="http://www.w3.org/TR/2008/REC-xmldsig-core-20080610/">XML-Signature Syntax and Processing (Second Edition)</a>
                        . </span><span class="author">M. Bartel, et al. </span><span class="date">10 June 2008. </span></p>
               </div>
               <div class="biblioentry"
                    title="1.1 due to go to CR very soon; update reference as needed XML Encryption Syntax and Processing"
                    id="refXMLENCCORE">
                  <p>[<abbr class="abbrev">XML ENC Core</abbr>] <span class="title">
                        <span class="todo">1.1 due to go to CR very soon; update reference as
                           needed</span>
                        <a class="link" href="http://www.w3.org/TR/2002/REC-xmlenc-core-20021210">XML Encryption
                           Syntax and Processing</a>
                        . </span><span class="author">D. Eastlake, et al. </span><span class="date">10 December 2002. </span></p>
               </div>
            </div>
            <div class="bibliodiv" title="Informative References">
               <h3 class="title" id="d22303e1362">Informative References</h3><span class="todo">Do we need to reference font mangling here?</span><div class="biblioentry" title="ZIP File Format Specification" id="refZIP">
                  <p>[<abbr class="abbrev">ZIP APPNOTE</abbr>] <span class="title">
                        <a class="link" href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT">ZIP File
                           Format Specification</a>
                        . </span><span class="date">September 28, 2007. </span><span class="orgname">PKWARE, Inc.. </span></p>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>