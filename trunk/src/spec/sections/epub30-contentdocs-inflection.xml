<section xml:id="sec-xhtml-semantic-inflection" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:epub="http://www.idpf.org/2011/epub" xmlns:xi="http://www.w3.org/2001/XInclude"
    version="5.1">
    
        <title>Semantic Inflection</title>
        
        <section xml:id="sec-xhtml-semantic-inflection-intro">
            <title>Introduction</title>
            <para>Semantic inflection is the process of attaching additional meaning
                about the specific purpose and/or nature that an element plays in an
                <xref linkend="gloss-content-document-epub-xhtml"/>. Semantic
                metadata is not intended for human consumption, however. It instead
                provides a controlled but discoverable way for Reading Systems and other
                User Agents to learn more about the structure and content of a document,
                providing them the opportunity to enhance the reading experience for
                users. </para>
            
            <para>A typical case for semantic inflection is on sectioning elements.
                Although these elements effectively partition a document into its
                logical structure on their own, they provide no indication of the role
                any given section plays in a document. To discover if a document is
                composed of chapters or sections, only the title would be available,
                which often contains no hint. Using semantic inflection, each
                <code>section</code> could be identifier as a part, section,
                chapter, etc. enabling, for example, an accessible Reading System to
                announce the current navigation level without resorting to nesting. </para>
            
            <para>This specification defines two methods for attaching semantic
                information to content:</para>
            
            <itemizedlist>
                <listitem>
                    <para>the <code>epub:type</code> attribute (defined in <xref
                        linkend="attrdef-epub-type"/>); and</para>
                </listitem>
                <listitem>
                    <para>the W3C HTML5 <code>rel</code> attribute <xref
                        linkend="refHTML5"/>.</para>
                </listitem>
            </itemizedlist>
            
            <para>Each of these attributes serves a different purpose annotating
                content. The <code>epub:type</code> attribute is the more traditional
                attribute, annotating the element it is attached to. The
                <code>rel</code> attribute identifies the relationship another
                element or resource has to the attached element or to the <xref
                    linkend="gloss-content-document-epub"/> (for example, it could
                indicate that a resource identified in the element's <code>href</code>
                attribute contains the licensing information).</para>
            
            <para>Unlike the W3C HTML5 <code>class</code> attribute, for example, which
                provides only loose associations, these semantic attributes use terms
                and properties from RDFa vocabularies as their values. RDFa vocabularies
                define the meaning of each property and may provide other useful
                metadata to Reading Systems. More importantly, they provide a measure of
                control and predictability over the semantic inflections that can be
                made, so even Reading Systems that aren't fully RDFa aware can predict
                the values they will encounter when a vocabulary they recognize is
                used.</para>
            
            <para>This specification uses a subset of the vocabulary association
                mechanism defined in RDFa 1.1 Core <xref linkend="refRDFa11Core"/>. For
                more information, refer to <remark role="todo">TODO: where is this
                    defined specific to content docs?</remark>.</para>
        </section>
        
        <section xml:id="sec-xhtml-content-type-attribute">
            <title>The <code>epub:type</code> Attribute</title>
            
            <para>The <code>epub:type</code> attribute is intended to be functionally
                equivalent to the W3C Role Attribute <xref linkend="refPFRoleAttribute"
                />, but with restrictions as specified in <xref
                    linkend="sec-contentdocs-vocab-association"/>. </para>
            
            <para>
                <remark role="todo">NOTE: pending finalization of discussions with the
                    W3C, the epub:type attribute may be replaced by a reference to the
                    <link xlink:href="http://www.w3.org/WAI/PF/role-attribute/">PF
                        Role Attribute</link>, although the restrictions below would be
                    retained.</remark>
            </para>
            
            <variablelist xreflabel="epub:type" role="elem-synopsis"
                xml:id="attrdef-epub-type">
                <varlistentry>
                    <term>Attribute Name</term>
                    <listitem>
                        <para><literal>type</literal></para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Attribute Namespace</term>
                    <listitem>
                        <para><literal>http://www.idpf.org/2011/epub</literal></para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Usage</term>
                    <listitem>
                        <para>Common, may be specified on all elements.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Value</term>
                    <listitem>
                        <para>CURIEs <xref linkend="refRDFa11Core"/> with restrictions
                            given below</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        
        <section xml:id="sec-xhtml-rel-attribute">
            <title>The <code>rel</code> Attribute</title>
            <para/>
        </section>
        
        <section xml:id="sec-contentdocs-vocab-association">
            <title>Vocabulary Association</title>
            <para>The following restrictions apply to the prefix mapping mechanisms of
                <code>epub:type</code> and <code>rel</code> as compared to their
                definitions in <xref linkend="refPFRoleAttribute"/> and <xref
                    linkend="refRDFa11Core"/> respectively:</para>
            <itemizedlist>
                <listitem>
                    <para>The use of <code>xmlns</code> to establish prefix mappings is
                        not allowed; the <code>profile</code> and <code>prefix</code>
                        attributes <xref linkend="refRDFa11Core"/> must be used
                        instead</para>
                </listitem>
                <listitem>
                    <para>The <code>profile</code> and <code>prefix</code> attributes
                        are only allowed on the document root element</para>
                </listitem>
                <listitem>
                    <para>The <code>profile</code> attribute has the fixed value of
                        <literal>http://www.idpf.org/epub/30/profile/content/</literal></para>
                </listitem>
                <listitem>
                    <para>Prefix mappings established in the profile defined above must
                        not be overriden locally in document instances</para>
                </listitem>
                <listitem>
                    <para>The <code>epub:type</code> attribute value must conform to the
                        <code>CURIEs</code> datatype. <xref linkend="refRDFa11Core"
                        /></para>
                </listitem>
            </itemizedlist>
            <para>Given the restrictions above, all EPUB3 Publications will have the
                following properties in common:</para>
            <itemizedlist>
                <listitem>
                    <para>All EPUB3 Publications (via the fixed URI in the
                        <code>profile</code> attribute on the document root element)
                        refer to the same profile document</para>
                </listitem>
                <listitem>
                    <para>The profile document defines a default vocabulary (i.e. the
                        vocabulary whose properties are referred to without a prefix),
                        which is the vocabulary located at
                        <literal>http://www.idpf.org/TODO/vocab/structure/</literal>.
                        The default vocabulary is fixed, and must not be overridden in
                        instances. </para>
                </listitem>
                <listitem>
                    <para>The profile document associates the prefix <code>xhv</code> to
                        the XHTML Vocabulary <xref linkend="refXHTMLVocab"/>. This
                        prefix mapping is fixed, and must not be overridden in instances
                        <remark role="todo">TODO revisit if we add pim
                            etc</remark></para>
                </listitem>
                <listitem>
                    <para>The establishment of prefix mappings additional to those in
                        the profile document is done exclusively using the root element
                        <code>prefix</code> attribute</para>
                </listitem>
            </itemizedlist>
        </section>
        
        <section xml:id="sec-contentdocs-semantic-inflection-processing-reqs">
            <title>The <code>epub:type</code> and <code>rel</code> Attributes:
                Processing Requirements</title>
            <para>Reading Systems must process the <code>epub:type</code> and
                <code>rel</code> attributes as follows:</para>
            <itemizedlist>
                <listitem>
                    <para>A Reading System may associate specialized behaviors with
                        none, some or all of the properties given in the default
                        vocabulary.</para>
                </listitem>
                <listitem>
                    <para>A Reading System may associate specialized behaviors with
                        properties given in vocabularies other than the default
                        one.</para>
                </listitem>
                <listitem>
                    <para>A Reading System may support the dereferencing of unrecognized
                        CURIEs occurring in the <code>epub:type</code> and
                        <code>rel</code> attributes. If a Reading System
                        successfully dereferences an unrecognized CURIE, it may
                        (depending on the information available in the referenced
                        vocabulary property) employ adaptive behaviors in response to
                        the change to the document structural semantics that results
                        from the CURIE dereferencing.</para>
                </listitem>
                <listitem>
                    <para>If the attempt to dereference an unrecognized CURIE fails, or
                        if the dereferencing of unrecognized CURIEs is not supported,
                        then the Reading System must ignore the given unrecognized CURIE
                        and continue processing the <code>epub:type</code> or
                        <code>rel</code> attribute.</para>
                </listitem>
                <listitem>
                    <para>When Reading System behavior associated with a given CURIE
                        conflicts with behavior associated with the carrying XHTML
                        element, then the behavior associated with the element must take
                        precedence.</para>
                </listitem>
            </itemizedlist>
        </section>
        
        <section xml:id="examples-semantic-inflection">
            <title>Semantic Inflection: Examples</title>
            <informalexample>
                <para>The following example shows the <code>rel</code> and
                    <code>epub:type</code> attributes used to inflect footnote and
                    note reference semantics. The property used is defined in the
                    default vocabulary. </para>
                <synopsis>
<xi:include href="../examples/contentdocs/epub-type-1.xml" parse="text"/></synopsis>
            </informalexample>
        </section>
    
</section>
