<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="../../util/docbook/schema/docbookspec.rng" type="xml"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbookspec.sch"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbook.sch"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1"
    xmlns:epub="http://www.idpf.org/2011/epub">
    <title>EPUB Publications 3.0</title>

    <info>
        <releaseinfo>Working Group Draft</releaseinfo>
        <pubdate>31 January 2011</pubdate>
        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Latest version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Diffs to previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
        </printhistory>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup role="current">
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>DAISY Consortium</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>WebPaper LLC</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Matt Garrish</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
        </authorgroup>
        <authorgroup role="previous">
            <editor>
                <personname>Garth Conboy</personname>
                <affiliation>
                    <org>
                        <orgname>eBook Technologies</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname><remark role="todo">TODO complete previous editors
                    list</remark></personname>
            </editor>
        </authorgroup>
        <abstract>
            <title>EPUB Publications 3.0</title>
            <para>EPUB is an interchange and delivery format for digital publications based on XML
                and Web Standards. EPUB 3, the third major revision of EPUB, is defined by <link
                    linkend="refEPUB3Overview">a set of specification documents</link> including
                this document, which defines publication-level semantics and conformance
                requirements for EPUB 3.</para>
        </abstract>

        <!-- metadata for building package vocab from embedded defs -->
        <annotation xml:id="rdfa-package-vocab-meta" xmlns:dc="http://purl.org/dc/elements/1.1/"
            xmlns:z="http://www.daisy.org/ns/rdf/" xmlns:db="http://docbook.org/ns/docbook">
            <dc:creator>mgylling</dc:creator>
            <dc:issued>2011-01-03</dc:issued>
            <dc:publisher>International Digital Publishing Forum (IDPF)</dc:publisher>
            <dc:title>EPUB 3 Package Metadata Vocabulary</dc:title>
            <dc:description>This vocabulary, a part of EPUB® 3.0, defines a set of metadata
                properties for use in <db:link
                    xlink:href="../../spec/epub30-publications.html#sec-package-documents">Package
                    Documents</db:link>.</dc:description>
            <z:bag-order>package, ancillary, manifest, metarec, spine</z:bag-order>
        </annotation>
    </info>

    <chapter xml:id="sec-overview">
        <title>Overview</title>

        <section xml:id="sec-overview-purpose-and-scope">
            <title>Purpose and Scope</title>

            <para>This specification, EPUB Publications 3.0, defines publication-level semantics and
                conformance requirements for EPUB®
                3<!--, the third major revision of EPUB, an interchange
                and delivery format based on XML and Web Standards-->.</para>

            <xi:include href="./share/specdesc-prepara.xml"/>
            <itemizedlist xml:id="epub-specs-listing">
                <xi:include href="./share/specdesc-overview.xml"/>
                <xi:include href="./share/specdesc-contentdocs.xml"/>
                <xi:include href="./share/specdesc-ocf.xml"/>
                <xi:include href="./share/specdesc-overlays.xml"/>
            </itemizedlist>

            <para>This specification supersedes Open Package Format 2.0.1 <xref linkend="refOPF2"/>.
                Refer to <xref linkend="refEPUB3Changes"/> for information on differences between
                this specification and its predecessor.</para>

        </section>

        <section xml:id="sec-terminology">
            <title>Terminology</title>
            <xi:include href="./share/terminology.xml"/>
        </section>

        <section xml:id="sec-overview-conformance">
            <title>Conformance</title>
            <xi:include href="./share/conformancestatements.xml"/>
        </section>

    </chapter>

    <chapter xml:id="sec-epub-introduction" conformance="informative">
        <title>Introduction</title>

        <para>EPUB is an interchange and delivery format for digital publications based on XML and
            Web Standards. An <xref linkend="gloss-epub-publication"/> can be thought of as a
            packaging of Web content that represents a digital book, magazine, or other type of
            publication, with a declarative means to navigate through the content, and the ability
            to be distributed reliably for online and offline consumption.</para>

        <para>This specification defines the semantics and conformance requirements for EPUB at the
            publication level. It defines the format of the <xref linkend="gloss-package-document"
            />, as well as rules for how this document and other <xref
                linkend="gloss-publication-resource-cmt-or-foreign"/>s are associated to create a
            conforming EPUB Publication. This specification also defines conformance criteria for
                <xref linkend="gloss-epub-reading-system"/>s.</para>
    </chapter>

    <chapter xml:id="sec-epub-conformance">
        <title>EPUB Publications</title>

        <para>This section defines conformance requirements for <xref
                linkend="gloss-epub-publication"/>s and <xref linkend="gloss-epub-reading-system"/>s
            at the Publication level. Conformance requirements particular to specific <xref
                linkend="gloss-publication-resource-cmt-or-foreign"/>s and processing contexts are
            located in the specifications referenced herein.</para>

        <section xml:id="sec-epub-content-conf">
            <title>EPUB Publication Content Conformance</title>

            <para>An <xref linkend="gloss-epub-publication"/> must meet all of the following
                criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="sec-epub-content-conformance-package">
                    <term>The Package Document</term>
                    <listitem>
                        <para xml:id="confreq-package">It must contain exactly one <xref
                                linkend="gloss-package-document"/>, conformant to the content
                            requirements defined in <xref linkend="sec-package-content-conf"
                            />.</para>
                        <para xml:id="confreq-manifest">All <xref
                                linkend="gloss-publication-resource-cmt-or-foreign"/>s must be
                            represented in the Package Document as defined in <xref
                                linkend="sec-manifest-elem"/> and located physically as defined in
                                <xref linkend="sec-resource-locations"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-content-conformance-contentdocs">
                    <term>Content Documents</term>
                    <listitem>
                        <para xml:id="confreq-cd">It must contain at least one <xref
                                linkend="gloss-content-document-epub"/> conformant to the content
                            requirements defined in <olink type="epub-spec" targetdoc="contentdocs"
                                targetptr="sec-contentdocs"/>.</para>
                        <!--
                        <para xml:id="confreq-cdf">It may contain one or more <xref
                                linkend="gloss-content-document-foreign"/>s, and must in this case
                            conform to the requirements for fallback provision defined in <xref
                                linkend="sec-fallback-processing-flow"/>.</para> -->
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-content-conformance-nav">
                    <term>The EPUB Navigation Document</term>
                    <listitem>
                        <para xml:id="confreq-nav-occur">It must contain exactly one <xref
                                linkend="gloss-content-document-epub-nav"/> conformant to the
                            content requirements defined in <olink type="epub-spec"
                                targetdoc="contentdocs" targetptr="sec-xhtml-nav-content-conf"
                            />.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-content-conformance-css">
                    <term>EPUB Style Sheets</term>
                    <listitem>
                        <para xml:id="confreq-css">It may contain zero or more <xref
                                linkend="gloss-stylesheet"/>s conformant to the content requirements
                            defined in <olink type="epub-spec" targetdoc="contentdocs"
                                targetptr="sec-css-content-conf"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-content-conformance-media-overlays">
                    <term>Media Overlay Documents</term>
                    <listitem>
                        <para xml:id="confreq-mo">It may contain zero or more <xref
                                linkend="gloss-media-overlay-document"/>s conformant to the content
                            requirements defined in <xref linkend="refOverlays3"/>. </para>
                        <!-- 
                            TODO does Marisa
                            * state which resource types may be targets of smil:text
                            * state audio codecs                            
                        -->
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-content-conformance-additional">
                    <term>Additional Publication Resources</term>
                    <listitem>
                        <para xml:id="confreq-additional">It may contain one or more additional
                                <xref linkend="gloss-publication-resource-cmt-or-foreign"/>s, all of
                            which must be represented in the Package Document <xref
                                linkend="gloss-manifest"/> as defined in <xref
                                linkend="sec-manifest-elem"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-content-conformance-container">
                    <term>Container</term>
                    <listitem>
                        <para xml:id="confreq-ocf">It must be packaged in a <xref
                                linkend="gloss-container"/> as defined in <xref linkend="refOCF30"
                            />. </para>
                    </listitem>
                </varlistentry>
            </variablelist>

            <!-- this it the original, may revert
                <para>An <xref linkend="gloss-epub-publication"/> minimally consists of the following
                <xref linkend="gloss-publication-resource"/>s:</para>
                
                <itemizedlist>
                <listitem>
                <para>Exactly one <xref linkend="gloss-package-document"/>, conformant to the
                requirements defined in <xref linkend="sec-package-content-conf"/>.</para>
                </listitem>
                <listitem>
                <para>Exactly one NCX Document, conformant to the requirements defined in <xref
                linkend="sec-ncx-content-conf"/>.</para>
                </listitem>
                <listitem>
                <para>One or more <xref linkend="gloss-content-document-epub"/>, conformant to the
                requirements defined for EPUB Content Documents in <xref
                linkend="refContentDocs3"/></para>
                </listitem>
                <listitem>
                <para>Zero or more <xref linkend="gloss-stylesheet"/>, conformant to the content
                conformance requirements defined for EPUB Style Sheets in <xref
                linkend="refContentDocs3"/>.</para>
                </listitem>
                <listitem>
                <para>Zero or more Media Overlay Documents, conformant to the content
                conformance requirements defined in <xref linkend="refOverlays3"/></para>
                </listitem>
                <listitem>
                <para>Zero or more additional resources, with content conformance requirements
                inferred from their media type (unless explicitly specified differently by
                this specification or one of its <link linkend="sibling-specs">sibling
                specifications</link>).</para>
                </listitem>
                </itemizedlist>
            -->
        </section>

        <section xml:id="sec-epub-rs-conf">
            <title>EPUB Reading System Conformance</title>

            <para>An <xref linkend="gloss-epub-reading-system"/> must meet all of the following
                criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="sec-epub-rs-conf-epub3">
                    <term>EPUB 3 Processing</term>
                    <listitem>
                        <para xml:id="confreq-rs-epub3-ocf">It must process the <xref
                                linkend="gloss-container"/> as defined in <xref linkend="refOCF30"
                            />.</para>

                        <para xml:id="confreq-rs-epub3-package">It must process the <xref
                                linkend="gloss-package-document"/> as defined in <xref
                                linkend="sec-package-rs-conf"/>, and honor the presentation logic
                            expressed through the Package Document.</para>

                        <para xml:id="confreq-rs-epub3-cmt">Unless specified as <phrase
                                role="conditional">conditional behavior</phrase> in this section, it
                            must support rendering of all <xref
                                linkend="gloss-publication-resource-cmt"/>s.</para>

                        <para xml:id="confreq-rs-foreign">It may support an arbitrary set of <xref
                                linkend="gloss-publication-resource-foreign"/> types, and must
                            process fallbacks for Foreign Resources as defined in <xref
                                linkend="sec-fallback-processing-flow"/> if not.</para>

                        <para xml:id="confreq-rs-epub3-xhtml">It must process <xref
                                linkend="gloss-content-document-epub-xhtml"/>s as defined in <olink
                                type="epub-spec" targetdoc="contentdocs"
                                targetptr="sec-xhtml-conf-rs"/>.</para>

                        <para xml:id="confreq-rs-epub3-svg">It must process <xref
                                linkend="gloss-content-document-epub-svg"/>s as defined in <olink
                                type="epub-spec" targetdoc="contentdocs" targetptr="sec-svg-rs-conf"
                            />.</para>

                        <para xml:id="confreq-rs-epub3-css"><phrase role="conditional">If it has a
                                    <xref linkend="gloss-viewport-css"/></phrase>, it must support
                            visual rendering of <xref linkend="gloss-content-document-epub-xhtml"/>s
                            as defined in <olink type="epub-spec" targetdoc="contentdocs"
                                targetptr="sec-css-rs-conf"/>.</para>

                        <para xml:id="confreq-rs-epub3-raster"><phrase role="conditional">If it has
                                the capability to render raster images</phrase>, it must support the
                                <link linkend="cmt-grp-image">raster image Core Media
                            Types</link>.</para>

                        <para xml:id="confreq-rs-epub3-vector"><phrase role="conditional">If it has
                                the capability to render vector images</phrase>, it must support the
                                <link linkend="cmt-grp-image">vector image Core Media
                            Types</link>.</para>

                        <para xml:id="confreq-rs-epub3-video"><phrase role="conditional">If it has
                                the capability to render video</phrase>, it must support the <link
                                linkend="cmt-grp-video">video Core Media Types</link>.</para>

                        <para xml:id="confreq-rs-epub3-mp3-aac"><phrase role="conditional">If it has
                                the capability to render pre-recorded audio</phrase>, it must
                            support the <link linkend="cmt-grp-audio">audio Core Media Types</link>,
                            and should support Media Overlays <xref linkend="refOverlays3"/>.
                            <!-- In
                            addition, if <phrase role="conditional">it also has the capability to
                                render video</phrase>, it must support rendering of the <link
                                linkend="cmt-mp4-aac">AAC-LC audio</link> media type standalone
                            (i.e. not embedded in the video container).--></para>

                        <para xml:id="confreq-rs-epub3-tts"><phrase role="conditional">If it
                                supports <xref linkend="gloss-tts"/> rendering</phrase>, it should
                            support <olink type="epub-spec" targetdoc="contentdocs"
                                targetptr="sec-pls"/>, the CSS3 Speech features of the <olink
                                type="epub-spec" targetdoc="contentdocs" targetptr="sec-css">EPUB
                                CSS Profile</olink> and the <olink type="epub-spec"
                                targetdoc="contentdocs" targetptr="sec-xhtml-ssml-attrib">SSML
                                attributes</olink> of <xref
                                linkend="gloss-content-document-epub-xhtml"/>s.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-rs-conf-backward">
                    <term>Backward Compatibility</term>
                    <listitem>
                        <para xml:id="confreq-rs-backward-epub2">It should process EPUB version 2
                            publications as defined by <xref linkend="refOPF2"/>, <xref
                                linkend="refOPS2"/> and <xref linkend="refOCF2"/>, and must at a
                            minimum attempt to process any publication whose Package Document
                                <code>version</code> attribute designates a version lower than
                                <literal>3.0</literal> or which omits the <code>version</code>
                            attribute.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-rs-conf-forward">
                    <term>Forward Compatibility</term>
                    <listitem>
                        <para xml:id="confreq-rs-forward-epubn">It should attempt to process EPUB
                            publications whose Package Document <code>version</code> attribute
                            designates a version higher than <literal>3.0</literal> or which omits
                            the <code>version</code> attribute.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-rs-conf-xml">
                    <term>XML Processing</term>
                    <listitem>
                        <para xml:id="confreq-rs-xml-nval">It must be a <link
                                xlink:href="http://www.w3.org/TR/xml/#proc-types">conformant
                                non-validating processor</link>
                            <xref linkend="refXML"/>.</para>
                        <para xml:id="confreq-rs-xml-ns"> It must be a <link
                                xlink:href="http://www.w3.org/TR/REC-xml-names/#ProcessorConformance"
                                >conformant processor</link> as defined in <xref
                                linkend="refXMLNamespaces"/>. </para>
                        <para xml:id="confreq-rs-xml-assocss">It must support
                                <code>xml-stylesheet</code> processing instructions <xref
                                linkend="refXMLStylesheets"/>, and may support additional processing
                            instructions.</para>

                        <para xml:id="confreq-rs-xml-base">It must be a conformant application as
                            defined by <xref linkend="refXMLBase"/>.</para>
                    </listitem>
                </varlistentry>

            </variablelist>
            <!--
            <note>
                <para><remark role="todo">TODO this needs work…</remark></para>
                <para>The EPUB 3 specification suite is intended for use rendering a wide variety of
                    Publications on diverse Reading Systems. Authors should consequently be aware
                    that the Reading Systems on which their Publications may be displayed may have
                    widely varying capabilities with regards to media type rendering support. One
                    Reading System, for example, may have a fully conformant <xref
                        linkend="gloss-viewport-css"/>, while another may not have a visual viewport
                    at all, rendering the Publication using only <xref linkend="gloss-tts"/>.</para>
                < ! - - maybe plug scripting support here too  -  - >
                <para>Similarly, Authors should take note that Reading System support for <xref
                        linkend="gloss-content-document-epub-scripted"/>s will vary widely.</para>
            </note>-->
            <note>
                <para>A conforming Reading System is not necessarily a single dedicated program or
                    device, but may exist as a distributed system.</para>
            </note>

        </section>

    </chapter>

    <chapter xml:id="sec-package-documents">
        <title>Package Documents</title>

        <section xml:id="sec-package-intro" conformance="informative">
            <title>Introduction</title>
            <para>The <xref linkend="gloss-package-document"/> carries bibliographic and structural
                metadata about an <xref linkend="gloss-epub-publication"/>, and is thus the primary
                source of information about how to process and display it.
                <!-- It is always identified in the Container file <xref linkend="refOCF30"/>
                    in the META-INF directory, and represents the primary point of entry into a
                    Publication. -->
            </para>

            <para>The Package Document is an XML document <!-- <xref linkend="refXML"/> -->
                consisting of a set of container elements, each dedicated to housing information
                about a particular aspect of the Publication. These containers effectively
                centralize metadata for the Publication, detail the individual resources that
                compose it and provide reading order and other information for rendering the
                Publication to a User.</para>

            <para>The following list summarizes the information a Package Document contains:</para>

            <itemizedlist>
                <listitem>
                    <para>Publication <link linkend="sec-metadata-elem">metadata</link> &#8212;
                        mechanisms for including and/or referencing metadata applicable to the
                        entire Publication and particular resources within it.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-manifest-elem">Publication manifest</link> &#8212;
                        identifies (via IRI) and describes (via MIME type) the set of resources that
                        collectively compose the Publication.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-spine-elem">spine</link> &#8212; an ordered sequence
                        of ID references to top-level resources in the manifest from which all other
                        resources in the set can be reached or utilized. The spine defines the
                        default reading order of the publication.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-fallback-processing-flow-manifest">Fallback
                            chains</link> &#8212; an optional means for publications to define an
                        ordered list of items that can be considered informational equivalents that
                        a Reading System can choose between for rendering content.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-bindings-elem">Bindings</link> &#8212; an optional
                        means of associating script-based implementations with custom media
                        types.</para>
                </listitem>
            </itemizedlist>

        </section>

        <section xml:id="sec-package-content-conf">
            <title>Package Document Content Conformance</title>

            <para>A <xref linkend="gloss-package-document"/> must meet all of the following
                criteria:</para>
            <variablelist role="conformance-list">
                <varlistentry xml:id="confreq-package-docprops">
                    <term>Document Properties</term>
                    <listitem>
                        <para xml:id="confreq-package-xml">
                            <xi:include href="./share/xml-defref.xml"/>
                        </para>
                        <para xml:id="confreq-package-docprops-schema">It must be valid to the
                            Package Document schema as defined in <xref linkend="app-package-schema"
                            /> and conform to all content conformance constraints expressed in <xref
                                linkend="sec-package-def"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="confreq-package-fileprops">
                    <term>File Properties</term>
                    <listitem>
                        <para xml:id="confreq-package-fileprops-name">The Package Document filename
                            should use the file extension <filename>.opf</filename>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>

            <para xml:id="media-type">Package Documents have the MIME media type
                    <literal>application/oebps-package+xml</literal>
                <xref linkend="refRFC4839"/>.</para>

        </section>

        <section xml:id="sec-package-rs-conf">
            <title>Package Document Reading System Conformance</title>

            <para>An <xref linkend="gloss-epub-reading-system"/> must meet all of the following
                criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="confreq-rs-package-base">
                    <term>Processing</term>
                    <listitem>
                        <para xml:id="confreq-rs-package-def">It must process the Package Document
                            in conformance with all Reading System conformance constraints expressed
                            in <xref linkend="sec-package-def"/>.</para>
                    </listitem>
                </varlistentry>
                <!-- not needed; this is defined in sec-package-def
                <varlistentry xml:id="confreq-rs-package-depr">
                    <term>Deprecated/Superseded Constructs</term>
                    <listitem>
                        <para xml:id="confreq-rs-package-depr-guide">A <xref
                            linkend="gloss-epub-reading-system"/> must process the deprecated guide… </para>
                        <para xml:id="confreq-rs-package-depr-ncx">A <xref
                            linkend="gloss-epub-reading-system"/> must process any included NCX… </para>
                    </listitem>                    
                </varlistentry>
                -->
            </variablelist>

        </section>

        <section xml:id="sec-package-def">
            <title>Package Document Definition</title>

            <para>All elements <xref linkend="refXML"/> defined in this section are in the
                    <literal>http://www.idpf.org/2007/opf</literal> namespace <xref
                    linkend="refXMLNamespaces"/> unless otherwise specified.</para>

            <section xml:id="sec-package-elem" xreflabel="package">
                <title>The <code>package</code> Element</title>

                <para>The <code>package</code> element is the root container of the <xref
                        linkend="gloss-package-document"/>, encapsulating metadata and resource
                    information for the <xref linkend="gloss-epub-publication"/>.</para>

                <variablelist xreflabel="package" role="elem-synopsis" xml:id="elemdef-opf-package">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><literal>package</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>The <literal>package</literal> element is the root element of the
                                Package Document.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-package-version" xreflabel="version">
                                    <term><literal>version</literal>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>Specifies the EPUB specification version to which the
                                            publication conforms.</para>
                                        <para>This version of the specification requires the
                                            attribute have the value <literal>3.0</literal> .</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-unique-identifier"
                                    xreflabel="unique-identifier">
                                    <term><literal>unique-identifier</literal>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the
                                                <literal role="linkwrap"><xref role="codelink"
                                                  linkend="sec-opf-dcidentifier"/></literal> element
                                            that provides the package's preferred, or primary,
                                            identifier.</para>
                                        <para>Refer to <xref
                                                linkend="sec-package-metadata-identifiers"/> for
                                            more information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-profile" xreflabel="profile">
                                    <term><literal>profile</literal>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>Specifies the URI of the metadata profile <xref
                                                linkend="refRDFa11Core"/> for the Package Document. </para>
                                        <para>This version of the specification requires the
                                            attribute have the value
                                                <literal>http://www.idpf.org/epub/30/profile/package/</literal>
                                            <xref linkend="refEPUBPackageProfile"/>. </para>
                                        <para>Refer to <xref linkend="sec-metadata-elem"/> for more
                                            information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-prefix" xreflabel="prefix">
                                    <term><literal>prefix</literal>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>Declares additional metadata vocabulary prefixes not
                                            defined in the metadata profile <xref
                                                linkend="refRDFa11Core"/>.</para>
                                        <para>Refer to <xref linkend="sec-metadata-elem"/> for more
                                            information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-xml-lang">
                                    <term><literal>xml:lang</literal>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-dir">
                                    <term><literal>dir</literal>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-id">
                                    <term><literal>id</literal>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In this order: <literal role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-metadata"/></literal>
                                <option>[required]</option>, <literal><xref
                                        linkend="elemdef-opf-manifest"/></literal>
                                <option>[required]</option>, <literal><xref
                                        linkend="elemdef-opf-spine"/></literal>
                                <option>[required]</option>, <literal role="linkwrap"><link
                                        role="codelink" linkend="sec-guide-elem"
                                    >guide</link></literal>
                                <option>[optional/deprecated]</option>, <literal><xref
                                        linkend="elemdef-bindings"/></literal>
                                <option>[optional]</option></para>
                        </listitem>
                    </varlistentry>

                </variablelist>

                <para><remark role="todo">NOTE The spec <xref linkend="refRDFa11Core"/> underlying
                        the <code>profile</code> and <code>prefix</code> attributes is still
                        evolving. The exact mechanism for vocabulary association in EPUB 3 is
                        therefore subject to change.</remark></para>

            </section>

            <section xml:id="sec-metadata-elem" xreflabel="metadata">
                <title>The <literal>metadata</literal> Element</title>

                <para>The <literal>metadata</literal> element encapsulates information about the
                    publication as a whole, including metadata that applies to the publication
                    package and to the abstract content contained within the package.</para>

                <variablelist xreflabel="metadata" role="elem-synopsis"
                    xml:id="elemdef-opf-metadata">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><literal>metadata</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required first child of <literal><xref
                                        linkend="elemdef-opf-package"/></literal>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>The <literal>metadata</literal> element has no attributes defined
                                in this specification.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In any order: <literal role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-dcidentifier"/></literal>
                                <option>[1 or more]</option>, <literal><xref
                                        linkend="elemdef-opf-dctitle"/></literal>
                                <option>[1 or more]</option>, <literal><xref
                                        linkend="elemdef-opf-dclanguage"/></literal>
                                <option>[exactly 1]</option>, <literal><xref
                                        linkend="elemdef-opf-meta"/></literal>
                                <option>[1 or more]</option>, <literal><xref
                                        linkend="elemdef-opf-link"/></literal>
                                <option>[0 or more]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Core metadata is expressed by a combination of three required elements from
                    the Dublin Core Metadata Element Set <xref linkend="refDCMES"/> &#8212; <link
                        linkend="sec-opf-dcidentifier"><code>title</code></link>, <link
                        linkend="elemdef-opf-dcidentifier"><code>identifier</code></link> and <link
                        linkend="elemdef-opf-dclanguage"><code>language</code></link> &#8212;
                    together with optional properties from DCMI Metadata Terms <xref
                        linkend="refDCTERMS"/> and a set of package and ancillary properties defined
                    in this specification. (Refer to the <link linkend="sec-metadata-elem-examples"
                        >example</link> at the end of this section for an instance of a complete
                    minimal metadata set.)</para>

                <para> Properties from other vocabularies may be added to the
                        <literal>metadata</literal> section to enhance package and content metadata,
                    and to supplement required and optional properties, but their use is optional. </para>
                <!-- </section> -->

                <!-- <section xml:id="sec-metadata-extensibility"
                    xreflabel="Metadata Extensibility Mechanism">
                    <title>Metadata Extensibility</title> -->

                <para> This specification subsets the RDFa 1.1 <xref linkend="refRDFa11Core"/>
                    profile and prefix definition mechanisms to enable the inclusion and extension
                    of metadata vocabularies for defining publications. These features allow core
                    metadata properties to be added unprefixed, and additionally work to standardize
                    the inclusion of metadata across the publishing spectrum by predefining prefixes
                    for the most commonly-used vocabularies. </para>

                <para>All publications must reference the metadata profile on the root
                        <literal>package</literal> element using the <literal><link
                            linkend="attrdef-package-profile">profile</link></literal> attribute.
                    Unlike its RDFa equivalent, the <literal>profile</literal> attribute must only
                    contain the single canonical URI of the EPUB default profile.</para>

                <para> The addition of the metadata profile allows all properties from the <link
                        linkend="refEPUBPackageVocab">EPUB 3 Package Metadata Vocabulary</link> to
                    be referenced without using prefixes. The profile also defines a set of prefixes
                    for use adding other vocabulary properties to EPUB Publications. (<link
                        linkend="refEPUBPackageProfile">Refer to the profile</link> for more
                    information.) </para>

                <para> If the metadata profile does not define a prefix for a needed vocabulary, it
                    does not imply that the vocabulary cannot be used. The <link
                        linkend="attrdef-package-prefix">prefix</link> attribute can also be
                    attached to the <code>package</code> element to define additional prefixes. New
                    prefixes are defined by including whitespace-separated prefix/URI pairings. </para>

                <informalexample>
                    <para>The following example shows how to define a new prefix for a
                        vocabulary.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/rdfa-prefix.xml"/></synopsis>
                </informalexample>

                <xi:include href="./share/rdfa-prefix-reqs.xml"/>

                <bridgehead xml:id="sec-metadata-elem-examples">Example</bridgehead>

                <informalexample>
                    <para>The following example represents the minimal set of metadata that all
                        Publications should contain.</para>
                    <synopsis><xi:include href="examples/publications/metadata-min-complete.xml" parse="text"/></synopsis>
                </informalexample>
            </section>

            <section xml:id="sec-opf-dcidentifier" xreflabel="dc:identifier">
                <title>The DCMES <code>identifier</code> Element</title>

                <para>The <code>identifier</code> element <xref linkend="refDCMES"/> contains a
                    single identifier associated with the <xref linkend="gloss-epub-publication"/>,
                    such as an ISBN, ISSN or ISNI.</para>

                <variablelist xreflabel="dc:identifier" role="elem-synopsis"
                    xml:id="elemdef-opf-dcidentifier">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <literal>dc:identifier</literal>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><literal>http://purl.org/dc/elements/1.1/</literal></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-metadata"/></code>. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>

                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dcidentifier-id">
                                    <term>
                                        <literal>id</literal>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>

                                <varlistentry xml:id="attrdef-dcidentifier-prefer">
                                    <term>
                                        <literal>prefer</literal>
                                        <option>[optional]</option>
                                    </term>
                                    <xi:include href="./share/prefer-prose-listitem.xml"/>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Every <code>metadata</code> section must include at least one
                        <literal>identifier</literal> element containing an unambiguous identifier
                    for the publication. Multiple <literal>identifier</literal> elements are
                    permitted, but only one can be marked as the primary identifier via the
                        <code>package</code> element <code><link
                            linkend="attrdef-package-unique-identifier"
                        >unique-identifier</link></code> attribute. </para>

                <informalexample>
                    <para>The following example shows the unique <literal>identifier</literal>
                        element for a Publication.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/identifier.xml"/></synopsis>
                </informalexample>

                <para role="rsconferr">Reading Systems must not fail catastrophically if they
                    encounter two distinct EPUB Publications with the same purportedly unique
                    primary identifier. </para>

                <para>This specification makes a distinction between the unique identifier for the
                    publication contained in an instance of an EPUB Publication and the identifier
                    that uniquely identifies that instance (i.e., to be able to identify EPUB
                    Publications containing different versions of the same publication). To identify
                    an instance of a packaged Publication, a <xref
                        linkend="gloss-package-identifier"/> can be constructed by combining the
                    unique identifier with the last modified date of the Publication. For more
                    information on the semantics and requirements of the Package Identifier, refer
                    to <xref linkend="sec-opf-metadata-identifiers-pid"/>.</para>

                <para>The <xref linkend="refDCTERMS"/>
                    <literal>identifier</literal> property will supersede the <xref
                        linkend="refDCMES"/><literal>identifier</literal> element in a future
                    version of the specification, but its inclusion is currently optional. Authors
                    should include both versions for forwards compatibility, using the
                        <literal>prefer</literal> attribute on the <literal>identifier</literal>
                    element to indicate to Reading Systems that the property should be used in
                    preference. Refer to <xref linkend="sec-package-metadata-dcmi-transition"/> for
                    more information. </para>

                <informalexample>
                    <para>The following example shows how an <literal>identifier</literal> element
                        and property should co-exist within a publication.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/identifier-1.xml"/></synopsis>
                </informalexample>

                <para> This specification imposes no additional restrictions or requirements on
                    identifiers except that they must be at least one character in length. It is
                    strongly recommended, however, that all identifiers be fully qualified
                    URIs.</para>

                <para> If the <literal>identifier</literal> (<xref linkend="refDCMES"/> or <xref
                        linkend="refDCTERMS"/>) conforms to a established system or has been granted
                    by an issuing authority, the scheme employed should be identified by attaching
                    the optional <literal><link linkend="propdef-scheme">scheme</link></literal>
                    ancillary property to the <literal>identifier</literal>. </para>

                <informalexample>
                    <para>The following example shows how an <literal>identifier</literal> can be
                        marked as a DOI.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/identifier-2.xml"/></synopsis>
                </informalexample>

                <para> This specification does not require or endorse the use of any scheme for
                    identifiers, but authors are encouraged to use established identifiers for
                    schemes such as provided by the ONIX and MARC standards. The scheme identifier
                    used should conform to the requirements of the chosen system; this specification
                    imposes no additional restrictions or requirements on scheme identifiers. </para>

                <note>
                    <para>When a Publication is derived from another publication, the identifier for
                        that source publication may be included in the Publication metadata, and
                        must be represented using the <link linkend="propdef-source-identifier"
                                ><literal>source-identifier</literal> property</link> if
                        included.</para>
                </note>
            </section>

            <section xml:id="elemdef-opf-dctitle" xreflabel="dc:title">
                <title>The DCMES <code>title</code> Element</title>

                <para>The <code>title</code> element represents an instance of a name given to the
                        <xref linkend="gloss-epub-publication"/>.</para>

                <variablelist xreflabel="dc:title" role="elem-synopsis">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <literal>dc:title</literal>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><literal>http://purl.org/dc/elements/1.1/</literal></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-metadata"/></code>. Repeatable.</para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dctitle-id">
                                    <term>
                                        <literal>id</literal> [optional]</term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>

                                <varlistentry xml:id="attrdef-dctitle-prefer">
                                    <term>
                                        <literal>prefer</literal>
                                        <option>[optional]</option>
                                    </term>
                                    <xi:include href="./share/prefer-prose-listitem.xml"/>
                                </varlistentry>

                            </variablelist>
                        </listitem>
                    </varlistentry>


                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para> Every <code>metadata</code> section must include at least one
                        <literal>title</literal> element containing the title for the Publication.
                    Multiple <literal>title</literal> elements are permitted, but the optional
                        <literal>display-seq</literal> property should be attached to each to
                    indicate their primacy for display and other rendering purposes. If no means of
                    establishing the primary title of the publication is included, Reading Systems
                    must treat the first <literal>title</literal> element encountered as the primary
                    title. </para>

                <informalexample>
                    <para>The following example shows how to indicate the display order for multiple
                            <literal>title</literal> elements.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title.xml"/></synopsis>
                </informalexample>

                <para>The <xref linkend="refDCTERMS"/>
                    <literal>title</literal> property will supersede the <xref linkend="refDCMES"/>
                    <literal>title</literal> element in a future version of the specification, but
                    its inclusion is currently optional. Authors should include both versions for
                    forwards compatibility, using the <literal>prefer</literal> attribute on the
                        <literal>title</literal> element to indicate to Reading Systems that the
                    property should be used in preference. Refer to <xref
                        linkend="sec-package-metadata-dcmi-transition"/> for more
                    information.</para>

                <informalexample>
                    <para>The following example shows how a <literal>title</literal> element and
                        property should co-exist within a publication.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-1.xml"/></synopsis>
                </informalexample>

                <para> This specification imposes no additional restrictions or requirements on
                    titles except that they must be at least one character in length. </para>

                <!--
                <para> The <literal role="linkwrap"><link role="codelink" linkend="propdef-file-as">file-as</link></literal>
                    property can be attached to a <literal>title</literal> to include a normalized
                    representation of the title for machine and bibliographic sorting purposes. </para>
                
                <informalexample>
                    <para>The following example shows a <literal>title</literal> and its normalized
                        form for sorting.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-3.xml"/></synopsis>
                </informalexample>
                
                <para> The <literal role="linkwrap"><link role="codelink" linkend="propdef-alternate-script"
                    >alternate-script</link></literal> property can also be attached to provide
                    a rendition of the <literal>title</literal> in another language and/or script. </para>
                
                <informalexample>
                    <para>The following example shows alternate renditions of a
                        <literal>title</literal> for French and English readers.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-4.xml"/></synopsis>
                </informalexample>
                -->

            </section>

            <section xml:id="elemdef-opf-dclanguage" xreflabel="dc:language">
                <title>The DCMES <code>language</code> Element</title>

                <para>The <code>language</code> element specifies the default language of the
                    Publication content.</para>

                <variablelist xreflabel="dc:language" role="elem-synopsis">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <literal>dc:language</literal>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><literal>http://purl.org/dc/elements/1.1/</literal></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-metadata"/></code>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-dclanguage-prefer">
                                    <term>
                                        <literal>prefer</literal>
                                        <option>[optional]</option>
                                    </term>
                                    <xi:include href="./share/prefer-prose-listitem.xml"/>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Every <code>metadata</code> section must include a single <xref
                        linkend="refDCMES"/>
                    <literal>language</literal> element with a value conforming to <xref
                        linkend="refRFC5646"/>.</para>

                <informalexample>
                    <para>The following example shows a publication in U.S. English.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/language.xml"/></synopsis>
                </informalexample>
                <!--
                <para>The <code>metadata</code> section may optionally include a single <xref
                        linkend="refDCTERMS"/>
                    <code>language</code> property, which, when present, must contain a value that
                    is:</para>

                <itemizedlist>
                    <listitem>
                        <para>a variable-length code as defined in <xref linkend="refRFC5646"
                            />;</para>
                    </listitem>
                    <listitem>
                        <para>a 2-letter language code as defined in <xref linkend="refISO6391"
                            />;</para>
                    </listitem>
                    <listitem>
                        <para>a 3-letter language code as defined in <xref linkend="refISO6392T"/>;
                            or</para>
                    </listitem>
                    <listitem>
                        <para>a 3-letter language code as defined in <xref linkend="refISO6393"
                            />.</para>
                    </listitem>
                    </itemizedlist>-->

                <para>A single optional <xref linkend="refDCTERMS"/>
                    <literal>language</literal> property may also be included. The value of this
                    property must also conform to RFC 5646. When both the DCMES element and DCTERMS
                    property are included, they must both have the same language code as their
                    value.</para>

                <para>The <xref linkend="refDCTERMS"/>
                    <literal>language</literal> property will supersede the <xref linkend="refDCMES"/>
                    <literal>language</literal> element in a future version of the specification,
                    but its inclusion is currently optional. Authors should include both versions
                    for forwards compatibility, using the <literal>prefer</literal> attribute on the
                        <literal>language</literal> element to indicate to Reading Systems that the
                    property should be used in preference. Refer to <xref
                        linkend="sec-package-metadata-dcmi-transition"/> for more
                    information.</para>

                <informalexample>
                    <para>The following example shows how a <literal>language</literal> element and
                        property should co-exist within a publication.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/language-1.xml"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-meta" xreflabel="meta">
                <title>The <literal>meta</literal> Element</title>

                <para>The <literal>meta</literal> element provides a generic means of including
                    package metadata, allowing the expression of primary metadata about the package
                    or content and refinement of that metadata.</para>

                <variablelist xreflabel="meta" role="elem-synopsis" xml:id="elemdef-opf-meta">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <literal>meta</literal>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As child of the <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-metadata"/></code> element.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-meta-property">
                                    <term>
                                        <literal>property</literal>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <para>A CURIE <xref linkend="refRDFa11Core"/> that resolves
                                            to a term in one of the vocabularies defined in the
                                            metadata profile or <literal>package</literal> element
                                                <xref linkend="attrdef-package-prefix"/>
                                            attribute.</para>
                                        <para>Refer to <xref linkend="sec-meta-property-values"/>
                                            for a set of properties defined by this
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-about">
                                    <term>
                                        <literal>about</literal>
                                        <option>[context dependent]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/about-prose-para.xml"/>
                                        <para>The <literal>about</literal> attribute is optional
                                            depending on the type of metadata being expressed. When
                                            omitted, the property relates to the EPUB Publication as
                                            a whole.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-id" xreflabel="id">
                                    <term>
                                        <literal>id</literal>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each <code>meta</code> element defines a metadata expression consisting of a
                    subject, predicate and object. The subject can be the <xref
                        linkend="gloss-epub-publication"/> (e.g., to express its title(s),
                    identifier(s), etc.), a resource belonging to the Publication (e.g., to express
                    the duration of a media clip) or a metadata expression defined in another
                        <code>meta</code> element (e.g., to identify a scheme an identifier conforms
                    to).</para>

                <para>The subject of the metadata expression is defined by the <code>about</code>
                    attribute. When attached to a <code>meta</code> element, the attribute must
                    reference the specific metadata element or resource that constitutes the
                    subject. In its absence, the metadata expression defines metadata about the
                    Publication.</para>

                <para>The predicate of the metadata expression — the relationship between the
                    subject and object — is defined by the required <literal>property</literal>
                    attribute. The value of the <code>property</code> must be a CURIE <xref
                        linkend="refRDFa11Core"/> that resolves to a property from a metadata
                    vocabulary (it is not required that Reading System be able to resolve the
                    CURIEs, however).</para>

                <para><remark role="todo">NOTE The spec <xref linkend="refRDFa11Core"/> underlying
                        the <code>profile</code> and <code>prefix</code> attributes is still
                        evolving. The exact mechanism for vocabulary association in EPUB 3 is
                        therefore subject to change.</remark></para>

                <informalexample>
                    <para>The following example shows an identifier being declared for the
                        Publication in the first <code>meta</code> element and a scheme being
                        defined for the identifier in the second.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-ancillary.xml"/></synopsis>
                </informalexample>

                <para>The value of the <code>meta</code> element represents the object of the
                    metadata expression. Every <code>meta</code> element must express a value that
                    is at least one character in length after whitespace normalization.</para>

                <para>Note that unless an individual property explicitly specifies a different
                    whitespace normalization algorithm, Reading Systems must trim all leading and
                    trailing whitespace from the <literal>meta</literal> element values as defined
                    by the XML specification <xref linkend="refXML"/> before further processing
                    them.</para>

                <bridgehead xml:id="sec-meta-elem-examples">Examples</bridgehead>

                <informalexample>
                    <para>The following example shows an example of a <code>metadata</code> section
                        consisting entirely of <code>meta</code> elements. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-example-full.xml"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example shows how the complex title "The Great Cookbooks of
                        the World: Mon premier guide de cuisson, un Mémoire. The New French Cuisine
                        Masters, Volume Two. Special Anniversary Edition" could be classified. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-ex-title-2.xml"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example shows an identifier that has been issued by a
                        metadata authority.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-example-authority.xml"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-link-elem" xreflabel="link">
                <title>The <code>link</code> Element</title>

                <para>The <code>link</code> element is used to associate supplementary resources
                    with the publication, such as metadata records.</para>

                <variablelist xreflabel="link" role="elem-synopsis" xml:id="elemdef-opf-link">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <literal>link</literal>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-metadata"/></code>. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-link-href" xreflabel="href">
                                    <term>
                                        <literal>href</literal>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <para>An IRI <xref linkend="refRFC3987"/> to an external
                                            metadata resource.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-rel" xreflabel="rel">
                                    <term>
                                        <literal>rel</literal>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-id" xreflabel="id">
                                    <term>
                                        <literal>id</literal>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-about">
                                    <term>
                                        <literal>about</literal>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/about-prose-para.xml"/>
                                        <para>When the <code>about</code> attribute is omitted, the
                                            resource applies to the EPUB Publication as a
                                            whole.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
                <para>The <code>metadata</code> element may contain one or more
                        <literal>link</literal> elements.</para>
                <para> The <code>href</code> attribute of the <code>link</code> element identifies
                    the location of the resource and the <code>rel</code> attribute defines the
                    nature of the resource (i.e., its relation to the Publication or property
                    specified in the <code>about</code> attribute). Refer to <xref
                        linkend="sec-link-rel-values"/> for the list of resource types that are
                    recognized by this specification.</para>
                <!-- There is no provision for specifying version information of the referenced
                    record. (this  assumes that version information is available inline in the 
                    referenced resources) -->
                <para>Resources identified by the <code>link</code> element <code>href</code>
                    attribute are considered <xref linkend="gloss-supplementary-resource"/>s, and
                    must therefore not be represented as <code>items</code> in the <link
                        linkend="sec-manifest-elem">manifest</link>. Reading Systems are not
                    required to dereference the resources identified through the
                        <literal>link</literal> element.</para>
                <para>When the <code>link</code> element references a metadata record, precedence
                    must be given to metadata defined inline in the Package Document
                        <code>metadata</code> element in the case of conflicts.</para>
                <para>The optional <code>about</code> attribute can be attached when the referenced
                    resource applies to another metadata item (e.g., to tie an XML Signature <xref
                        linkend="refXMLDSIGCORE"/> to a metadata authority). The resource applies to
                    the Publication as a whole when the attribute is not present.</para>
                <bridgehead>Examples</bridgehead>
                <informalexample>
                    <para>The following example shows the <code>link</code> element used to
                        associate three supplementary metadata resources with the publication: an
                        ONIX record, an XMP record, and a link to an informational web page. Note
                        that as the <literal>foaf:homepage</literal> token is <link
                            linkend="sec-link-rel-values">not defined by this specification</link>;
                        the <link linkend="sec-metadata-elem">metadata extensibility
                            mechanism</link> is employed to associate the vocabulary. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/link-2.xml"/></synopsis>
                </informalexample>
            </section>

            <section xml:id="sec-manifest-elem" xreflabel="manifest">
                <title>The <literal>manifest</literal> Element</title>

                <para>The <code>manifest</code> element provides an exhaustive list of the <xref
                        linkend="gloss-publication-resource-cmt-or-foreign"/>s that constitute the
                        <xref linkend="gloss-epub-publication"/>, each represented by an <code
                        role="linkwrap"><xref role="codelink" linkend="sec-item-elem"/></code>
                    element.</para>

                <variablelist xreflabel="manifest" role="elem-synopsis"
                    xml:id="elemdef-opf-manifest">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><code>manifest</code></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required second child of <code role="linkwrap"><xref
                                        role="codelink" linkend="elemdef-opf-package"/></code>,
                                following <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-metadata"/></code>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-manifest-id" xreflabel="id">
                                    <term><code>id</code>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-package-item"/> elements</code>
                                <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <note>
                    <para>This specification supports internationalized resource naming, so elements
                        and attributes that reference Publication Resources accept IRIs as their
                        value. For compatibility with older Reading Systems that only accepts URIs,
                        resource names should be restricted to the ASCII character set.</para>
                </note>

            </section>

            <section xml:id="sec-item-elem" xreflabel="item">
                <title>The <code>item</code> Element</title>

                <para>The <code>item</code> element represents a <xref
                        linkend="gloss-publication-resource-cmt-or-foreign"/>.</para>

                <variablelist xreflabel="item" role="elem-synopsis" xml:id="elemdef-package-item">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><code>item</code></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-manifest"/></code>. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-item-id" xreflabel="id">
                                    <term><code>id</code>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-href" xreflabel="href">
                                    <term><code>href</code>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IRI <xref linkend="refRFC3987"/> specifying the
                                            location of the Publication Resource described by this
                                                <code>item</code>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-media-type"
                                    xreflabel="media-type">
                                    <term><code>media-type</code>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>A MIME string <xref linkend="refRFC2046"/> specifying
                                            the media type of the Publication Resource described by
                                            this <code>item</code>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-fallback" xreflabel="fallback">
                                    <term><code>fallback</code>
                                        <option>[conditionally required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the
                                            fallback for a non-Core Media Type.</para>
                                        <para>Refer to <xref linkend="sec-fallback-processing-flow"
                                            /> for more information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="properties" xml:id="attrdef-item-property">
                                    <term><code>properties</code>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                        <para>Refer to <xref linkend="sec-item-property-values"/>
                                            for a set of properties defined by this
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="media-overlay"
                                    xml:id="attrdef-item-media-overlay">
                                    <term><code>media-overlay</code>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the
                                                <xref linkend="gloss-media-overlay-document"/> for
                                            the resource described by this <code>item</code>.</para>
                                        <para>Refer to <olink type="epub-spec"
                                                targetdoc="mediaoverlays"
                                                targetptr="sec-the-package-document"/> for more
                                            information.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each <code>item</code> element in the <code>manifest</code> identifies a <xref
                        linkend="gloss-publication-resource-cmt-or-foreign"/> by the IRI provided in
                    its <code>href</code> attribute. The IRI may be absolute or relative. In the
                    case of relative IRIs, Reading Systems must use the IRI of the Package Document
                    as the base when resolving these to absolute IRIs. The resulting absolute IRI
                    must be unique within the <code>manifest</code> scope.</para>

                <para>All Publication Resources must be referenced from the <code>manifest</code>
                    regardless of their physical location (i.e., regardless of whether they are
                    available in the <xref linkend="gloss-container"/> or remotely). Refer to <xref
                        linkend="sec-resource-locations"/> for media type-specific requirements
                    regarding resource locations.</para>

                <para>The Publication Resource identified by an <code>item</code> element must
                    conform to the applicable specification(s) as inferred from the MIME Type
                    provided in the <code>item</code> element <code>media-type</code> attribute.
                        <xref linkend="gloss-publication-resource-cmt"/>s must use the MIME Type
                    string designated in <xref linkend="tbl-core-media-types"/>.
                    <!-- Publication Resources that are <link linkend="sec-core-media-types">Core Media
                        Types</link> must use the MIME Type string designated in <xref
                        linkend="tbl-core-media-types"/>.--></para>

                <para>All <xref linkend="gloss-publication-resource-foreign"/>s must provide a
                    fallback as defined in <xref linkend="sec-fallback-processing-flow"/>.</para>

                <para>All Publication Resources must declare any applicable descriptive metadata
                    properties as defined in <xref linkend="sec-item-property-values"/> via the
                        <code>item</code> element <code role="linkwrap"><xref role="codelink"
                            linkend="attrdef-item-property"/></code> attribute. Exactly one must be
                    declared as the <xref linkend="gloss-content-document-epub-nav"/> using the
                        <code>nav</code> property.</para>

                <para>The manifest is not self-referencing: it must not include <code>item</code>
                    elements referring to the resource(s) that make up the Package Document
                    itself.</para>

                <note>
                    <para>The order of <code>item</code> elements in the manifest is not
                        significant. The presentation sequence of content documents is provided in
                        the <code role="linkwrap"><link role="codelink" linkend="sec-spine-elem"
                                >spine</link></code>.</para>
                </note>

                <para xml:id="def-supplementary-resource">This specification and its <link
                        linkend="sibling-specs">sibling specifications</link> may explicitly define
                    certain resource types to be <link linkend="gloss-supplementary-resource"
                        >supplementary</link>. These resources are not Publication Resources and
                    must not be referenced from the manifest. An example of a supplementary resource
                    is a metadata record referenced from the <code role="linkwrap"><xref
                            role="codelink" linkend="sec-link-elem"/></code> element.</para>

                <bridgehead xml:id="examples-manifest" xreflabel="Manifest examples"
                    >Examples</bridgehead>

                <informalexample xml:id="example-manifest-cmt">
                    <para>The following example shows a <literal>manifest</literal> that only
                        contains <xref linkend="gloss-publication-resource-cmt"/>s.</para>
                    <synopsis><xi:include href="./examples/publications/manifest-1.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample xml:id="example-manifest-flbk">
                    <para>The following example shows a <code>manifest</code> that references two
                            <xref linkend="gloss-publication-resource-foreign"/>s, and therefore
                        uses the <link linkend="sec-fallback-processing-flow-manifest">fallback
                            chain mechanism</link> to supply content alternatives. The fallback
                        chain terminates with a Core Media Type. </para>
                    <synopsis><xi:include href="./examples/publications/manifest-2.xml" parse="text"/></synopsis>
                </informalexample>

                <note>
                    <para>Refer also to the <xref linkend="examples-item-properties"/> for use of
                        the <code>properties</code> attribute.</para>
                </note>
            </section>

            <section xml:id="sec-spine-elem" xreflabel="spine">
                <title>The <code>spine</code> Element</title>

                <para>The <code>spine</code> element defines the default reading order of the <xref
                        linkend="gloss-epub-publication"/> content by defining an ordered list of
                        <link linkend="sec-itemref-elem">manifest <code>item</code>
                        references</link>.</para>

                <variablelist xreflabel="spine" role="elem-synopsis" xml:id="elemdef-opf-spine">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><literal>spine</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Third child of <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-package"/></code>, following <code
                                    role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-manifest"/></code>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-spine-id">
                                    <term><literal>id</literal>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-spine-toc" xreflabel="toc">
                                    <term><literal>toc</literal>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the
                                            manifest <code role="linkwrap"><xref role="codelink"
                                                  linkend="elemdef-package-item"/></code> that
                                            represents the superseded <code>NCX</code>.</para>
                                        <para>Refer to <xref linkend="ncx-superseded"/> for more
                                            information.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Multiple <literal role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-spine-itemref"/></literal> elements
                                    <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <bridgehead xml:id="ncx-superseded">NCX Superseded</bridgehead>

                <para>The NCX feature defined in <xref linkend="refOPF2"/> is superseded by the
                        <olink targetdoc="contentdocs" targetptr="sec-xhtml-nav" type="epub-spec"
                        >EPUB Navigation Document</olink>. EPUB 3 Publications may include an NCX
                    (as defined in OPF 2.0.1) for EPUB 2 Reading System forwards compatibility
                    purposes. EPUB 3 Reading Systems must ignore the NCX in favor of the EPUB
                    Navigation Document.</para>

                <note xml:id="note-ncx">
                    <para>As the EPUB 2 NCX and the EPUB 3 Navigation Document use different
                        mechanisms for identification in the Package Document (the spine <code><xref
                                linkend="attrdef-spine-toc"/></code> attribute and the <code><xref
                                linkend="propdef-nav"/></code> property on the manifest
                            <code>item</code> element, respectively) they can co-exist without
                        conflict in an EPUB 3 Publication.</para>
                </note>

            </section>

            <section xml:id="sec-itemref-elem" xreflabel="itemref">
                <title>The <code>itemref</code> Element</title>

                <para>The child <code>itemref</code> elements of the <code>spine</code> represent a
                    sequential list of <xref linkend="gloss-publication-resource-cmt-or-foreign"/>s
                    (typically <xref linkend="gloss-content-document-epub"/>s). The order of the
                        <code>itemref</code> elements defines the default reading order of the
                    Publication.</para>

                <para>An EPUB Content Document referenced from the <code>spine</code> is referred to
                    in this specification and its <link linkend="sibling-specs">sibling
                        specifications</link> as a <xref linkend="gloss-content-document-top-level"
                    />.</para>

                <variablelist xreflabel="itemref" role="elem-synopsis"
                    xml:id="elemdef-spine-itemref">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><literal>itemref</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Child of <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-spine"/></code>. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-itemref-idref" xreflabel="idref">
                                    <term><code>idref</code>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies a
                                            manifest <xref linkend="elemdef-package-item"/>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="linear" xml:id="attrdef-itemref-linear">
                                    <term><code>linear</code>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>Specifies whether the referenced content is
                                            primary.</para>
                                        <para>The value of the attribute must be
                                                <literal>yes</literal> or <literal>no</literal>. The
                                            default value <literal>yes</literal>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-itemref-id">
                                    <term><code>id</code>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="properties"
                                    xml:id="attrdef-itemref-property">
                                    <term><code>properties</code>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                        <para>Refer to <xref linkend="sec-itemref-property-values"/>
                                            for a set of properties defined by this
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>

                </variablelist>

                <para>Each <code>itemref</code> element must reference, via its <code><xref
                            linkend="attrdef-itemref-idref"/></code> attribute, an <code><xref
                            linkend="elemdef-package-item"/></code> in the <xref
                        linkend="gloss-manifest"/>. The <code>spine</code> consequently represents
                    an ordered subset of the Publication Resources listed in the manifest, with
                    content items not being referenced being ancillary to those that do appear
                    there. </para>

                <para xml:id="confreq-spine-itemtypes">Each manifest <code>item</code> referenced
                    from the <code>spine</code> must either be: a) an <xref
                        linkend="gloss-content-document-epub"/>; or, b) another type of <xref
                        linkend="gloss-publication-resource-cmt-or-foreign"/> which,
                        <emphasis>regardless of whether it is a <xref
                            linkend="gloss-publication-resource-cmt"/> or a <xref
                            linkend="gloss-publication-resource-foreign"/></emphasis>, must include
                    an EPUB Content Document in its fallback chain.</para>

                <para xml:id="spine-xhtsvg"> The references provided in the spine must resolve to
                    either <xref linkend="gloss-content-document-epub-xhtml"/>s or <xref
                        linkend="gloss-content-document-epub-svg"/>s. References should resolve to
                    XHTML Content Documents, but may resolve to SVG Content Documents when: 1) such
                    use is within a Publication that is packaged together with — and as an
                    alternative non-default representation of — another Publication that represents
                    effectively the same content utilizing XHTML Content Documents; or 2) the nature
                    of the content being represented in is inherently unsuitable to representation
                    in XHTML.</para>

                <note>
                    <para>Although the <xref linkend="gloss-content-document-epub-nav"/> is <link
                            linkend="confreq-nav-occur">required in EPUB Publications</link>, it is
                        optional to include it in the <code>spine</code>.</para>
                </note>

                <para>The <code>itemref</code> element <code>linear</code> attribute indicates
                    whether a spine item is considered primary (<literal>yes</literal>) or auxiliary
                        (<literal>no</literal>). This attribute may be used to enable Reading
                    Systems to distinguish presentation of body content from supplementary content
                    which might be, for example, presented in a popup window, or omitted from an
                    aural rendition. </para>

                <para>Reading Systems must provide a means of rendering a Publication in the order
                    defined by the <code>spine</code>, which includes: a) recognizing the first
                    primary (<literal>linear='yes'</literal>) <code>item</code> in the
                        <code>spine</code> as the beginning of the main reading order of the
                    publication; and, b) rendering successive primary items in the order given in
                    the <code>spine</code>.</para>

                <!-- TODO this seems redundant (see sec-itemref-property-values)
                <para>The optional <code>properties</code> attribute allows either the value
                        <literal>page-spread-left</literal> or <literal>page-spread-right</literal>
                    for finer-grained control over the rendering of <xref
                        linkend="gloss-content-document-epub-svg"/> in Reading Systems capable of
                    two-page spreads. When used, the property indicates which side of the two-page
                    spread the SVG document must be rendered on. An <code>itemref</code> must not
                    have both properties specified for its rendering, but it is permitted that
                    consecutive <code>itemref</code>s have the same property (in which case a blank
                    page should be rendered in the opposing frame). Refer to <xref
                        linkend="sec-itemref-property-values"/> for more information.</para> -->

                <bridgehead>Examples</bridgehead>
                <informalexample>
                    <para>The following example shows a <literal>spine</literal> element
                        corresponding to <link linkend="example-manifest-cmt">the manifest example
                            above</link>.</para>
                    <synopsis><xi:include href="./examples/publications/spine-1.xml" parse="text"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-guide-elem" xreflabel="guide">
                <title>The <code>guide</code> Element [DEPRECATED]</title>

                <para>The <code>guide</code> element <xref linkend="refOPF2"/> is deprecated in
                    favor of the <literal>landmarks</literal> feature in the <xref
                        linkend="gloss-content-document-epub-nav"/>. Refer to <olink
                        type="epub-spec" targetdoc="contentdocs"
                        targetptr="sec-xhtml-nav-def-types-landmarks"/> for more information.</para>

                <para>Authors may include the <code>guide</code> element in the Package Document for
                    EPUB 2 Reading System forwards compatibility purposes. EPUB 3 Reading Systems
                    must ignore the <code>guide</code> element when provided in EPUB 3 Publications
                    whose <xref linkend="gloss-content-document-epub-nav"/> includes the
                        <code>landmarks</code> feature.</para>

            </section>

            <section xml:id="sec-bindings-elem" xreflabel="bindings">
                <title>The <code>bindings</code> Element</title>

                <para>The <code>bindings</code> element defines a set of custom handlers for media
                    types not supported by this specification.</para>

                <variablelist xreflabel="bindings" role="elem-synopsis" xml:id="elemdef-bindings">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><literal>bindings</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Fourth or fifth child of <code role="linkwrap"><xref
                                        role="codelink" linkend="elemdef-opf-package"/></code>,
                                following <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-opf-spine"/></code> or <code
                                    role="linkwrap"><link role="codelink" linkend="sec-guide-elem"
                                        >guide</link></code>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>None.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <literal role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-mediaType"/></literal> elements
                                    <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <code role="linkwrap"><xref role="codelink" linkend="elemdef-opf-package"
                        /></code> element may contain at most one <code>bindings</code> element. </para>

                <para>When present, Reading Systems that support scripting must utilize the
                        <code>bindings</code> element to handle <code>object</code> elements in
                    XHTML Content Documents that reference MIME media types that are not natively
                    supported. When encountering such references, a Reading System must instantiate
                    the designated XHTML Content Document handler as if it had been referenced from
                    the <code>object</code> element <code>data</code> attribute with the following
                    URL parameters:</para>

                <itemizedlist>
                    <listitem>
                        <para><code>src</code> &#8212; the value of which must be an IRI <xref
                                linkend="refXML"/> to the resource (i.e., the value of the
                                <code>object</code> element's <code>data</code> attribute).</para>
                    </listitem>
                    <listitem>
                        <para><code>type</code> &#8212; the value of which must be the resource
                            media type (i.e., the value of the <code>object</code> element's
                                <code>media-type</code> attribute).</para>
                    </listitem>
                </itemizedlist>

                <para>All <code>param</code> children of the <code>object</code> element must be
                    similarly encoded as URL parameters using the <code>param</code>'s
                        <code>name</code> attribute as the new parameter name and its
                        <code>value</code> attribute as the new value.</para>

                <note>
                    <para>All reserved and non-ASCII characters in the generated query string values
                        must be URL encoded.</para>
                </note>

                <informalexample>
                    <para>The following example shows an example of an <code>object</code> element
                        containing a non-native media type and the resulting query string after
                        handling.</para>
                    <synopsis>
<![CDATA[
<object data="horse.ogg" media-type="audio/ogg"/>
    <param name="autoplay" value="false">
</object>

Resulting URI query string:
                    
src=horse.ogg&amp;type=audio/ogg&amp;autoplay=false
]]>
                    </synopsis>
                </informalexample>

                <informalexample>
                    <para>The following partial example illustrates how bindings can be used to
                        provide a default implementation.</para>
                    <synopsis>
<![CDATA[
<manifest>
    <item id="pict1" href="images/Pict1.jpg" media-type="image/jpeg"/>
    …
    <item id="content" href="content.xhtml" media-type="application/xhtml+xml"/>
    <item id="impl" href="impl.xhtml" media-type="application/xhtml+xml"/>
    <item id="slideshow" href="slideshow.xml" media-type="application/x-demo-slideshow"/>
</manifest>

<bindings>
    <mediaType media-type="application/x-demo-slideshow" handler="impl"/>
</bindings>
]]>                        
<emphasis role="italic">in content.xhtml:</emphasis>
<![CDATA[
…
<object data="slideshow.xml" type="application/x-demo-slideshow">
    <!-- if scripting is not available, just show them inline -->
    <img src="images/Pict1.jpg"/>
    <img src="images/Pict2.jpg"/>
    <img src="images/Pict3.jpg"/>
    <img src="images/Pict4.jpg"/>
</object>
…
]]>        
<emphasis role="italic">in slideshow.xml:</emphasis>
<![CDATA[
<slides>
    <slide src="images/Pict1.jpg" dur="3"/>
    <slide src="images/Pict2.jpg" dur="3"/>
    <slide src="images/Pict3.jpg" dur="3"/>
    <slide src="images/Pict4.jpg" dur="3"/>
</slides>
]]>
                        </synopsis>
                </informalexample>
            </section>

            <section xml:id="sec-mediaType-elem" xreflabel="mediaType">
                <title>The <code>mediaType</code> Element</title>

                <para>The <code>mediaType</code> element associates a non-native media type with a
                    handler (the handler provides a default script-based implementation for items of
                    the given media type when they are referenced from <code>object</code> elements
                    in a <xref linkend="gloss-content-document-epub-xhtml"/>).</para>

                <variablelist xreflabel="mediaType" role="elem-synopsis" xml:id="elemdef-mediaType">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><literal>mediaType</literal></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <code role="linkwrap"><xref role="codelink"
                                        linkend="elemdef-bindings"/></code>. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-mediaType-media-type"
                                    xreflabel="media-type">
                                    <term><literal>media-type</literal>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>MIME media type.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-mediaType-handler" xreflabel="handler">
                                    <term><literal>handler</literal>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the
                                            manifest XHTML Content Document to be invoked to handle
                                            content of the type specified in this element</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each child <code>mediaType</code> of a <code>bindings</code> element must
                    define a unique content type in its <code>media-type</code> attribute. The media
                    type specified must also not be a Core Media Type.</para>

                <para>The required <code>handler</code> attribute must reference the ID <xref
                        linkend="refXML"/> of an <code role="linkwrap"><link role="codelink"
                            linkend="elemdef-package-item">item</link></code> in the <code
                        role="linkwrap"><link role="codelink" linkend="elemdef-opf-manifest"
                            >manifest</link></code> of the default implementation for this media
                    type. The referenced <code>item</code> must be an XHTML Content Document.</para>

            </section>
        </section>
    </chapter>

    <chapter xml:id="sec-package-metadata">
        <title>Package Metadata</title>

        <section xml:id="sec-package-metadata-identifiers">
            <title>Publication Identifiers</title>

            <section xml:id="sec-opf-metadata-identifiers-uid">
                <title>Unique Identifier</title>

                <para>The Package Document's author is responsible for including a primary
                    identifier that is unique to one and only one particular <xref
                        linkend="gloss-epub-publication"/>. The primary identifier, whether chosen
                    or assigned, must be stored in a <link linkend="sec-opf-dcidentifier"
                            ><literal>dc:identifier</literal> element</link> in the Package
                        <literal>metadata</literal> section and be referenced as the unique
                    identifier in the <literal>package</literal> element <link
                        linkend="attrdef-package-unique-identifier"
                            ><literal>unique-identifier</literal> attribute</link>. </para>

                <para>Although not static, changes to the unique identifier for a Publication should
                    be made as infrequently as possible. New identifiers should not be issued when
                    updating metadata, fixing errata or making other minor changes to the
                    Publication.</para>

            </section>

            <section xml:id="sec-opf-metadata-identifiers-pid">
                <title>Package Identifier</title>

                <para>The uniqueness of an <xref linkend="gloss-epub-publication"/> typically does
                    not change in concert with each revision to the package or its contents, as
                    unique identifiers are intended to have maximal persistence both for referencing
                    and distribution purposes. Each release of a Publication normally requires that
                    the new version be uniquely identifiable, however, which results in the
                    contradictory need for reliable unique identifiers that are changeable.</para>

                <para>To redress this problem of identifying minor releases without changing the
                    unique identifier, this specification defines the semantics for a Package
                    Identifier, or means of distinguishing and sequentially ordering Publications
                    with the same unique identifier. The Package Identifier is not an actual
                    property in the package <literal>metadata</literal> section, but is a value that
                    can be obtained from two required pieces of metadata: the unique identifier and
                    the last modification date of the Publication.</para>

                <para>When the taken together, the combined value represents a unique identity that
                    can be used to distinguish any particular EPUB instance from another. To ensure
                    that a Package Identifier can be constructed, the Publication must include
                    exactly one <literal>dcterms:modified</literal> property containing the last
                    modification date. The value of this property must be an XML Schema <xref
                        linkend="refXSDDatatypes"/> dateTime conformant date of the form:</para>

                <informalexample>
                    <synopsis>
                     CCYY-MM-DDThh:mm:ssZ</synopsis>
                </informalexample>

                <para>The modification date must be expressed in Coordinated Universal Time (UTC)
                    and must be terminated by the <literal>Z</literal> time zone indicator.</para>

                <para>Although not a part of the package metadata, for referencing and other
                    purposes this specification requires that all string representations of the
                    identifier be constructed using the <literal>@</literal> character as the
                    separator (i.e., of the form "id<literal>@</literal>date"). Whitespace must not
                    be included when concatenating the strings.</para>

                <note>
                    <para>It is possible that the separator character may occur in the unique
                        identifier, as unique identifiers may be any string value. The Package
                        Identifier consequently must be split on the last instance of the
                            <literal>@</literal> character when decomposing it into its component
                        parts.</para>
                </note>

                <informalexample>
                    <para>The following example shows how a unique identifier and modification date
                        are combined to form the Package Identifier.</para>
                    <synopsis><xi:include href="examples/publications/package-identifier.xml" parse="text"/></synopsis>
                </informalexample>

                <para>The Package Identifier does not supersede the unique identifier, but
                    represents the means by which different versions of the same Publication can be
                    identified in distribution channels and by Reading Systems. The sequential
                    (i.e., chronological) order inherent in the required format of the date stamp
                    also places Publications in order without requiring knowledge of the exact
                    identifier that came before.</para>

                <para>The Package Identifier consequently allows a set of Publications to be
                    inspected to determine if they represent the same the same version of the same
                    Publication, different versions of a single Publication or any combination of
                    differing and similar Publications.</para>

                <note>
                    <para>Although it is possible in some instances that the most recent version of
                        a Publication may not be the authoritative version, or that parallel
                        branches of the same Publication may exist, production control problems such
                        as these are outside the scope of this specification.</para>
                </note>

                <para/>

            </section>
        </section>

        <section xml:id="sec-package-metadata-dcmi-transition">
            <title>Dublin Core Metadata Vocabulary Transition</title>

            <para>This specification represents a shift from using traditional XML-based grammars to
                express Publication metadata to an approach based on a standardized syntax that
                incorporates well-defined terms from external vocabularies. Unlike XML grammars,
                which intrude into host grammars, often require special extensions and require
                learning the new grammar to implement, the new approach represents a more fluid
                means of expressing metadata: a few container elements are now capable of expressing
                the full range of Publication metadata and provide a predictable way to add and
                extend using industry-standard vocabularies.</para>

            <para>Although support for the expression of metadata allows properties from a wide
                variety of vocabularies to be easily incorporated to express and refine information
                about an <xref linkend="gloss-epub-publication"/>, it is not expected that all
                Reading Systems will be able to handle this transition initially. To ensure that
                older Reading Systems that require the presence of the required DCMES elements do
                not fail to open new EPUB Publications, this specification represents a
                transitionary stage, incorporating both methods of metadata expression.</para>

            <para>While this specification requires the use of the <xref linkend="refDCMES"/>
                <code>title</code>, <code>identifier</code> and <code>language</code> elements,
                their deprecation is expected in a future version. Content authors are consequently
                encouraged to begin using the new properties from the <xref linkend="refDCTERMS"/>
                vocabulary, including the properties that supersede the required DCMES elements. The
                    <code role="linkwrap"><link role="codelink"
                        linkend="attrdef-dcidentifier-prefer">prefer</link></code> attribute has
                been added to each DCMES element to allow authors to designate the new property that
                replaces the element during this transitionary phase, which also ensures that EPUB
                Publications created to this specification will continue to function when element
                support is phased out. </para>
        </section>

        <section xml:id="sec-package-metadata-properties">
            <title>Metadata Properties</title>

            <section xml:id="elemdef-opf-meta-overview" conformance="informative">
                <title>Overview</title>

                <para> The following sections enumerate key properties — both defined as part of
                    this specification and by external agencies — that Reading Systems must
                    minimally recognize.</para>

                <para>It is not intended to be a comprehensive list of vocabularies or properties
                    that can be used to add or annotate package metadata. </para>

                <para>Property usage examples in the following sections have been drawn from the
                        <link linkend="sec-meta-elem-examples"><code>metadata</code> examples</link>
                    whenever possible. Refer to those examples for fuller context.</para>
            </section>

            <section xml:id="sec-meta-property-values">
                <title>Metadata <code>meta</code> properties</title>

                <section xml:id="elemdef-opf-meta-property-values-dcterms">
                    <title>DCTERMS</title>

                    <para>The <literal>meta</literal> element <literal>property</literal> attribute
                        may define any property from DCMI Metadata Terms <xref linkend="refDCTERMS"
                        /> for expressing metadata about the package and its contents.</para>

                    <para> For more information about these properties and their use, please refer
                        to the vocabulary. </para>

                    <para>For specific restrictions and requirements imposed by this specifiction on
                        the <literal>language</literal> and <literal>modified</literal> properties,
                        refer to <xref linkend="elemdef-opf-dclanguage"/> and <xref
                            linkend="sec-opf-metadata-identifiers-pid"/>, respectively.</para>

                </section>

                <section xml:id="elemdef-opf-meta-property-values-package"
                    xreflabel="Package Properties">
                    <title>Package</title>

                    <para>Package properties define information about the package and should not be
                        used to annotate other properties. These properties are defined canonically
                        in the <link xlink:href="http://www.idpf.org/epub/30/vocab/package/">EPUB 3
                            Package Metadata Vocabulary</link>. </para>

                    <para>Package properties must not be attached to other metadata elements and
                        properties using the <literal>about</literal> attribute. The cardinality
                        property in the following tables refers only to the number of times the
                        property may be included in the <literal>metadata</literal> section.</para>

                    <para>The following tables detail the available properties.</para>

                    <informaltable xml:id="rdfa-package-vocab-package">
                        <info role="rdfa-vocab-info">
                            <annotation>
                                <para>Package-level properties</para>
                            </annotation>
                        </info>
                        <!-- unclear if still neeed with package identifier
                            <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                            <row>
                            <entry spanname="s1" role="rdfa-property"
                            xml:id="propdef-content-version">
                            <literal>content-version</literal>
                            </entry>
                            </row>
                            <row>
                            <entry role="rdfa-property-header">Description:</entry>
                            <entry role="rdfa-property-desc">The
                            <literal>content-version</literal> property
                            provides the version of the publication. The
                            semantics of the three segments and how they are
                            incremented for any given publication is not
                            defined, but authors are encouraged to treat them as
                            representing a major.mid.minor version value. Each
                            segment of the identifier must consist of one or
                            more alphanumeric characters. </entry>
                            </row>
                            <row>
                            <entry role="rdfa-property-header">Allowed
                            value(s):</entry>
                            <entry>A string of the form x.x.x</entry>
                            </row>
                            <row>
                            <entry role="rdfa-property-header">Cardinality:</entry>
                            <entry><literal>zero or one</literal></entry>
                            </row>
                            <row>
                            <entry role="rdfa-property-header">Example:</entry>
                            <entry>
                            <link linkend="sec-metadata-examples-version"
                            >[Example]</link>
                            </entry>
                            </row>
                            </tbody>
                            </tgroup>
                        -->
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-publication-type">
                                        <literal>publication-type</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The
                                            <literal>publication-type</literal> property indicates,
                                        that the given Publication is of a specialized type (e.g.
                                        annotations packaged in EPUB format or a dictionary). Each
                                        specification defining a specialized Publication type is
                                        expected to define the value to use. </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry><literal>xsd:string</literal></entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry><literal>zero or one</literal></entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta property="publication-type">dictionary</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-source-identifier"
                                        xreflabel="source-identifier">
                                        <literal>source-identifier</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The
                                            <literal>source-identifier</literal> property specifies
                                        the <literal>identifier</literal> of the source publication
                                        this <xref linkend="gloss-epub-publication"/> represents.
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>
                                        <literal>xsd:string</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry><literal>zero or one</literal></entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta property="source-identifier">urn:isbn:9780375704024</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-page-progression-direction"
                                        xreflabel="page-progression-direction property">
                                        <literal>page-progression-direction</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The
                                            <literal>page-progression-direction</literal> property
                                        indicates the global direction in which the publication
                                        content flows.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>
                                        <literal>rtl</literal> | <literal>ltr</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry><literal>zero or one</literal></entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta property="page-progression-direction">ltr</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>

                </section>

                <section xml:id="elemdef-opf-meta-property-values-ancillary">
                    <title>Ancillary</title>

                    <para>Ancillary properties represent metadata about metadata and are intended to
                        augment metadata defined elsewhere in the package. These properties are
                        defined canonically in the <link
                            xlink:href="http://www.idpf.org/epub/30/vocab/package/">EPUB 3 Package
                            Metadata Vocabulary</link>. </para>

                    <para>Ancillary properties must always be attached to another metadata element
                        or property using the <literal>about</literal> attribute.</para>

                    <para>The following tables detail the available properties.</para>

                    <informaltable xml:id="rdfa-package-vocab-ancillary">
                        <info role="rdfa-vocab-info">
                            <annotation>
                                <para>Ancillary properties</para>
                            </annotation>
                        </info>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-alternate-script"
                                        xreflabel="alternate-script property">
                                        <literal>alternate-script</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The
                                            <literal>alternate-script</literal> property provides an
                                        alternate expression of the associated property value in a
                                        language and script identified by the
                                            <literal>xml:lang</literal> attribute. The property is
                                        typically attached to <literal>creator</literal> and
                                            <literal>title</literal> properties for
                                        internationalization purposes.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>
                                        <literal>xsd:string</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or
                                            more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry>All properties.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta about="#creator" property="alternate-script" xml:lang="ja">村上 春樹</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-display-seq">
                                        <literal>display-seq</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The
                                            <literal>display-seq</literal> property indicates the
                                        numeric position in which to display the current property
                                        relative to identical metadata properties. For example, to
                                        indicate the order in which to render multiple
                                            <literal>title</literal>s.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>
                                        <literal>xsd:unsignedInt</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or
                                            more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry>All properties.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta about="#t2" property="display-seq">1</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <!-- removing until purpose is clarified
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property" xml:id="propdef-event">
                                        <literal>event</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The <literal>event</literal>
                                        property indicates a significant event in the lifecycle of a
                                        publication. Events are typically modify <literal>date</literal>
                                        elements or properties to provide the reason for a change to the
                                        publication. A set of standard values are defined for this
                                        property but no restrictions are imposed on the extension of
                                        this list.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry><literal>creation</literal> | <literal>meta-update</literal>
                                        | <literal>modification</literal> |
                                        <literal>publication</literal> |
                                        <literal>xsd:string</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry>
                                        <literal>dcterms:date</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <link linkend="sec-metadata-examples-identifier"
                                            >[Example]</link>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>-->
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-file-as">
                                        <literal>file-as</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The <literal>file-as</literal>
                                        property provides the normalized form of the associated
                                        property for sorting.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>
                                        <literal>xsd:string</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or
                                            more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry>All properties.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta about="#creator" property="file-as">Murakami, Haruki</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-meta-auth">
                                        <literal>meta-auth</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The
                                            <literal>meta-auth</literal> property provides the name
                                        of a party or authority responsible for an instance of
                                        package metadata.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>
                                        <literal>xsd:IDREF</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or
                                            more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry>All properties.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta about="isbn-id" property="meta-auth" id="meta-authority-01">Metadata Authority Inc.</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property" xml:id="propdef-role">
                                        <literal>role</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The <literal>role</literal>
                                        property describes the nature of work performed by a
                                            <literal>creator</literal> or
                                            <literal>contributor</literal>. For example, that they
                                        represent the author or editor of a publication.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>It is recommended that values be drawn from <link
                                            xlink:href="http://www.loc.gov/marc/relators/relacode.html"
                                            >MARC Code List for Relators</link> and <remark
                                            role="todo"><link
                                                xlink:href="http://www.editeur.org/files/ONIX%203/ONIX_Code_Lists_Issue_12_Changes.pdf"
                                                >ONIX 3.0 Code List 17</link></remark>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or
                                            more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry>
                                        <literal>contributor</literal>, <literal>creator</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta about="#creator" property="role">aut</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-scheme">
                                        <literal>scheme</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The <literal>scheme</literal>
                                        property identifies the formal system used to express the
                                        value of an <literal>identifier</literal> or
                                            <literal>subject</literal>.</entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>It is recommended that values be drawn from recognized
                                        scheme lists, such as <remark role="todo"><link
                                                xlink:href="http://www.editeur.org/files/ONIX%203/ONIX_Code_Lists_Issue_12_Changes.pdf"
                                                >ONIX 3.0 Code List 27</link></remark> for subjects.
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or
                                            more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry> All properties. </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta about="#pub-id" property="scheme">uuid</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-group-position">
                                        <literal>group-position</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">
                                        <para>The <literal>group-position</literal> property
                                            indicates the numeric position in which the Publication
                                            is ordered relative to other works belonging to the same
                                            group (whether all EPUBs or not). The value of this
                                            property must be an integer or series of decimal
                                            point-separated numbers (e.g., <literal>1</literal> or
                                                <literal>2.2.1</literal>).</para>
                                        <para>The <literal>group-position</literal> property can be
                                            attached to any metadata property that establishes the
                                            group (such as a series title) or can be attached to an
                                                <literal>isPartOf</literal> property <xref
                                                linkend="refDCTERMS"/> whose value defines the
                                            group.</para>
                                        <para>A Publication can belong to more than one
                                            group.</para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>
                                        <literal>xsd:unsignedInt</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or
                                            more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry> All properties. </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta about="#t3" property="group-position">2</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                        <tgroup cols="2">
                            <colspec colname="c1"/>
                            <colspec colname="c2"/>
                            <spanspec spanname="s1" namest="c1" nameend="c2"/>
                            <tbody>
                                <row>
                                    <entry spanname="s1" role="rdfa-property"
                                        xml:id="propdef-title-type">
                                        <literal>title-type</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Description:</entry>
                                    <entry role="rdfa-property-desc">The
                                            <literal>title-type</literal> property indicates the
                                        form or nature of a <literal>title</literal>. A set of
                                        standard values are defined for this property but no
                                        restrictions are imposed on the extension of this list.
                                            <remark role="todo"><link
                                                xlink:href="http://code.google.com/p/epub-revision/issues/detail?id=49"
                                                >Issue 49</link></remark>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Allowed value(s):</entry>
                                    <entry>
                                        <literal>primary</literal> | <literal>short</literal> |
                                            <literal>long</literal> | <literal>sub</literal> |
                                            <literal>series</literal> |
                                            <literal>collection</literal> |
                                            <literal>edition</literal> | <literal>slang</literal>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Extends:</entry>
                                    <entry>
                                        <literal>title</literal>, </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Cardinality:</entry>
                                    <entry role="rdfa-cardinality">
                                        <para>In the metadata section: <code>zero or
                                            more</code></para>
                                        <para>Attached to other metadata: <code>zero or
                                            one</code></para>
                                    </entry>
                                </row>
                                <row>
                                    <entry role="rdfa-property-header">Example:</entry>
                                    <entry>
                                        <code role="prop-example"
                                            ><![CDATA[<meta about="#title" property="title-type">primary</meta>]]></code>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </section>
            </section>

            <section xml:id="sec-link-rel-values">
                <title>Metadata <code>link</code> properties</title>

                <para>The following tables define properties for use in the <code>metadata</code>
                    <code role="linkwrap"><xref role="codelink" linkend="sec-link-elem"/></code>
                    element <code><xref linkend="attrdef-link-rel"/></code> attribute.
                    <!--
                        These values are defined canonically in the <link linkend="refEPUBPackageVocab"
                        >EPUB 3 Package Metadata Vocabulary</link>. -->
                </para>

                <informaltable xml:id="rdfa-package-vocab-metarec">
                    <info role="rdfa-vocab-info">
                        <annotation>
                            <para>Metadata record propeties</para>
                        </annotation>
                    </info>
                    <tgroup cols="2" xml:id="onix-record">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property"
                                    xml:id="propdef-onix-record">
                                    <literal>onix-record</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>onix-record</literal>
                                    property indicates the referenced resource is an ONIX record
                                        <xref linkend="refONIX"/>. </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or one</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Extends:</entry>
                                <entry>Only applies to the Publication. Must not be used when the
                                        <code role="linkwrap"><link role="codelink"
                                            linkend="attrdef-link-about">about</link></code>
                                    attribute is present.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Example:</entry>
                                <entry>
                                    <code role="prop-example"
                                        ><![CDATA[<link rel="onix-record" href="pub/meta/nor-wood-onix.xml"/>]]></code>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>

                    <tgroup cols="2" xml:id="mods-record">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property"
                                    xml:id="propdef-mods-record">
                                    <literal>mods-record</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>mods-record</literal>
                                    property indicates the referenced resource is a MODS record
                                        <xref linkend="refMODS"/>. </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or one</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Extends:</entry>
                                <entry>Only applies to the Publication. Must not be used when the
                                        <code role="linkwrap"><link role="codelink"
                                            linkend="attrdef-link-about">about</link></code>
                                    attribute is present.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Example:</entry>
                                <entry>
                                    <code role="prop-example"
                                        ><![CDATA[<link rel="mods-record" href="pub/meta/nor-wood-mods.xml"/>]]></code>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>

                    <tgroup cols="2" xml:id="xmp-record">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property"
                                    xml:id="propdef-xmp-record">
                                    <literal>xmp-record</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>xmp-record</literal>
                                    property indicates the referenced resource is an XMP record
                                        <xref linkend="refXMP"/>. </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or one</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Extends:</entry>
                                <entry>Only applies to the Publication. Must not be used when the
                                        <code role="linkwrap"><link role="codelink"
                                            linkend="attrdef-link-about">about</link></code>
                                    attribute is present.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Example:</entry>
                                <entry>
                                    <code role="prop-example"
                                        ><![CDATA[<link rel="xmp-record" href="pub/meta/nor-wood-xmp.xml"/>]]></code>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>

                    <tgroup cols="2" xml:id="marc21xml-record">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property"
                                    xml:id="propdef-marc21xml-record">
                                    <literal>marc21xml-record</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The
                                        <literal>marc21xml-record</literal> property indicates the
                                    referenced resource is a MARC21 record <xref
                                        linkend="refMARC21XML"/>. </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or one</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Extends:</entry>
                                <entry>Only applies to the Publication. Must not be used when the
                                        <code role="linkwrap"><link role="codelink"
                                            linkend="attrdef-link-about">about</link></code>
                                    attribute is present.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Example:</entry>
                                <entry>
                                    <code role="prop-example"
                                        ><![CDATA[<link rel="marc21xml-record" href="pub/meta/nor-wood-marc21.xml"/>]]></code>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property" xml:id="propdef-signature">
                                    <literal>xml-signature</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">
                                    <para>The <literal>xml-signature</literal> property indicates
                                        the referenced resource contains an XML Signature <xref
                                            linkend="refXMLDSIGCORE"/> for the Publication or
                                        associated property.</para>
                                    <para>The <code>link</code> element's <code>href</code>
                                        attribute typically references a specific
                                            <code>signature</code> element in the Signatures.xml
                                        file <xref linkend="refOCF30"/> via a fragment
                                        identifier.</para>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or more</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Extends:</entry>
                                <entry>All properties.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Example:</entry>
                                <entry>
                                    <code role="prop-example"
                                        ><![CDATA[<link about="#meta-authority-01" rel="xml-signature" href="../META-INF/signatures.xml#MAI-Signature"/>]]></code>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>

                </informaltable>

            </section>

            <section xml:id="sec-item-property-values">
                <title>Manifest <code>item</code> properties</title>

                <para>The following tables define properties for use in the <code>manifest</code>
                    <code role="linkwrap"><xref role="codelink" linkend="sec-item-elem"/></code>
                    element <code><xref linkend="attrdef-item-property"/></code> attribute.</para>

                <para>The <literal>Applies to</literal> field indicates which Publication Resource
                    type(s) the given property may be specified on, the
                        <literal>Cardinality</literal> field indicates the number of times the
                    property must appear within the Package Document scope, and the
                        <literal>Usage</literal> field indicates usage conditions.</para>

                <informaltable xml:id="rdfa-package-vocab-manifest">
                    <info role="rdfa-vocab-info">
                        <annotation>
                            <para>Manifest <code>item</code> metadata properties</para>
                        </annotation>
                    </info>
                    <tgroup cols="2" xml:id="cover-image">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property"
                                    xml:id="propdef-cover-image" xreflabel="cover-image">
                                    <literal>cover-image</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>cover-image</literal>
                                    property identifies the described Publication Resource as the
                                    cover image for the Publication.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Applies to:</entry>
                                <entry>All <link linkend="tbl-core-media-types">raster and vector
                                        image types</link></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or one</code>
                                    <remark role="todo"><link
                                            xlink:href="http://code.google.com/p/epub-revision/issues/detail?id=45"
                                            >Issue 45</link></remark></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Usage:</entry>
                                <entry>Optional</entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2" xml:id="mathml">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property" xml:id="propdef-mathml"
                                    xreflabel="mathml">
                                    <literal>mathml</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>mathml</literal>
                                    property indicates that the described Publication Resource
                                    contains one or more instances of MathML markup.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Applies to:</entry>
                                <entry><xref linkend="gloss-content-document-epub"/>s</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or more</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Usage:</entry>
                                <entry>Must be set if and only if the criterion specified in
                                        <code>Description</code> above is met.</entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2" xml:id="nav">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property" xml:id="propdef-nav"
                                    xreflabel="nav">
                                    <literal>nav</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>nav</literal> property
                                    indicates that the described Publication Resource constitutes
                                    the <xref linkend="gloss-content-document-epub-nav"/> of the
                                    Publication.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Applies to:</entry>
                                <entry>The <xref linkend="gloss-content-document-epub-nav"/>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Exactly one</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Usage:</entry>
                                <entry>Required</entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2" xml:id="remote-resources">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property"
                                    xml:id="propdef-remote-resources" xreflabel="remote-resources">
                                    <literal>remote-resources</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The
                                        <literal>remote-resources</literal> property indicates that
                                    the described Publication Resource contains one or more internal
                                    references to other Publication Resources that are located
                                    outside of the <xref linkend="gloss-container"/> (refer to <xref
                                        linkend="sec-resource-locations"/> for more
                                    information).</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Applies to:</entry>
                                <entry>All Publication Resources with the capability of internal
                                    referencing (e.g., <xref
                                        linkend="gloss-content-document-epub-xhtml"/>s, <xref
                                        linkend="gloss-content-document-epub-svg"/>s, <xref
                                        linkend="gloss-stylesheet"/>s and <xref
                                        linkend="gloss-media-overlay-document"/>s)</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or more</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Usage:</entry>
                                <entry>Must be set if and only if the criterion specified in
                                        <code>Description</code> above is met.</entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2" xml:id="scripted">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property" xml:id="propdef-scripted"
                                    xreflabel="scripted">
                                    <literal>scripted</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>scripted</literal>
                                    property indicates that the described Publication Resource is a
                                        <xref linkend="gloss-content-document-epub-scripted"/> (i.e.,
                                    contains scripted content and/or elements from <code>HTML5
                                        forms</code>).</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Applies to:</entry>
                                <entry><xref linkend="gloss-content-document-epub"/>s</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or more</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Usage:</entry>
                                <entry>Must be set if and only if the criterion specified in
                                        <code>Description</code> above is met.</entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2" xml:id="svg">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property" xml:id="propdef-svg"
                                    xreflabel="svg">
                                    <literal>svg</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The <literal>svg</literal> property
                                    indicates that the described Publication Resource contains one
                                    or more instances of SVG markup.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Applies to:</entry>
                                <entry><xref linkend="gloss-content-document-epub-xhtml"/>s; the
                                    value is implied for <xref
                                        linkend="gloss-content-document-epub-svg"/>s.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or more</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Usage:</entry>
                                <entry>Must be set if and only if the criterion specified in
                                        <code>Description</code> above is met.</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </informaltable>

                <para xml:id="manifest-item-properties-recursive">The <code>mathml</code>,
                        <code>remote-resources</code>, <code>scripted</code> and <code>svg</code>
                    properties are recursive; they must be specified on applicable
                    <code>item</code>s regardless of whether the property holds true for the
                    resource described by the current <code>item</code> element or to a resource
                    embedded within it (e.g., the <code>scripted</code> property must be specified
                    on an <code>item</code> element representing a non-scripted XHTML Content
                    Document if it embeds a Scripted Content Document).</para>

                <bridgehead xml:id="examples-item-properties"
                    xreflabel="Manifest item properties examples">Examples</bridgehead>

                <informalexample xml:id="example-item-properties-nav">
                    <para>The following example shows a <code>manifest</code>
                        <code role="linkwrap"><xref role="codelink" linkend="sec-item-elem"/></code>
                        element that represents the <xref linkend="gloss-content-document-epub-nav"
                        /> of a Publication.</para>
                    <synopsis><xi:include href="./examples/publications/manifest-item-nav.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample xml:id="example-item-properties-cover-image">
                    <para>The following example shows a <code>manifest</code>
                        <code>item</code> element that represents the cover image of a
                        Publication.</para>
                    <synopsis><xi:include href="./examples/publications/manifest-item-cover-image.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample xml:id="example-item-properties-scripted-mathml">
                    <para>The following example shows a <code>manifest</code>
                        <code role="linkwrap">item</code> element representing a <xref
                            linkend="gloss-content-document-epub-scripted"/> that also contains
                        embedded <code>MathML</code>.</para>
                    <synopsis><xi:include href="./examples/publications/manifest-item-properties-1.xml" parse="text"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-itemref-property-values">
                <title>Spine <code>itemref</code> properties</title>

                <para>The following tables define properties for use in the <code role="linkwrap"
                            ><xref role="codelink" linkend="sec-itemref-elem"/></code> element
                            <code><xref linkend="attrdef-itemref-property"/></code>
                    attribute.</para>

                <para>The <literal>Cardinality</literal> field indicates the number of times the
                    property must appear within the Package Document scope, and the
                        <literal>Usage</literal> field indicates usage conditions.</para>

                <informaltable xml:id="rdfa-package-vocab-spine">
                    <info role="rdfa-vocab-info">
                        <annotation>
                            <para>Spine <code>itemref</code> metadata properties</para>
                        </annotation>
                    </info>
                    <tgroup cols="2" xml:id="left">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property"
                                    xml:id="propdef-page-spread-left">
                                    <literal>page-spread-left</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The
                                        <literal>page-spread-left</literal> property indicates that
                                    the first page of the associated <code>item</code>'s <xref
                                        linkend="gloss-content-document-epub"/> represents the
                                    left-hand side of a two-page spread.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or more</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Usage:</entry>
                                <entry>Optional. This property must not be specified on an
                                        <code>itemref</code> that also specifies the
                                        <literal>page-spread-right</literal> property.</entry>
                            </row>
                        </tbody>
                    </tgroup>
                    <tgroup cols="2" xml:id="right">
                        <colspec colname="c1"/>
                        <colspec colname="c2"/>
                        <spanspec spanname="s1" namest="c1" nameend="c2"/>
                        <tbody>
                            <row>
                                <entry spanname="s1" role="rdfa-property"
                                    xml:id="propdef-page-spread-right">
                                    <literal>page-spread-right</literal>
                                </entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Description:</entry>
                                <entry role="rdfa-property-desc">The
                                        <literal>page-spread-right</literal> property indicates that
                                    the first page of the associated <code>item</code>'s <xref
                                        linkend="gloss-content-document-epub"/> represents the
                                    right-hand side of a two-page spread.</entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Cardinality:</entry>
                                <entry role="rdfa-cardinality"><code>Zero or more</code></entry>
                            </row>
                            <row>
                                <entry role="rdfa-property-header">Usage:</entry>
                                <entry>Optional. This property must not be specified on an
                                        <code>itemref</code> that also specifies the
                                        <literal>page-spread-left</literal> property.</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </informaltable>

                <bridgehead xml:id="examples-itemref-properties"
                    xreflabel="Spine itemref properties examples">Examples</bridgehead>

                <informalexample xml:id="example-itemref-multicol">
                    <para>The following example shows how a two-page spread of a map might be
                        indicated in the <code>spine</code>.</para>
                    <synopsis><xi:include href="./examples/publications/spine-itemref-pagespread.xml" parse="text"/></synopsis>
                </informalexample>

            </section>

        </section>

    </chapter>

    <chapter xml:id="sec-publication-resources">
        <title>Publication Resources</title>

        <section xml:id="sec-core-media-types">
            <title>Core Media Types</title>

            <para>The following table lists the <link linkend="gloss-core-media-type">EPUB 3 Core
                    Media Types</link>. When a <xref
                    linkend="gloss-publication-resource-cmt-or-foreign"/> conforms to a Core Media
                Type specification, it is a <xref linkend="gloss-publication-resource-cmt"/> and can
                be included in the Publication without the provision of fallbacks (refer to <xref
                    linkend="sec-fallback-processing-flow"/> for more information).</para>

            <para>The columns in the table represent the following information:</para>
            <variablelist xml:id="tbl-cmt-expl">
                <varlistentry>
                    <term>MIME String</term>
                    <listitem>
                        <para>The MIME type <xref linkend="refRFC2046"/> used to represent the given
                            Publication Resource in the <xref linkend="sec-manifest-elem"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Content Type Definition</term>
                    <listitem>
                        <para>The specification to which the given <xref
                                linkend="gloss-publication-resource-cmt"/> must conform.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Applies to</term>
                    <listitem>
                        <para>The Publication Resource type(s) that the MIME String and Content Type
                            Definition applies to.</para>
                    </listitem>
                </varlistentry>
            </variablelist>

            <table xml:id="tbl-core-media-types">
                <caption>EPUB Core Media Types</caption>
                <thead>
                    <tr>
                        <th xml:id="tbl-cmt-string">MIME String</th>
                        <th xml:id="tbl-cmt-def">Content Type Definition</th>
                        <th xml:id="tbl-cmt-appl">Applies to</th>
                    </tr>
                </thead>
                <tbody>
                    <tr xml:id="cmt-grp-image" xreflabel="Image Core Media Types">
                        <th colspan="3"> Image Types </th>
                    </tr>
                    <tr xml:id="cmt-gif" xreflabel="image/gif">
                        <td>
                            <literal>image/gif</literal>
                        </td>
                        <td>
                            <xref linkend="refGIF"/>
                        </td>
                        <td headers="tbl-cmt-appl">GIF
                            Images<!-- (typically embedded in <xref
                                linkend="gloss-content-document-epub-xhtml"/>s or <xref
                                linkend="gloss-content-document-epub-svg"/>s).--></td>
                    </tr>

                    <tr xml:id="cmt-jpeg" xreflabel="image/jpeg">
                        <td>
                            <code>image/jpeg</code>
                        </td>
                        <td>
                            <xref linkend="refJPEG"/>
                        </td>
                        <td headers="tbl-cmt-appl">JPEG
                            Images<!-- (typically embedded in <xref
                                linkend="gloss-content-document-epub-xhtml"/>s or <xref
                                linkend="gloss-content-document-epub-svg"/>s).--></td>
                    </tr>

                    <tr xml:id="cmt-png" xreflabel="image/png">
                        <td>
                            <code>image/png</code>
                        </td>
                        <td>
                            <xref linkend="refPNG"/>
                        </td>
                        <td headers="tbl-cmt-appl">PNG
                            Images<!-- (typically embedded in <xref
                                linkend="gloss-content-document-epub-xhtml"/>s or <xref
                                linkend="gloss-content-document-epub-svg"/>s).--></td>
                    </tr>
                    <tr xml:id="cmt-svg11" xreflabel="image/svg+xml">
                        <td>
                            <code>image/svg+xml</code>
                        </td>
                        <td>
                            <olink type="epub-spec" targetdoc="contentdocs" targetptr="sec-svg"/>
                        </td>
                        <td headers="tbl-cmt-appl">SVG
                            documents<!-- (typically embedded in <xref
                                linkend="gloss-content-document-epub-xhtml"/>s or as standalone
                                <xref linkend="gloss-content-document-epub-svg"/>s). --></td>
                    </tr>

                    <tr xml:id="cmt-grp-content-documents" xreflabel="Application Core Media Types">
                        <th colspan="3"> Application Types </th>
                    </tr>

                    <tr xml:id="cmt-xhtml" xreflabel="application/xhtml+xml">
                        <td>
                            <code>application/xhtml+xml</code>
                        </td>
                        <td>
                            <olink type="epub-spec" targetdoc="contentdocs" targetptr="sec-xhtml"/>
                        </td>
                        <td headers="tbl-cmt-appl"><xref linkend="gloss-content-document-epub-xhtml"
                            />s and the <xref linkend="gloss-content-document-epub-nav"/>. </td>
                    </tr>
                    <tr xml:id="cmt-ncx" xreflabel="application/x-dtbncx+xml">
                        <td>
                            <code>application/x-dtbncx+xml</code>
                        </td>
                        <td>
                            <xref linkend="refOPF2"/>
                        </td>
                        <td headers="tbl-cmt-appl">The <link linkend="note-ncx">superseded</link>
                            NCX </td>
                    </tr>
                    <tr xml:id="cmt-opentype" xreflabel="application/vnd.ms-opentype">
                        <td>
                            <code>application/vnd.ms-opentype</code>
                        </td>
                        <td>
                            <xref linkend="refOpenType"/>
                        </td>
                        <td headers="tbl-cmt-appl">OpenType fonts</td>
                    </tr>
                    <tr xml:id="cmt-woff" xreflabel="application/font-woff">
                        <td>
                            <code>application/font-woff</code>
                        </td>
                        <td>
                            <xref linkend="refWOFF"/>
                        </td>
                        <td headers="tbl-cmt-appl">WOFF fonts</td>
                    </tr>
                    <tr xml:id="cmt-smil" xreflabel="application/smil+xml">
                        <td>
                            <code>application/smil+xml</code>
                        </td>
                        <td>
                            <xref linkend="refOverlays3"/>
                        </td>
                        <td headers="tbl-cmt-appl">EPUB Media Overlay documents</td>
                    </tr>
                    <tr xml:id="cmt-pls" xreflabel="application/pls+xml">
                        <td>
                            <code>application/pls+xml</code>
                        </td>
                        <td>
                            <xref linkend="refPLS"/>
                        </td>
                        <td headers="tbl-cmt-appl"><xref linkend="gloss-tts"/> Pronunciation
                            lexicons</td>
                    </tr>
                    <tr xml:id="cmt-grp-audio" xreflabel="Audio Core Media Types">
                        <th colspan="3"> Audio Types </th>
                    </tr>
                    <tr xml:id="cmt-mp3" xreflabel="audio/mpeg">
                        <td>
                            <code>audio/mpeg</code> (<remark role="todo"><link
                                    xlink:href="http://tools.ietf.org/html/rfc3003"
                                >RFC3003</link></remark>) </td>
                        <td>
                            <xref linkend="refMP3"/>
                        </td>
                        <td headers="tbl-cmt-appl">MP3 audio</td>
                    </tr>
                    <tr xml:id="cmt-mp4-aac" xreflabel="audio/aac">
                        <td>
                            <code>audio/aac</code>
                        </td>
                        <td>
                            <xref linkend="refAAC"/>
                        </td>
                        <td headers="tbl-cmt-appl"> Used for MP4 AAC LC audio when not embedded in
                            the <link linkend="cmt-h264">video container</link>. Reading System
                            support only required when the Reading System also supports <xref
                                linkend="cmt-h264"/></td>
                    </tr>
                    <tr xml:id="cmt-grp-video" xreflabel="Video Core Media Types">
                        <th colspan="3"> Video Types </th>
                    </tr>
                    <tr xml:id="cmt-h264" xreflabel="video/mp4">
                        <td>
                            <code>video/mp4</code>
                            <remark role="todo"><link
                                    xlink:href="http://code.google.com/p/epub-revision/issues/detail?id=75"
                                    >Issue 75</link></remark>
                        </td>
                        <td>
                            <xref linkend="refH264"/>
                        </td>
                        <td headers="tbl-cmt-appl">MPEG-4 video; must use H.264 Basic Profile video
                            and MP4 AAC LC audio <xref linkend="refAAC"/>. (In HTML
                                <code>video</code> element <code>type</code> attribute:
                                <literal>"video/mp4; codecs='avc1.42E01E,
                            mp4a.40.2'"</literal>)</td>
                    </tr>
                    <tr xml:id="cmt-grp-text" xreflabel="Text Core Media Types">
                        <th colspan="3"> Text Types </th>
                    </tr>

                    <tr xml:id="cmt-css" xreflabel="text/css">
                        <td>
                            <code>text/css</code>
                        </td>
                        <td>
                            <olink type="epub-spec" targetdoc="contentdocs" targetptr="sec-css"/>
                        </td>
                        <td headers="tbl-cmt-appl"><xref linkend="gloss-stylesheet"/>s. </td>
                    </tr>

                </tbody>
            </table>

        </section>

        <section xml:id="sec-fallback-processing-flow">
            <title>Fallback Requirements and Processing Flow </title>
            <section xml:id="sec-fallback-processing-flow-intro">
                <title>Introduction</title>
                <para><xref linkend="gloss-epub-publication"/>s may reference <xref
                        linkend="gloss-publication-resource-foreign"/>s. In order to ensure that all
                    EPUB Publications can be successfully rendered by Reading Systems, alternative
                    fallback resources must be provided for each such resource.</para>
                <para>Fallbacks are provided either via intrinsic mechanisms defined for certain
                    Publication Resource types, or via a manifest-level fallback mechanism. These
                    mechanisms are defined in this section. </para>
            </section>
            <section xml:id="sec-fallback-processing-flow-manifest">
                <title>Manifest fallback</title>

                <para>Unless one of the exceptions defined in <xref
                        linkend="sec-fallback-processing-flow-intrinsic"/> apply, fallbacks must be
                    provided for each <xref linkend="gloss-publication-resource-foreign"/> using the
                        <code role="linkwrap"><xref role="codelink" linkend="attrdef-item-fallback"
                        /></code> attribute on the <code>manifest</code>
                    <code role="linkwrap"><xref role="codelink" linkend="elemdef-package-item"
                        /></code> element that represents the Foreign Resource.</para>

                <para>The <code>fallback</code> attribute's IDREF <xref linkend="refXML"/> value
                    must resolve to another <code>item</code> in the <literal>manifest</literal>.
                    This fallback <code>item</code> may itself specify another fallback
                        <code>item</code>, and so on. The ordered list of all the ID references that
                    can be reached starting from a given item's <code>fallback</code> attribute
                    represents the fallback chain for that item. A fallback chain must contain at
                    least one <xref linkend="gloss-publication-resource-cmt"/> and must not contain
                    any circular- or self-references to <code>item</code>s in the chain.</para>

                <para>A Reading System that does not support the Media Type of a given Publication
                    Resource must traverse the fallback chain until it encounters a supported
                    Publication Resource. The resource identified by the fallback item is then used
                    in place of the unsupported item.</para>

                <para>Fallbacks may also be provided for Publication Resources that are Core Media
                    Type Resources; a Reading System may choose to utilize such fallbacks in order
                    to find the optimal version of a resource to render in a given context. An
                    example of when this feature can be utilized is when providing <olink
                        type="epub-spec" targetdoc="contentdocs"
                        targetptr="confreq-cd-scripted-flbk">fallbacks for scripted
                    content</olink>.</para>

                <note>
                    <para>Manifest fallback is required for <link linkend="confreq-spine-itemtypes"
                            >any Publication Resource referenced from the spine</link> that is not
                        an EPUB Content Document.</para>
                </note>

                <para><remark role="todo">TODO Fallbacks for xhtml-nav, and possibly other core
                        media types, are not legal. Determine which they are and add
                    here.</remark></para>

            </section>
            <section xml:id="sec-fallback-processing-flow-intrinsic">
                <title>Intrinsic fallback</title>

                <para>This section defines a set of exceptions to the general requirements for
                    manifest-level fallbacks for <xref linkend="gloss-publication-resource-foreign"
                    />s. If none of these exceptions apply to a given Foreign Resource reference,
                    then the <link linkend="sec-fallback-processing-flow-manifest">manifest fallback
                        mechanism</link> must be used to supply a <xref
                        linkend="gloss-publication-resource-cmt"/> fallback.</para>

                <section xml:id="sec-fallback-processing-flow-xhtml-intrinsic"
                    xreflabel="Intrinsic Fallback: XHTML Content Documents">
                    <title>XHTML Content Documents</title>

                    <variablelist role="conformance-list">
                        <varlistentry xml:id="fallback-processing-xhtml-object">
                            <term><code>object</code></term>
                            <listitem>
                                <para>For Foreign Resources referenced via HTML5 <code>object</code>
                                    elements, Core Media Type fallback(s) must be provided via that
                                    element’s intrinsic replacement capabilities.</para>
                                <para>Reading Systems must ignore manifest-level fallbacks in
                                    resolving such references. (Note that the <code><link
                                            linkend="sec-bindings-elem">bindings</link></code>
                                    element provides a type of fallback mechanism, but does not
                                    ensure that content can be rendered on all Reading Systems
                                    regardless of scripting support).</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry xml:id="fallback-processing-xhtml-img">
                            <term><code>img</code></term>
                            <listitem>
                                <para> For Foreign Resources referenced via HTML5 <code>img</code>
                                    elements, the text value of the <code>alt</code> and
                                        <code>title</code> attributes provides a legitimate fallback
                                    and should be included. Additional manifest-level fallbacks may
                                    be provided. </para>
                                <para>Reading Systems should process manifest-level fallbacks in
                                    resolving such references. </para>
                            </listitem>
                        </varlistentry>
                        <varlistentry xml:id="fallback-processing-xhtml-source">
                            <term><code>source</code></term>
                            <listitem>
                                <para> For Foreign Resources referenced via HTML5
                                        <code>source</code> elements when used inside <code><link
                                            xlink:href="http://www.w3.org/TR/html5/video.html#media-element"
                                            >media elements</link></code>, Core Media Type
                                    fallback(s) must be provided in at least one <code>source</code>
                                    child element of the given media element.</para>
                                <para>Reading Systems must ignore manifest-level fallbacks in
                                    resolving such references.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                    <note>
                        <para>As defined in <olink type="epub-spec" targetdoc="contentdocs"
                                targetptr="confreq-cd-xhtml-refprops-iframe"/>, only XHTML Content
                            Documents must be referenced via <code>iframe</code> elements; the
                            provision of fallbacks for Foreign Resources is therefore inapplicable
                            to <code>iframe</code> elements.</para>
                    </note>

                </section>

                <section xml:id="sec-fallback-processing-flow-fonts"
                    xreflabel="Intrinsic fallback: CSS Embedded Fonts">
                    <title>CSS Style Sheets</title>

                    <variablelist role="conformance-list">
                        <varlistentry xml:id="fallback-processing-css-fonts">
                            <term>Embedded Fonts</term>
                            <listitem>
                                <para>For fonts embedded in Content Documents or EPUB Style Sheets
                                    using the <code>@font-face</code> mechanism, the rules of CSS <!-- Reference CSS3 Font rather than CSS2.1 for the definition of font fallback, as instructred by 
John Daggett. -->
                                    <xref linkend="refCSS3FontsModule"/> must be used to provide a
                                    fallback in case a non-core media type font format is used. Such
                                    fallback must be a Core Media Type embedded font or generic font
                                    reference.</para>
                                <para>Reading Systems must ignore manifest-level fallbacks in
                                    resolving CSS font references.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </section>

            </section>
        </section>

        <section xml:id="sec-resource-locations">
            <title>Publication Resource Locations</title>

            <para>All <xref linkend="gloss-publication-resource-cmt-or-foreign"/>s must be located
                in the <xref linkend="gloss-container"/>, with the following exceptions:</para>

            <itemizedlist role="conformance-list">
                <listitem xml:id="sec-resource-locations-audio">
                    <para><link linkend="cmt-grp-audio">Audio resources</link> may be located in the
                        Container or remotely.</para>
                </listitem>
                <listitem xml:id="sec-resource-locations-video">
                    <para><link linkend="cmt-grp-video">Video resources</link> may be located in the
                        Container or remotely.</para>
                </listitem>
            </itemizedlist>

            <para>Authors should prefer locating audio and video resources in the Container to allow
                the user access to the entire presentation regardless of connectivity status.</para>

            <note>
                <para>These rules for Publication Resource locations apply regardless of whether the
                    given resource is a <xref linkend="gloss-publication-resource-cmt"/> or a <xref
                        linkend="gloss-publication-resource-foreign"/>.</para>
            </note>

            <note>
                <para>The inclusion of remote resources in an <xref linkend="gloss-epub-publication"
                    /> is indicated via the <literal role="linkwrap"><xref role="codelink"
                            linkend="propdef-remote-resources"/></literal> property on the <xref
                        linkend="gloss-manifest"/>
                    <code role="linkwrap"><xref role="codelink" linkend="sec-item-elem"/></code>
                    element.</para>
            </note>

        </section>

        <section xml:id="sec-xml-constraints">
            <title>XML Document Content Conformance</title>

            <para>Any <xref linkend="gloss-publication-resource-cmt-or-foreign"/> which is an
                XML-Based Media Type must meet the following constraints:</para>

            <itemizedlist role="conformance-list">
                <listitem>
                    <para xml:id="confreq-xml-wellformed"> It must be a conformant XML 1.0 Document
                        as defined in <link
                            xlink:href="http://www.w3.org/TR/REC-xml-names/#Conformance">Conformance
                            of Documents</link>
                        <xref linkend="refXMLNamespaces"/>.
                        <!-- It must be
                            a <link xlink:href="http://www.w3.org/TR/xml/#sec-well-formed">well-formed XML Document</link>
                            <xref linkend="refXML"/>.-->
                    </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-xml-extmarkupdecl">
                        <link xlink:href="http://www.w3.org/TR/2008/PER-xml-20080205/#NT-ExternalID"
                            >External identifiers</link> must not appear in the document type
                        declaration <xref linkend="refXML"/>. </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-xml-xinc"> It must not make use of XInclude <xref
                            linkend="refXInclude"/>.
                        <!-- note: troublesome to say "include elements in the xinclude namespace" in this case, since xinclude happens in a pre stage -->
                    </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-xml-enc">
                        <phrase xmlns="http://docbook.org/ns/docbook"
                            xmlns:xlink="http://www.w3.org/1999/xlink">It must be encoded in UTF-8
                            or UTF-16 <xref linkend="refUnicode5"/>.</phrase>
                    </para>
                </listitem>
            </itemizedlist>

            <para>The above constraints apply regardless of whether the given Publication Resource
                is a <xref linkend="gloss-publication-resource-cmt"/> or a <xref
                    linkend="gloss-publication-resource-foreign"/>. </para>

        </section>

    </chapter>

    <chapter xml:id="sec-publication-linking">
        <title>Publication Linking</title>
        <section xml:id="sec-publication-linking-xref">
            <title>Inter-Publication Linking</title>
            <caution>
                <para><remark role="todo"> This feature is <emphasis>at risk</emphasis> in EPUB 3.
                    </remark></para>
            </caution>
        </section>
        <section xml:id="sec-publication-linking-cfi">
            <title>EPUB Canonical Fragment Identifiers</title>

            <caution>
                <para>EPUB Canonical Fragment Identifiers are included in this specification draft
                    with a <emphasis>tentative status</emphasis>. Depending on input received during
                    the review phase, this feature may be substantially revised or withdrawn. It may
                    also be moved from this specification to a separate IDPF document.</para>
            </caution>

            <section xml:id="sec-pub-linking-intro">
                <title>Introduction</title>

                <para>An <xref linkend="gloss-cfi"/> (CFI) is a component of a URI or IRI that
                    identifies a location inside an <xref linkend="gloss-content-document-epub"/>. </para>

                <para>An EPUB Canonical Fragment Identifier has the following functional
                    properties:</para>

                <itemizedlist>
                    <listitem>
                        <para>it allows every location in a document to be identified;</para>
                    </listitem>
                    <listitem>
                        <para>it allows two identifiers to be compared to determine which location
                            comes first without having access to the content or structure of EPUB
                            file; and</para>
                    </listitem>
                    <listitem>
                        <para>it allows reasonably efficient processing (i.e., resolving a location
                            in one Content Document does not require processing of the other Content
                            Documents in the <code>spine</code>).</para>
                    </listitem>
                </itemizedlist>

                <para>As such, the CFI scheme is primarily intended to be used in contexts such as
                    collaborative annotations and server-side bookmarks. Note that CFIs are only
                    reliable in contexts where the content has a static structure.</para>

                <note>
                    <para>This specification defines only the CFI scheme, but does not restrict the
                        development of future additional schemes for EPUB, nor does it restrict or
                        prevent the use of the (ID-based) URI fragment identifier scheme for
                        intra-publication document links. </para>
                </note>
            </section>

            <section xml:id="sec-pub-linking-def">
                <title>Definition</title>

                <para>Each CFI represents a single location in a Content Document. A single
                    Identifier cannot represent a range of locations; multiple Identifiers are
                    required to express ranges. Identifiers are also not intended to be human
                    readable, but are optimized for machine processing.</para>

                <para>The following syntax is provided for CFIs (using CSS conventions):</para>

                <programlisting>
fragment : "#epubcfi=" [navstep]+ [termstep]? [side]?
navstep : "/" integer | "!" ["/"]? integer
termstep :  ":" integer | "@" number "," number | "~" number
side : "b" | "a"
number : ["-"]? digit+ ["." digit+]?
integer: digit+
                </programlisting>

                <para>Each CFI begins with a hash symbol (<literal>#</literal>) identifying it as a
                    fragment identifier. The hash symbol is followed by the initial sequence
                        <code>epubcfi=</code>, which identifies that the fragment conforms to this
                    scheme.</para>

                <para>After establishing the scheme, a CFI consists of a sequence of steps, each of
                    which is either navigational (can be repeated) or terminating (must come last in
                    the sequence). An optional side designator can also occur after the step
                    sequence to identify a location that "sticks" to the content that comes
                        <emphasis>before</emphasis> (<literal>b</literal>) or
                        <emphasis>after</emphasis> (<literal>a</literal>) it. This designator is
                    needed, for example, to determine which page a location falls on when it occurs
                    at the page boundary.</para>

                <informalexample xml:id="ex-fragid">
                    <para>An example of a Fragment Identifier.</para>
                    <synopsis><code><![CDATA[
#epubcfi=/2/6/4!/2/4/10/3:10]]></code></synopsis>
                </informalexample>


                <para>Leading zeros are not allowed for numbers and integers, except to represent
                    zero. Trailing zeros are not allowed in number fractional part to ensure
                    uniqueness.</para>
            </section>

            <section xml:id="sec-pub-linking-proc">
                <title>Processing</title>

                <note>
                    <para>The processing model presented in this section assumes that all documents
                        are parsed in W3C DOM for convenience, but other XML representations can be
                        used.</para>
                </note>

                <para>An EPUB Canonical Fragment Identifier is processed by applying the following
                    rules, in order, starting from the root (document) XML node of an EPUB Content
                    Document:</para>

                <itemizedlist>
                    <listitem>
                        <para>Slash-number steps refer to child node(s) as follows:</para>
                        <itemizedlist>
                            <listitem>
                                <para>Each element or processing instruction (PI) is assigned an
                                    even positive index (e.g., the first element/PI is given index
                                    2, the second element/PI 4, etc.). Note that the XML declaration
                                    is not considered a PI in this processing model.</para>
                            </listitem>
                            <listitem>
                                <para>Each (possibly empty) collection of nodes before the first
                                    element/PI, between elements/PIs, and after last element/PI are
                                    given odd indices according to their position.</para>
                            </listitem>
                        </itemizedlist>
                        <note>
                            <para>This indexing scheme ensures that nodes are not sensitive to XML
                                parser handling of whitespace, entity references, and CDATA
                                sections.</para>
                        </note>
                    </listitem>
                    <listitem>
                        <para>Column-number steps refer to a character offset as follows:</para>
                        <itemizedlist>
                            <listitem>
                                <para>When dealing with an element, the result is a UTF-16 code unit
                                    index in the element's intrinsic textual value. This value is
                                    empty for most elements, except for the HTML5 <code>img</code>
                                    tag when the <code>alt</code> attribute value is used. </para>
                            </listitem>
                            <listitem>
                                <para>When dealing with a text node or a collection of nodes, the
                                    UTF-16 code unit index is calculated after concatenating text
                                    data from all the nodes. The position is zero-based and always
                                    refers to a place between characters, so 0 means before the
                                    first character, and a number equal to the total UTF-16 length
                                    means position after the last character.</para>
                            </listitem>
                        </itemizedlist>
                        <note>
                            <para>UTF-16 is used to be consistent with other XML specifications that
                                are likely to be used to implement fragment identifiers, namely W3C
                                DOM, ECMAScript, and XPath.</para>
                        </note>
                    </listitem>
                    <listitem>
                        <para>An exclamation point step indicates the next step should be applied
                            starting from the target node (or root node, when the complete XML
                            document is referenced). The following specific references are
                            honored:</para>
                        <itemizedlist>
                            <listitem>
                                <para><code>opf:itemref</code> refers to the Content Document
                                    referenced by the <code>href</code> attribute of the
                                        <code>item</code> element with the given ID;</para>
                            </listitem>
                            <listitem>
                                <para>for the HTML5 <code>img</code>, <code>iframe</code> and
                                        <code>embed</code> elements, references are defined by
                                        <code>src</code> attribute;</para>
                            </listitem>
                            <listitem>
                                <para>for the HTML5 <code>object</code> element, the reference is
                                    defined by the <code>data</code> attribute;</para>
                            </listitem>
                            <listitem>
                                <para>for SVG <code>image</code> and <code>use</code> elements,
                                    references are defined by the <code>xlink:href</code>
                                    attribute.</para>
                            </listitem>
                        </itemizedlist>

                        <para>This scheme does not take into account hyperlinks, only "embedding"
                            references; it is consequently illegal to follow links from HTML5 (or
                            SVG) <code>a</code> elements.</para>

                    </listitem>
                    <listitem>
                        <para>An at-number step indicates 2D spatial position (e.g., on an image)
                            using x and y in the image's natural coordinate system:</para>

                        <itemizedlist>
                            <listitem>
                                <para>1 bitmap pixel for bitmap images with origin in top left
                                    corner, and with x going right and y going down;</para>
                            </listitem>
                            <listitem>
                                <para>1 logical unit for vector images.</para>
                            </listitem>
                        </itemizedlist>

                        <note>
                            <para>For SVG images, the coordinate system inside the <code>svg</code>
                                element is typically used (not the viewport coordinate system, which
                                is too layout-dependent).</para>
                        </note>
                    </listitem>
                    <listitem>
                        <para>A tilde-number step indicates a temporal position for audio/video,
                            measured in seconds.</para>
                    </listitem>
                </itemizedlist>

                <para>Spatial and temporal positions can be combined together, but not other types.
                    The Temporal step must always precede the spatial step syntactically.</para>

                <note>
                    <para>Some elements (e.g., HTML5 <code>img</code>) can allow more than one of
                        the steps defined above.</para>
                </note>

                <para>When producing CFIs for text locations, unless the text is defined by the
                        <code>img</code> element's <code>alt</code> attribute, processing should
                    always start with the text node or text node collection (even if it is empty)
                    that corresponds to the location, and then trace the ancestor and reference
                    chain to the OPF file root.</para>

            </section>

            <section xml:id="sec-pub-linking-sort">
                <title>Sorting</title>

                <para>The following conditions apply when sorting CFIs:</para>

                <itemizedlist>
                    <listitem>
                        <para>steps that come earlier in the sequence are more important than those
                            that come later;</para>
                    </listitem>
                    <listitem>
                        <para>XML children nodes, character offsets and temporal positions are
                            sorted in natural order;</para>
                    </listitem>
                    <listitem>
                        <para>y position is more important than x;</para>
                    </listitem>
                    <listitem>
                        <para>omitted spatial position precedes all other spatial positions;</para>
                    </listitem>
                    <listitem>
                        <para>omitted temporal position precedes all other temporal
                            positions;</para>
                    </listitem>
                    <listitem>
                        <para>temporal position is more important than spatial; and</para>
                    </listitem>
                    <listitem>
                        <para>different step types come in the following order from least important
                            to more important: character offset, child, temporal/spatial,
                            reference.</para>
                    </listitem>
                </itemizedlist>
            </section>

            <section xml:id="sec-linking-ex">
                <title>Examples</title>

                <para>The <link linkend="ex-fragid">fragment identifier in the example above</link>
                    refers to the position right after the digit 9 in the following sample
                    documents:</para>

                <informalexample>
                    <para>A Package Document</para>
                    <synopsis><xi:include href="examples/publications/fragid-1.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>chapter01.xhtml</para>
                    <synopsis><xi:include href="examples/publications/fragid-2.xml" parse="text"/></synopsis>
                </informalexample>

                <para>The following table shows additional examples of CFIs and what they select
                    from the preceding example documents:</para>

                <table>
                    <caption>CFI Examples</caption>
                    <tr>
                        <td><code>#epubcfi=/2/6/4!/2/4/16</code></td>
                        <td><code>img</code> element</td>
                    </tr>
                    <tr>
                        <td><code>#epubcfi=/2/6/4!/2/4/16!/2/2</code></td>
                        <td>first child element of the root <code>svg</code> element in
                                <filename>foo.svg</filename></td>
                    </tr>
                    <tr>
                        <td><code>#epubcfi=/2/6/4!/2/4/10/1:0</code></td>
                        <td>location just before aaa</td>
                    </tr>
                    <tr>
                        <td><code>#epubcfi=/2/6/4!/2/4/10/2/1:0</code></td>
                        <td>location just before bbb</td>
                    </tr>
                    <tr>
                        <td><code>#epubcfi=/2/6/4!/2/4/10/2/1:3b</code></td>
                        <td>location just after bbb, sticking "before"</td>
                    </tr>
                </table>

                <para>CFIs can also be used to cross-reference XML content inside the Publication.
                    Such use is intended to be used primarily when the default URI/IRI fragment
                    identification scheme for XML (providing a reference to an XML Name) cannot be
                    employed. A relative reference to a particular resource in the spine should be
                    given (as usual), followed by the CFI component which should be resolved
                    starting from the referenced documents root. For instance,
                        <filename>chapter02.xhtml</filename> might give a reference to the last
                    location in the previous example like this:</para>

                <informalexample>
                    <synopsis><code><![CDATA[
…
<a href="chapter01.xhtml#epubcfi(/2/4/10/2/1:3b)">location</a>
…
			]]></code></synopsis>
                </informalexample>
            </section>
        </section>
    </chapter>

    <appendix xml:id="app-package-schema">
        <title>Package Document Schema</title>
        <para>The schema for Package Documents is available at <link
                xlink:href="../schema/opf30.nvdl"
                >http://www.idpf.org/epub/30/schema/package-30.nvdl</link>.</para>
        <para>This schema is normative. In case of conflicts between the specification prose and
            this schema, the schema shall be considered definitive.</para>

        <xi:include href="./share/schema-usage.xml"/>

    </appendix>

    <appendix xml:id="acknowledgements" role="acknowledgements" conformance="informative">
        <title>Contributors</title>
        <xi:include href="./share/contributors.xml"/>
    </appendix>

    <xi:include href="./share/references.xml"/>

    <appendix xml:id="DUMMY_REMOVE">
        <!-- a dummy that is removed by the build -->
        <title>THIS SECTION SHOULD NOT BE IN THE BUILD</title>
        <para xml:id="sec-css"/>
        <para xml:id="sec-contentdocs"/>
        <para xml:id="physical-container-zip"/>
        <para xml:id="sec-xhtml"/>
        <para xml:id="sec-svg"/>
        <para xml:id="sec-xhtml-nav-content-conf"/>
        <para xml:id="sec-xhtml-nav"/>
        <para xml:id="sec-scripted-content"/>
    </appendix>
</book>
