<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="../../util/docbook/schema/docbookspec.rng" type="xml"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbookspec.sch"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbook.sch"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1b2">

    <title>Open Container Format (OCF) 3.0</title>

    <info>
        <releaseinfo>Internal Working Group Draft</releaseinfo>
        <pubdate>2010-xx-xx</pubdate>

        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Diffs to previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
        </printhistory>

        <copyright>
            <year>2010</year>
            <year>2011</year>
            <holder>International Digital Publishing Forum™</holder>
        </copyright>

        <legalnotice>
            <para>All rights reserved. This work is protected under Title 17 of the United States
                Code. Reproduction and dissemination of this work with changes is prohibited except
                with the written permission of the International Digital Publishing Forum.</para>
        </legalnotice>

        <authorgroup>
            <editor>
                <personname>Garth Conboy</personname>
                <affiliation>
                    <org>
                        <orgname>eBook Technologies</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>DAISY Consortium</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>WebPaper, inc.</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname><remark role="todo">TBD - additional editors</remark></personname>
            </editor>

        </authorgroup>

        <abstract>
            <title>Abstract</title>
            <para><remark role="todo">TODO</remark></para>
        </abstract>

    </info>

    <chapter xml:id="sec-overview">
        <title>Overview</title>
        <para>This specification, the Open Container Format (<firstterm linkend="gloss-ocf"
                >OCF</firstterm>), is one third of a triumvirate of modular specifications that make
            up the <firstterm linkend="gloss-epub">EPUB</firstterm> publication format. EPUB enables
            the creation and transport of reflowable digital books and other types of content as
            single-file digital publications that are interoperable between disparate EPUB-compliant
            reading devices and applications. EPUB encompasses a content markup standard (<link
                linkend="refOPS">Open Publication Structure – OPS</link>), a packaging standard
                (<link linkend="refOPF">Open Packaging Format – OPF</link>), and this specification,
            a container standard. </para>
        <section xml:id="sec-overview-purpose-and-scope">
            <title>Purpose and Scope</title>

            <para>This specification defines the Open Container Format (OCF). OCF is a
                general-purpose container technology. This specification describes the
                general-purpose container technology in the context of encapsulating EPUB
                publications and OPTIONAL alternate renditions thereof. It is however anticipated
                that the general-purpose container technology described herein may ultimately be
                used in other bundling applications.</para>
            <para>As a general container format, OCF collects a related set of files into a
                single-file container. OCF can be used to collect files in various document formats
                and for classes of applications. The single-file container enables easy transport
                of, management of, and random access to, the collection.</para>
            <para>OCF defines the rules for how to represent an abstract collection of files (the
                “abstract container”) into physical representation within a ZIP archive (the
                “physical container”). The rules for ZIP containers build upon and are backward
                compatible with the ZIP technologies used by <link linkend="refODF">Open Document
                    Format (ODF) 1.0</link>.</para>
            <para>OCF is the REQUIRED single-file container technology for EPUB publications. OCF
                MAY play a role in the following workflows:</para>
            <itemizedlist>
                <listitem>
                    <para>During the preparation steps in producing an electronic publication, OCF
                        is used as the single-file format when exchanging in-progress publications
                        between different individuals and/or different organizations.</para>
                </listitem>
                <listitem>
                    <para>When providing an electronic publication from publisher or conversion
                        house (Content Provider) to the distribution or sales channel, OCF is the
                        RECOMMENDED single-file format to be used as the transport format.</para>
                </listitem>
                <listitem>
                    <para>When delivering the final publication to an EPUB Reading System or
                        end-user, OCF is the REQUIRED format for the single-file container that
                        holds all of the assets that make up the publication. </para>
                </listitem>
            </itemizedlist>
        </section>

        <section xml:id="sec-overview-terminology">
            <title>Terminology</title>
            <glosslist>
                <glossentry xml:id="gloss-ascii">
                    <glossterm>ASCII</glossterm>
                    <glossdef>
                        <para>American Standard Code for Information Interchange – a 7-bit character
                            encoding based on the English alphabet (ANSI X3.4-1986). When used in
                            this document, ASCII refers to the printable graphic characters in the
                            range 33 (decimal) through 126 (decimal) and the nonprintable space
                            character 32 (decimal).</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="gloss-content-provider">
                    <glossterm>Content Provider</glossterm>
                    <glossdef>
                        <para>A publisher, author, individual, or other information source that
                            provides a publication to distribution or sales channels or directly to
                            one or more EPUB Reading Systems using OCF as described in this
                            specification.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="gloss-epub">
                    <glossterm>EPUB</glossterm>
                    <glossdef>
                        <para>The publication format as defined by the OCF 3.0, <link
                                linkend="refOPF">OPF 3.0</link> and <link linkend="refOPS">OPS
                                3.0</link> specifications.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="gloss-epub-publication">
                    <glossterm>EPUB Publication</glossterm>
                    <glossdef>
                        <para>A collection of OPS Documents, an OPF Package file, and other files,
                            typically in a variety of media types, including structured text and
                            graphics, packaged in an OCF container that constitute a cohesive unit
                            for publication, as defined by the EPUB standards.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="gloss-reading-system">
                    <glossterm>EPUB Reading System (or Reading System)</glossterm>
                    <glossdef>
                        <para>A combination of hardware and/or software that accepts EPUB
                            Publications and makes them available to consumers of the content. Great
                            variety is possible in the architecture of Reading Systems. A Reading
                            System MAY be implemented entirely on one device, or it MAY be split
                            among several computers. In particular, a reading device that is a
                            component of a Reading System need not directly accept OCF-Packaged EPUB
                            Publications, but all Reading Systems MUST do so. Reading Systems MAY
                            include additional processing functions, such as compression, indexing,
                            encryption, rights management, and distribution.</para>
                    </glossdef>
                </glossentry>
                <!--
                    RFC
                    Literally “Request For Comments”, but more generally a document published by the Internet Engineering Task Force (IETF). See http://www.ietf.org/rfc.html.
                -->
                <glossentry xml:id="gloss-rootfile">
                    <glossterm>Rootfile</glossterm>
                    <glossdef>
                        <para>The top-level file of a rendition of a publication; either the “root”
                            from which all other components can be found or the lone file
                            encapsulating the rendition. The EPUB rootfile is the OPF Package file.
                            A PDF file containing the PDF rendition could also be a rootfile.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="gloss-ocf">
                    <glossterm>OCF</glossterm>
                    <glossdef>
                        <para>The Open Container Format defined by this specification.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="gloss-opf-package">
                    <glossterm>OPF Package</glossterm>
                    <glossdef>
                        <para>An XML document that describes the contents of an EPUB Publication
                            providing metadata, manifest, reading-order and navigation information
                            for the publication.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="gloss-ops-document">
                    <glossterm>OPS Document</glossterm>
                    <glossdef>
                        <para>An XML document that conforms to <link linkend="refOPS">the OPS 3.0
                                specification</link>, containing the textual content of an EPUB
                            Publication.</para>
                    </glossdef>
                </glossentry>
            </glosslist>
        </section>
        <!-- 
            1.3 Relationship to Other Specifications not included, as it does not provide any new information given the new references section
            <section xml:id="sec-relations">
            <h1>Relationship to Other Specifications</h1>
            <para>This section has been removed.</para>
            </section>            
        -->
        <section xml:id="sec-overview-conformance">
            <title>Conformance</title>
            <xi:include href="./share/conformancestatements.xml"/>
            <section xml:id="sec-overview-conforming-containers">
                <title>Conforming Containers</title>
                <para>The term “Conforming OCF Abstract Container” indicates an OCF Abstract
                    Container (see <xref linkend="sec-ocf-overview-abstract-vs-physical"/>) that
                    conforms to all of the relevant conformance criteria defined in this
                    specification. The term “Conforming OCF ZIP Container” indicates a ZIP archive
                    that conforms to the relevant ZIP container conformance criteria (see <xref
                        linkend="sec-zip-container"/>) and whose contents is a Conforming OCF
                    Abstract Container.</para>
                <para>In addition to other conformance criteria defined in this specification, all
                    XML files in a Conforming OCF Abstract Container MUST meet the following
                    conditions:</para>
                <itemizedlist>
                    <listitem>
                        <para>All XML files MUST be well-formed XML Documents as defined by <xref
                                linkend="refXML"/></para>
                    </listitem>
                    <listitem>
                        <para><remark role="todo">TODO MG doesn't dont understand what this wants to
                                say:</remark> All XML files MUST be compatible with the XML 1.0
                            specification (http://www.w3.org/TR/2006/REC-xml-20060816/) and the
                            Namespaces in XML specification
                            (http://www.w3.org/TR/2006/REC-xml-names-20060816/)</para>
                    </listitem>
                    <listitem>
                        <para>All XML files MUST be encoded in UTF-8 or UTF-16 as defined by <xref
                                linkend="refUnicode5"/></para>
                    </listitem>
                    <listitem>
                        <para><remark role="todo">TODO fix wording </remark>All XML files MUST
                            conform to the relevant XML specification for any MIME type specified
                            for the file</para>
                    </listitem>
                </itemizedlist>
            </section>
            <section xml:id="sec-overview-conforming-reading-systems">
                <title>Conforming Reading Systems</title>
                <remark role="todo">Note: needs change as per distinction between content and RS
                    conformance</remark>
                <para>The term “Conforming EPUB Reading System” indicates a Reading System that
                    supports all of the mandatory features defined by this specification and the OPF
                    and OPS specifications.</para>
                <para>An EPUB Reading System that does not support all of the features defined in
                    this specification and the OPF and OPS specifications MUST NOT claim to be a
                    Conforming EPUB Reading System and SHOULD provide readily available
                    documentation of the subset of features it supports.</para>
                <para>An EPUB Reading System SHOULD provide readily available documentation of the
                    accessibility features it supports. This documentation SHOULD conform to the
                    relevant version of the W3C's Web Content Accessibility Guidelines. (See <xref
                        linkend="sec-overview-a11y"/>.)</para>
            </section>
            <section xml:id="sec-overview-a11y">
                <title>Accessibility</title>
                <para>E-books MAY provide an accessible reading experience for users with
                    disabilities provided authors and publishers conform to accepted industry
                    standards for the creation of accessible electronic materials. </para>
                <para>EPUB publications packaged or delivered using OCF SHOULD conform to the
                    accessibility standards set forth by the relevant IDPF Working Groups to ensure
                    that the broadest possible set of users will have access to books delivered in
                    this format.  This includes adherence to the W3C's Web Content Accessibility
                    Guidelines (<xref linkend="refWCAG20"/>).</para>
                <para>EPUB publications packaged or delivered using OCF MUST NOT interfere with any
                    features intended to deliver accessible content, regardless of how that content
                    is rendered.</para>
                <para>In addition, Reading Systems SHOULD be designed in concordance with W3C's User
                    Agent Accessibility Guidelines (<xref linkend="refUAAG10"/>). </para>
            </section>
            <section xml:id="sec-overview-future-directions">
                <title>Future Directions</title>
                <para>It is the intent of the contributors to this specification that subsequent
                    versions of this specification continue in the directions established by the 3.0
                    release. Specifically:</para>
                <itemizedlist>
                    <listitem>
                        <para>Future versions of this specification are expected to improve
                            alignment with OASIS/ODF.</para>
                    </listitem>
                    <listitem>
                        <para>Future versions of this specification are expected to be aligned with
                            future versions of the EPUB specifications.</para>
                    </listitem>
                    <listitem>
                        <para>Any required functionality not present in relevant official standards
                            shall be defined in a manner consistent with its eventual submission to
                            an appropriate standards body as extensions to existing
                            standards.</para>
                    </listitem>
                    <listitem>
                        <para>Future versions of the OCF specification MAY include:</para>
                        <itemizedlist>
                            <listitem>
                                <para>Adoption of a particular XML vocabulary for use in
                                        <filename>META-INF/metadata.xml</filename> allowing the
                                    specification of container-level metadata.</para>
                            </listitem>
                            <listitem>
                                <para>Adoption of a particular XML vocabulary for use in
                                        <filename>META-INF/rights.xml</filename>.</para>
                            </listitem>
                            <listitem>
                                <para>Updates required to maintain alignment with future versions of
                                    the EPUB specifications.</para>
                            </listitem>
                        </itemizedlist>
                    </listitem>
                </itemizedlist>
            </section>
        </section>

    </chapter>

    <chapter xml:id="sec-ocf-overview">
        <title>OCF Overview</title>
        <section xml:id="sec-ocf-overview-intro">
            <title>OCF: A General Container Technology</title>
            <para>OCF is purposely designed as a general container technology that can be used by
                other file formats, not just EPUB.
                <!-- In particular, OCF is purposely designed to be
                upwardly compatible with the container technology used in ODF 1.0 such that a future
                version of ODF might use OCF.--></para>
        </section>
        <section xml:id="sec-ocf-overview-abstract-vs-physical">
            <title>“Abstract Container” vs. “Physical Container”</title>
            <para>An “Abstract Container” defines a file system model for the contents of the
                container. The file system model MUST have a single common root directory for all of
                the contents of the container. The special files REQUIRED by OCF MUST be included
                within the META-INF directory that is a direct child of the root directory. All
                (non-remote) electronic assets for embedded publications MUST be located within the
                directory tree headed by the container’s root directory.</para>
            <para>A “Physical Container” holds the physical manifestation of an abstract container.
                This specification defines how an abstract container MUST be mapped to the following
                two physical container technologies:</para>
            <itemizedlist>
                <listitem>
                    <para>File System Container – The mapping of an Abstract Container to a file
                        system within computer storage media on a specific platform (e.g., a hard
                        disk on a computer or a data CD) MUST be a one-to-one mapping where each
                        directory and file within the abstract container is represented as a
                        directory or file within the file system. Section 3.3 defines a set of
                        restrictions on file system names intended to allow files to be easily
                        stored in most modern file systems.</para>
                </listitem>
                <listitem>
                    <para>ZIP Container - The mapping of an Abstract Container to a ZIP archive is
                        defined in <xref linkend="sec-zip-container"/>.</para>
                </listitem>
                <listitem>
                    <para>Publications MUST render the same no matter whether using a File System
                        Container or a ZIP Container. In both cases, the EPUB Reading System
                        ultimately opens the rootfile for the Publication, from which it can
                        determine how to render the Publication.</para>
                </listitem>
            </itemizedlist>
        </section>
        <section xml:id="sec-ocf-overview-examples">
            <title>Examples</title>
            <para>This section includes an example of a single rendition and a multiple rendition
                container. See <xref linkend="sec-container-metainf-container.xml"/> for normative
                descriptions.</para>
            <section xml:id="sec-ocf-overview-example-simple">
                <title>Example of a simple Publication, Abstract Container, and ZIP
                    Container</title>
                <para>To illustrate the concepts from the previous section, let’s assume we have an
                    EPUB Publication of Dickens’ “Great Expectations” which consists of an OPF 3.0
                    package file (<filename>Great Expectations.opf</filename>) and a large number of
                    OPS 3.0 files, one for the cover page (e.g., <filename>cover.html</filename>)
                    and one for each chapter (e.g., <filename>chapter01.html</filename>).</para>
                <para>The contents of the ZIP container might be as follows:</para>
                <informalexample>
                    <synopsis>
mimetype
META-INF/
   container.xml
   [manifest.xml]
   [metadata.xml]
   [signatures.xml]
   [encryption.xml]
   [rights.xml]
OEBPS/
   Great Expectations.opf
   cover.html
   chapters/
      chapter01.html
      chapter02.html
      … other OPS files for the remaining chapters …                        
                    </synopsis>
                </informalexample>

                <para>The corresponding META-INF/container.xml file might appear as follows:</para>
                <informalexample>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/container-2.xml"/>                        
                    </synopsis>
                </informalexample>
            </section>
            <section xml:id="sec-ocf-overview-example-alternate-renditions">
                <title>Single-publication containers, but with alternate renditions</title>
                <para>In some circumstances, an OCF container might hold multiple renditions of the
                    same publication. An example is a container that has OPS/OPF documents as the
                    primary rendition for viewing but includes an alternate PDF for printing. To
                    avoid name conflicts, it is RECOMMENDED that each rendition be placed within its
                    own subdirectory and that multiple <code>&lt;rootfile&gt;</code> elements be
                    defined within <filename>container.xml</filename>.</para>
                <para>Here is an example, showing the abstract container:</para>
                <informalexample>
                    <synopsis>
META-INF/
   container.xml – Note: includes multiple &lt;rootfile&gt; elements
   [manifest.xml]
   [metadata.xml]
   [signatures.xml]
   [encryption.xml]
   [rights.xml]
OEBPS/
   Great Expectations.opf
   cover.html
   chapters/
      chapter01.html
      chapter02.html
      … other OPS files for the remaining chapters …
PDF/
   Great Expectations.pdf                        
                    </synopsis>
                </informalexample>
                <para>The corresponding <filename>META-INF/container.xml</filename> file might
                    appear as follows:</para>
                <informalexample>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/container-6.xml"/>                         
                    </synopsis>
                </informalexample>
            </section>

        </section>
    </chapter>

    <chapter xml:id="sec-container">
        <title>OCF Container Contents</title>
        <section xml:id="sec-container-file-and-dir-structure">
            <title>File and directory structure</title>
            <para>The virtual file system for the OCF “Abstract Container” MUST have a single common
                root directory for all of the contents of the container.</para>
            <para>The following file names in the root directory are reserved:</para>
            <simplelist>
                <member><filename>mimetype</filename></member>
                <member><filename>META-INF</filename></member>
            </simplelist>
            <para>The <filename>mimetype</filename> file is discussed in <xref
                    linkend="sec-zip-container"/>. The <filename>META-INF/</filename> directory
                contains the reserved files used by OCF. These reserved files are described in the
                following sections. All other files used by the publication rendition(s) within the
                Abstract Container MAY be in any location descendant from the root directory except
                for <filename>mimetype</filename> at the root level or within the
                    <filename>META-INF</filename> directory.</para>
            <para>It is RECOMMENDED that the contents of individual publications be stored within
                dedicated sub-directories to minimize potential file name collisions in the event
                that multiple renditions are used or that multiple publications per container are
                supported in future versions of this specification.</para>
        </section>

        <section xml:id="sec-container-iri">
            <title>Relative IRIs for referencing other components</title>
            <para>Files within the Abstract Container reference each other via Relative IRI
                References (<xref linkend="refRFC3987"/> and <xref linkend="refRFC3986"/>), no
                matter what is used for the physical container (e.g., File System Container or ZIP
                Container). For example, if a file named <filename>chapter1.html</filename>
                references an image file named <filename>image1.jpg</filename> that is located in
                the same directory, then <filename>chapter1.html</filename> might contain the
                following as part of its content:</para>
            <informalexample>
                <synopsis>
&lt;img src="image1.jpg" alt="…" /&gt;
                </synopsis>
            </informalexample>
            <para>For Relative IRI References, the Base IRI (see <xref linkend="refRFC3986"/>) is
                determined by the relevant language specifications for the given file formats. For
                example, the CSS specification defines how relative IRI references work in the
                context of CSS style sheets and property declarations. Note that some language
                specifications reference RFCs that preceded RFC3987, in which case the earlier RFC
                applies for content in that particular language.</para>
            <para>Unlike most language specifications, the Base IRIs for all files within the
                META-INF/ directory use the root folder for the Abstract Container as the default
                Base IRI. For example, if <filename>META-INF/container.xml</filename> has the
                following content:</para>
            <informalexample>
                <synopsis>
<xi:include parse="text" href="./examples/ocf/container-2.xml"/>
            </synopsis>
            </informalexample>
            <para>then the path <filename>OEBPS/Great Expectations.opf</filename> is relative to the
                root directory for the Abstract Container and not relative to the
                    <filename>META-INF/</filename> directory.</para>
        </section>

        <section xml:id="sec-container-filenames">
            <title>File Names</title>
            <para>The term <literal>File Name</literal> represents the name of any type of file,
                either a directory or an ordinary file within a directory within an Abstract
                Container. For a given directory within the Abstract Container, the Path Name is a
                string holding all directory names in the full path concatenated together with a “/”
                (ASCII 0x2F) character separating the directory names. For a given file within the
                Abstract Container, the Path Name is the string holding all directory names
                concatenated together with a “/” character separating the directory names, followed
                by a “/” character and then the name of the file. The File Name restrictions
                described below are designed to allow directory names and file names to be used
                without modification on most commonly used operating systems. This specification
                does not specify how an EPUB Reading System that is unable to represent OCF
                conforming File Names would compensate for this incompatibility.</para>
            <para>The following statements apply to Conforming OCF Content:</para>
            <itemizedlist>
                <listitem>
                    <para>File Names MUST be UTF-8 (<xref linkend="refUnicode5"/>) encoded with the
                        restrictions below</para>
                </listitem>
                <listitem>
                    <para>When represented as UTF-8, File Names MUST NOT exceed 255 bytes</para>
                </listitem>
                <listitem>
                    <para>When represented as UTF-8, the Path Name for any directory or file within
                        the Abstract Container MUST NOT exceed 65535 bytes</para>
                </listitem>
                <listitem>
                    <para>File Names MUST NOT use the following characters (Reason: these characters
                        may not be supported always across commonly used operating systems):</para>
                    <itemizedlist>
                        <listitem>
                            <para>Slash: <literal>/</literal> (ASCII 0x2F)</para>
                        </listitem>
                        <listitem>
                            <para>Double quote: <literal>"</literal> (ASCII 0x22)</para>
                        </listitem>
                        <listitem>
                            <para>Asterisk: <literal>*</literal> (ASCII 0x2A)</para>
                        </listitem>
                        <listitem>
                            <para>Period as the last character: <literal>.</literal> (ASCII
                                0x3A)</para>
                        </listitem>
                        <listitem>
                            <para>Colon: <literal>:</literal> (ASCII 0x3A)</para>
                        </listitem>
                        <listitem>
                            <para>Less than: <literal>&lt;</literal> (ASCII 0x3C)</para>
                        </listitem>
                        <listitem>
                            <para>Greater than: <literal>></literal> (ASCII 0x3E)</para>
                        </listitem>
                        <listitem>
                            <para>Question mark: <literal>?</literal> (ASCII 0x3F)</para>
                        </listitem>
                        <listitem>
                            <para>Back slash : <literal>\</literal> (ASCII 0x5C)</para>
                        </listitem>
                    </itemizedlist>

                </listitem>
                <listitem>
                    <para>File Names are case sensitive.</para>
                </listitem>
                <listitem>
                    <para>Two File Names within the same directory MUST NOT map to the same string
                        following case normalization as described in section 3.13 of (<xref
                            linkend="refUnicode5"/>). Two File Names that differ only in case are
                        disallowed within the same directory.</para>
                </listitem>
                <listitem>
                    <para>Two File Names within the same directory MAY map to the same string
                        following accent normalization.</para>
                </listitem>
            </itemizedlist>
            <para>Note that some commercial ZIP tools do not support the full Unicode range and may
                only support the ASCII range for File Names. Content creators who want to use ZIP
                tools that have these restrictions MAY find it is best to restrict their File Names
                to the ASCII range. If the names of files can not be preserved during the unzipping
                process, it will be necessary to compensate for any name translation which took
                place when the files are referenced by URI from within the content.</para>

        </section>

        <section xml:id="sec-container-mime">
            <title>Container media type identification</title>
            <para>It is frequently necessary for applications to determine the media type of a file.
                This is usually accomplished by looking at the file extension of the file. This
                gives applications a quick way to determine the type of the file without looking
                inside the file. OCF Container files SHOULD use an extension
                    <literal>.epub</literal> to identify to processing applications that they are
                OCF Containers.</para>
            <para>In order to translate a file extension into a media type, typically a processing
                agent will register the relationship between file extension and media type with the
                operating system. Applications that are interested in OCF Container files SHOULD
                register the media type of <literal>application/epub+zip</literal> as corresponding
                to the file extension of <filename>.epub</filename>.</para>
            <para>Unfortunately, the identification of files through the use of file extensions is
                notoriously unreliable. As a result, it is desirable to have a more robust way of
                identifying files independent of their file names or extensions. One mechanism that
                has evolved for doing this is to require the placement of specific information at
                specific file offsets. A processing agent can then check a fixed location to
                determine if the file is an OCF Container.</para>
            <para>The method that has evolved for doing this in ZIP archives is the inclusion of an
                uncompressed, unencrypted file called <filename>mimetype</filename> as the first
                file in the ZIP archive. The contents of this file are the media type of the file.
                OCF Containers MUST place the ASCII string <literal>application/epub+zip</literal>
                in the <literal>mimetype</literal> file as the first file in the ZIP archive. See
                <xref linkend="sec-zip-container"/> for more detail on this mechanism.</para>
        </section>

        <section xml:id="sec-container-metainf">
            <title>META-INF</title>
            <para>All valid OCF Containers MUST include a directory called
                    <filename>META-INF</filename> at the root level of the container file system.
                This directory contains the files specified below that describe the contents,
                metadata, signatures, encryption, rights and other information about the contained
                publication.</para>
            <para>The semantics of the following files that MAY be present at the
                    <filename>META-INF/</filename> level are specified. All other files found at the
                “META-INF/” level MUST be ignored by conformant OCF Reading Systems.</para>
            <section xml:id="sec-container-metainf-container.xml">
                <title>Container – META-INF/container.xml (Required)</title>

                <para>All valid OCF Containers MUST include a file called
                        <filename>container.xml</filename> within the <filename>META-INF</filename>
                    directory at the root level of the container file system. The
                        <filename>container.xml</filename> file MUST identify the MIME type of, and
                    path to, the rootfile for the OPF/OPS version of the publication and any
                    OPTIONAL alternate renditions included within the container.</para>
                <para>The <filename>container.xml</filename> file MUST NOT be encrypted.</para>
                <para>The <filename>container.xml</filename> file contains XML that uses the
                        <literal>urn:oasis:names:tc:opendocument:xmlns:container</literal> namespace
                    for all of its elements and attributes. The <code>version="1.0"</code> attribute
                    MUST be included for all containers that conform to this version of the
                    specification.</para>
                <para>A RELAX NG OCF schema describing the &lt;container&gt; element that MUST be
                    the root element of container.xml can be found in <xref linkend="rng-ocf-schema"
                    />.</para>
                <para>The <code>&lt;rootfiles&gt;</code> element MUST contain at least one
                    &lt;rootfile&gt; element that has a media-type of
                        <literal>application/oebps-package+xml</literal>. Only one
                        <code>&lt;rootfile&gt;</code> element with a media-type of
                        <literal>application/oebps-package+xml</literal> SHOULD be included. The
                    file referenced by the first &lt;rootfile&gt; element that has a media-type of
                        <literal>application/oebps-package+xml</literal> will be considered the EPUB
                    rootfile. The EPUB rootfile (the OPF package file) MUST NOT be encrypted.</para>
                <para>Each <code>&lt;rootfile&gt;</code> element specifies the rootfile of a single
                    rendition of the contained publication. A rootfile often includes an enumeration
                    of the other files needed by the rendition. In the case of EPUB, the root will
                    be the OPF Package file for the OPS rendition of the publication, whose
                        <code>&lt;manifest&gt;</code> element enumerates the other files used by the
                    OPS rendition. In other cases, the rootfile MAY be the only file needed by the
                    rendition.</para>

                <informalexample>
                    <para>The following example shows a sample container.xml for an EPUB Publication
                        with the root file <filename>OEBPS/My Crazy Life.opf</filename> (the OPF
                        package file):</para>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/container-3.xml"/>
                    </synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example adds an alternate PDF version of the
                        publication:</para>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/container-4.xml"/>
                    </synopsis>
                </informalexample>

                <para>The <code>&lt;manifest&gt;</code> element contained within the OPF root
                    package file specifies the one and only manifest used for OPS processing; all
                    items referenced in this manifest MUST be included in the ZIP archive. Ancillary
                    manifest information contained in the ZIP archive or in the OPTIONAL
                        <filename>manifest.xml</filename> file MUST NOT be used for OPS processing
                    purposes. Any extra files in the ZIP archive (i.e., files within the ZIP archive
                    that are not listed within the package files’ <code>&lt;manifest&gt;</code>
                    element, such as META-INF files or alternate derived renditions of the
                    publication) MUST NOT be used in the processing of the OPS publication.</para>
                <para>The values of the <code>full-path</code> attributes MUST contain a
                        <literal>path component</literal> (as defined by <xref linkend="refRFC3986"
                    />) which MUST only take the form of a <literal>path-rootless</literal> (as
                    defined by RFC3986). The path components are relative to the root of the
                    container in which they are used.</para>
                <para>Conforming OCF User Agents MUST ignore unrecognized elements (and their
                    contents) and unrecognized attributes within a
                        <filename>container.xml</filename> file, including unrecognized elements and
                    unrecognized attributes from other namespaces.</para>
                <para>Conforming <filename>container.xml</filename> files MUST be valid according to
                    the <link linkend="rng-ocf-schema">RELAX NG OCF schema</link> with the
                        <code>&lt;container&gt;</code> element as the root element after removing
                    all elements (and child nodes of these elements) and attributes from other
                    namespaces.</para>
                <informalexample>
                    <para><remark role="todo">TODO these examples may be superfluous, its not the
                            role of this spec to teach people how namespaces work.</remark></para>
                    <para>For example:</para>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/container-5.xml"/>                        
                    </synopsis>
                    <para>is conformant, but:</para>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/container-invalid-1.xml"/>
                    </synopsis>
                    <para>is non-conformant due to the non-namespace-qualified use of the
                            <code>&lt;foo&gt;</code> element.</para>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/container-invalid-2.xml"/>                        
                    </synopsis>
                    <para>is also non-conformant due to the non-namespace-qualified use of the
                            <code>identifier</code> attribute on the <code>&lt;rootfiles&gt;</code>
                        element.</para>
                </informalexample>
            </section>
            <section xml:id="sec-container-metainf-manifest.xml">
                <title>Manifest – META-INF/manifest.xml (Optional)</title>
                <para>An OPTIONAL file with the reserved name <filename>manifest.xml</filename>
                    within the <filename>META-INF</filename> directory at the root level of the
                    container may appear in a valid OCF container. If present, the file’s content
                    MUST be as defined in the <link linkend="refODFManifestSchema">ODF 1.0 manifest
                        schema</link>.</para>
                <para>The <filename>manifest.xml</filename> file, if present, MUST NOT be
                    encrypted.</para>
            </section>
            <section xml:id="sec-container-metainf-metadata.xml">
                <title>Metadata – META-INF/metadata.xml (Optional)</title>
                <para>A file with the reserved name <filename>metadata.xml</filename> within the
                        <filename>META-INF</filename> directory at the root level of the container
                    file system may appear in a valid OCF container. This file, if present, MUST be
                    used for container-level metadata. In version 3.0 of OCF, no such
                    container-level metadata is specified. It is in this file that future innovation
                    and extension SHOULD occur.</para>
                <para>If the <filename>META-INF/metadata.xml</filename> file exists, its contents
                    MUST be valid XML with namespace-qualified elements to avoid collision with
                    future versions of OCF that MAY specify a particular grammar and namespace for
                    elements and attributes within this file.</para>
                <para>The <filename>metadata.xml</filename> file, if present, MUST NOT be
                    encrypted.</para>
            </section>
            <section xml:id="sec-container-metainf-signatures.xml">
                <title>Digital Signatures – META-INF/signatures.xml (Optional)</title>
                <para>An OPTIONAL <filename>signatures.xml</filename> file within the
                        <filename>META-INF</filename> directory at the root level of the container
                    file system holds digital signatures of the container and its contents. This
                    file is an XML document whose root element is <code>&lt;signatures&gt;</code>.
                    The <code>&lt;signatures&gt;</code> element contains child elements of type
                        <code>&lt;Signature&gt;</code> as defined by <xref linkend="refXMLDSIGCORE"
                    />. Signatures can be applied to the publication and any alternate renditions as
                    a whole or to parts of the publication and renditions. XML Signature can specify
                    the signing of any kind of data, not just XML.</para>
                <para>The signatures.xml file MUST NOT be encrypted.</para>
                <para>When the <filename>signatures.xml</filename> file is not present, the OCF
                    container provides no information indicating any part of the container is
                    digitally signed at the container level. It is however possible that digital
                    signing exists within any optional alternate contained renditions.</para>
                <para>A RELAX NG OCF schema describing the <code>&lt;signatures&gt;</code> element
                    that MUST be the root element of signatures.xml can be found in the <xref
                        linkend="rng-ocf-schema"/>.</para>
                <para>When an OCF agent creates a signature of data in a container, it SHOULD add
                    the new signature as the last child <code>&lt;Signature&gt;</code> element of
                    the <code>&lt;Signatures&gt;</code> element in the
                        <filename>signatures.xml</filename> file.</para>
                <para>Each <code>&lt;Signature&gt;</code> in the signatures.xml file identifies by
                    IRI the data to which the signature applies, using the XML Signature
                        <code>&lt;Manifest&gt;</code> element and its <code>&lt;Reference&gt;</code>
                    sub-elements. Individual contained files MAY be signed separately or together.
                    Separately signing each file creates a digest value for the resource that can be
                    validated independently. This approach MAY make a Signature element larger. If
                    files are signed together, the set of signed files can be listed in a single XML
                    Signature <code>&lt;Manifest&gt;</code> element and referenced by one or more
                        <code>&lt;Signature&gt;</code> elements.</para>
                <para>Any or all files in the container can be signed in their entirety with the
                    exception of the signatures.xml file since that file will contain the computed
                    signature information. Whether and how the signatures.xml file SHOULD be signed
                    depends on the objective of the signer.</para>
                <para>If the signer wants to allow signatures to be added or removed from the
                    container without invalidating the signer’s signature, the signatures.xml file
                    SHOULD NOT be signed.</para>
                <para>If the signer wants any addition or removal of a signature to invalidate the
                    signer’s signature, the Enveloped Signature transform (defined in <link
                        xlink:href="http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-EnvelopedSignature"
                        >Section 6.6.4</link> of <xref linkend="refXMLDSIGCORE"/>) can be used to
                    sign the entire preexisting signature file excluding the
                        <code>&lt;Signature&gt;</code> being created. This transform would sign all
                    previous signatures, and it would become invalid if a subsequent signature was
                    added to the package.</para>
                <para>If the signer wants the removal of an existing signature to invalidate the
                    signer’s signature but also wants to allow the addition of signatures, an XPath
                    transform can be used to sign just the existing signatures. (This is only a
                    suggestion. The particular XPath transform is not a part of OCF
                    specification.)</para>
                <para>XML-Signature does not associate any semantics with a signature, however an
                    agent MAY include semantic information, for example, by adding information to
                    the Signature element that describes the signature. XML Signature describes how
                    additional information can be added to a signature (for example, by using the
                        <code>&lt;SignatureProperties&gt;</code> element).</para>
                <informalexample>
                    <para>The following XML expression shows the content of an example
                            <filename>signatures.xml</filename> file, and is based on the examples
                        found in <link
                            xlink:href="http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/#sec-Overview"
                            >Section 2</link> of <xref linkend="refXMLDSIGCORE"/>. It contains one
                        signature, and the signature applies to two resources,
                            <filename>OEBFPS/book.html</filename> and
                            <filename>OEBFPS/images/cover.jpeg</filename>, in the container.</para>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/signatures-2.xml"/>
                    </synopsis>
                </informalexample>
            </section>
            <section xml:id="sec-container-metainf-encryption.xml">
                <title>Encryption – META-INF/encryption.xml (Optional)</title>
                <para>An OPTIONAL “encryption.xml” file within the “META-INF” directory at the root
                    level of the container file system holds all encryption information on the
                    contents of the container. This file is an XML document whose root element is
                        <code>&lt;encryption&gt;</code>. The <code>&lt;encryption&gt;</code> element
                    contains child elements of type <code>&lt;EncryptedKey&gt;</code> and
                        <code>&lt;EncryptedData&gt;</code> as defined by <xref
                        linkend="refXMLENCCORE"/>. Each <code>&lt;EncryptedKey&gt;</code> element
                    describes how one or more container files are encrypted. Consequently, if any
                    resource within the container is encrypted, “encryption.xml” MUST be present to
                    indicate that the resource is encrypted and provide information on how it is
                    encrypted.</para>
                <para>An <code>&lt;EncryptedKey&gt;</code> element describes each encryption key
                    used in the container, while an <code>&lt;EncryptedData&gt;</code> element
                    describes each encrypted file. Each <code>&lt;EncryptedData&gt;</code> element
                    refers to an <code>&lt;EncryptedKey&gt;</code> element, as described in XML
                    Encryption.</para>
                <para>A RELAX NG OCF schema describing the <code>&lt;encryption&gt;</code> element
                    that MUST be the root element of encryption.xml can be found in <xref
                        linkend="rng-ocf-schema"/>.</para>
                <para>When the encryption.xml file is not present, the OCF container provides no
                    information indicating any part of the container is encrypted.</para>
                <para>OCF encrypts individual files independently, trading off some security for
                    improved performance, allowing the container contents to be incrementally
                    decrypted. Encryption in this way still exposes the directory structure and file
                    naming of the whole package.</para>
                <para>OCF uses XML Encryption (<xref linkend="refXMLENCCORE"/>)to provide a
                    framework for encryption, allowing a variety of algo­rithms to be used. XML
                    Encryption specifies a process for encrypting arbitrary data and representing
                    the result in XML. Even though an OCF container MAY contain non-XML data, XML
                    Encryption can be used to encrypt all data in an OCF container. OCF encryption
                    sup­ports only encryption of whole files. The encryption.xml file, if present,
                    MUST NOT be encrypted.</para>
                <para>Encrypted data replaces unencrypted data in an OCF container. For example, if
                    an image named “photo.jpeg” is encrypted, the contents of the photo.jpeg
                    resource SHOULD be replaced by its encrypted contents. When stored in a ZIP
                    container, streams of data MUST be compressed before they are encrypted; Flate
                    compression MUST be used. Within the ZIP directory, encrypted files SHOULD be
                    stored rather than Flate-compressed.</para>
                <para>It MAY be desired to obfuscate the storage of embedded fonts referenced by an
                    EPUB Publication to tie them to the “parent” publication and make them more
                    difficult to extract for unrestricted use. In these cases,
                        <filename>encryption.xml</filename> SHOULD be used to provide requisite font
                    decoding information according to <xref linkend="refIDPFFontMangling"/>.</para>
                <para>The following files MUST never be encrypted (regardless of whether default or
                    specific encryption is requested):</para>
                <simplelist>
                    <member>mimetype</member>
                    <member><filename>META-INF/container.xml</filename></member>
                    <member><filename>META-INF/manifest.xml</filename></member>
                    <member><filename>META-INF/metadata.xml</filename></member>
                    <member><filename>META-INF/signatures.xml</filename></member>
                    <member><filename>META-INF/encryption.xml</filename></member>
                    <member><filename>META-INF/rights.xml</filename></member>
                    <member><filename>EPUB rootfile (the OPF Package file)</filename></member>
                </simplelist>
                <para>Signed resources MAY subsequently be encrypted by using the Decryption
                    Transform for XML Signature. This feature enables an application such as an OCF
                    agent to distinguish data that was encrypted before signing from data that was
                    encrypted after signing. Only data that was encrypted after signing MUST be
                    decrypted before computing the digest used to validate the signature.</para>
                <informalexample>
                    <para>In the following example, adapted from <link
                            xlink:href="http://www.w3.org/TR/2002/REC-xmlenc-core-20021210/#sec-eg-Symmetric-Key"
                            >Section 2.2.1 </link> of <xref linkend="refXMLENCCORE"/> the resource
                        image.jpeg is encrypted using a symmetric key algorithm (AES) and the
                        symmetric key is further encrypted using an asymmetric key algorithm (RSA)
                        with a key of John Smith.</para>
                    <synopsis>
<xi:include parse="text" href="./examples/ocf/encryption-2.xml"/>
                    </synopsis>
                </informalexample>
            </section>
            <section xml:id="sec-container-metainf-rights.xml">
                <title>Rights Management – META-INF/rights.xml (Optional)</title>
                <para>An OPTIONAL file with the name <filename>rights.xml</filename> within the
                        <filename>META-INF</filename> directory at the root level of the container
                    file system is a reserved name in a valid OCF container. This location is
                    reserved for digital rights management (DRM) information for trusted exchange of
                    Publications among rights holders, intermediaries, and users. In version 2.0.1
                    of OCF, there is not a REQUIRED format for DRM information, but a future version
                    of this specification MAY specify a particular format for DRM
                    information.</para>
                <para>If the <filename>META-INF/rights.xml</filename> file exists, it MUST be a
                    well-formed XML document which uses and conforms to XML Namespaces it uses, and
                    its contents SHOULD be valid XML with namespace-qualified elements to avoid
                    collision with future versions of OCF that MAY specify a particular format this
                    file.</para>
                <para>The <filename>rights.xml</filename> file MUST NOT be encrypted.</para>
                <para>When the <filename>rights.xml</filename> file is not present, the OCF
                    container provides no information indicating any part of the container is rights
                    governed.</para>
            </section>
        </section>
    </chapter>

    <chapter xml:id="sec-zip-container">
        <title>ZIP Container</title>
        <para>OCF’s ZIP Container supports the ZIP format as specified by the application note at
                <xref linkend="refZIP"/>, but with the following constraints and
            clarifications:</para>
        <itemizedlist>
            <listitem>
                <para>Conforming OCF ZIP Containers MUST NOT use the features in the ZIP application
                    note that allow ZIP files to be split across multiple storage media. Conforming
                    EPUB Reading Systems MUST treat any OCF files that specify that the ZIP file is
                    split across multiple storage media as being in error.</para>
            </listitem>
            <listitem>
                <para>Conforming OCF ZIP Containers MUST only include uncompressed files or
                    Flate-compressed files within the ZIP archive. Conforming EPUB Reading Systems
                    MUST treat any OCF Containers that use compression techniques other than Flate
                    as being in error. <remark role="todo">TODO normative ref to Flate
                        specification?</remark></para>
            </listitem>
            <listitem>
                <para>Conforming OCF ZIP Containers MAY use the ZIP64 extensions and SHOULD only use
                    those extensions when the content requires them. Conforming EPUB Reading Systems
                    MUST support the ZIP64 extensions.</para>
            </listitem>
            <listitem>
                <para>Conforming OCF ZIP Containers MUST NOT use the encryption features defined by
                    the ZIP format; instead, encryption MUST be done using the features described in
                        <xref linkend="sec-container-metainf-encryption.xml"/>. Conforming EPUB
                    Reading Systems MUST treat any other OCF ZIP Containers that use ZIP encryption
                    features as being in error.</para>
            </listitem>
            <listitem>
                <para>It is not a requirement that Conforming EPUB Reading Systems preserve
                    information from an OCF ZIP Container through load and save operations that do
                    not map to corresponding representation within the OCF Abstract Container; in
                    particular, a Conforming EPUB Reading System does not have to preserve CRC
                    values, comment fields or fields that hold file system information corresponding
                    to a particular operating system (e.g., <code>External file attributes</code>
                    and <code>Extra field</code>).</para>
            </listitem>
            <listitem>
                <para>Conforming OCF ZIP Containers MUST encode File System Names using UTF-8 (<xref
                        linkend="refUnicode5"/>).</para>
            </listitem>
        </itemizedlist>

        <para>Here are some details about particular fields in the ZIP archive:</para>
        <itemizedlist>
            <listitem>
                <para>In the local file header table, Conforming OCF ZIP Containers MUST set the
                        <code>version needed to extract</code> fields to the values <code>10</code>,
                        <code>20</code> or <code>45</code> in order to match the maximum version
                    level needed by the given file (e.g., <code>20</code> if Deflate is needed,
                        <code>45</code> if ZIP64 is needed). Conforming EPUB Reading Systems MUST
                    treat any other values as being in error.</para>
            </listitem>
            <listitem>
                <para>In the local file header table, Conforming OCF ZIP Containers MUST set the
                        <code>compression</code> method field to the values <code>0</code> or
                        <code>8</code>. Conforming EPUB Reading Systems MUST treat any other values
                    as being in error.</para>
            </listitem>
            <listitem>
                <para>Conforming EPUB Reading Systems MUST treat OCF ZIP Containers with an
                        <code>Archive decryption header</code> or an <code>Archive extra data
                        record</code> as being in error.</para>
            </listitem>
        </itemizedlist>
        <para>The first file in the ZIP Container MUST be a file by the ASCII name of
                <filename>mimetype</filename> which holds the MIME type for the ZIP Container (i.e.,
                <literal>application/epub+zip</literal> as an ASCII string; no padding, white-space
            or case change). The file MUST be neither compressed nor encrypted and there MUST NOT be
            an extra field in its ZIP header. If this is done, then the ZIP Container offers
            convenient “magic number” support as described in <xref linkend="refRFC2048"/> and the
            following will hold true:</para>
        <itemizedlist>
            <listitem>
                <para>The bytes <literal>PK</literal> will be at the beginning of the file</para>
            </listitem>
            <listitem>
                <para>The bytes <literal>mimetype</literal> will be at position
                    <code>30</code></para>
            </listitem>
            <listitem>
                <para>The actual MIME type (i.e., the ASCII string
                        <literal>application/epub+zip</literal>) will begin at position
                        <code>38</code></para>
            </listitem>
        </itemizedlist>
    </chapter>

    <appendix xml:id="rng-ocf-schema">
        <title>RELAX NG OCF Schema</title>
        <para><remark role="todo">TODO <link
                    xlink:href="http://code.google.com/p/epub-revision/issues/detail?id=4">Issue
                    4</link></remark></para>
        <para><remark role="todo">TODO establish and link to canonical standalone URI of
                schema</remark></para>
        <synopsis>
<xi:include parse="text" href="../schema/ocf30.rng"/>
        </synopsis>
    </appendix>

    <appendix xml:id="example">
        <title>Example</title>
        <para>The following example demonstrates the use of this OCF format to contain a signed and
            encrypted EPUB publication with an alternate PDF rendition within a ZIP
            Container.</para>

        <example xml:id="example-files">
            <title>Ordered list of files in the ZIP Container</title>
            <synopsis>
mimetype
META-INF/container.xml
META-INF/signatures.xml
META-INF/encryption.xml
OEBPS/As You Like It.opf
OEBPS/book.html
OEBPS/images/cover.png
PDF/As You Like It.pdf
            </synopsis>
        </example>

        <example xml:id="example-mimetype">
            <title>The contents of the <filename>mimetype</filename> file</title>
            <synopsis>
application/epub+zip
            </synopsis>
        </example>

        <example xml:id="example-container">
            <title>The contents of the <filename>META-INF/container.xml</filename> file</title>
            <synopsis>
<xi:include parse="text" href="./examples/ocf/container-1.xml"/>
            </synopsis>
        </example>

        <example xml:id="example-signatures">
            <title>The contents of the <filename>META-INF/signatures.xml</filename> file</title>
            <synopsis>
<xi:include parse="text" href="./examples/ocf/signatures-1.xml"/>
            </synopsis>
        </example>

        <example xml:id="example-encryption">
            <title>The contents of the <filename>META-INF/encryption.xml</filename> file</title>
            <synopsis>
<xi:include parse="text" href="./examples/ocf/encryption-1.xml"/>
            </synopsis>
        </example>

        <example xml:id="example-opf">
            <title>The contents of the <filename>OEBPS/As You Like It.opf</filename> file</title>
            <synopsis>
<xi:include parse="text" href="./examples/ocf/opf-1.xml"/>
            </synopsis>
        </example>

        <remark role="todo">TODO add the rest of the examples from 2.0.1? They dont add any
            contextually relevant information.</remark>

    </appendix>

    <appendix xml:id="acknowledgements" role="acknowledgements" conformance="informative">
        <title>Contributors</title>

        <para>This specification has been developed through a cooperative effort, bringing together
            publishers, vendors, software developers, and experts in the relevant standards.</para>
        <para>Version 3.0 of this specification was prepared by the International Digital Publishing
            Forum’s EPUB Maintenance Working Group. Active members of the working group at the time
            of publication of revision 2.0.1 were:</para>

        <remark role="todo">TODO 3.0 contributors list</remark>

        <para>Version 2.0.1 of this specification was prepared by the International Digital
            Publishing Forum’s EPUB Maintenance Working Group. Active members of the working group
            at the time of publication of revision 2.0.1 were:</para>
        <simplelist>
            <member><personname>Garth Conboy</personname>
                <orgname>eBook Technologies</orgname>
                <jobtitle>Working Group Vice-chair</jobtitle></member>
            <member><personname>George Kerscher</personname>
                <orgname>DAISY Consortium</orgname>
                <jobtitle>Working Group Chair</jobtitle></member>
        </simplelist>
        <simplelist>
            <member><personname>Alexis Wiles</personname>
                <orgname>OverDrive</orgname></member>
            <member><personname>Alicia Wise</personname>
                <orgname>Publishers Licensing Society</orgname></member>
            <member><personname>Amir Moghaddami</personname>
                <orgname>National Library and Archives of Iran</orgname></member>
            <member><personname>Andreas Gosling</personname>
                <orgname>Penguin UK</orgname></member>
            <member><personname>Andy Williams</personname>
                <orgname>Cambridge University Press</orgname></member>
            <member><personname>Anupam Jain</personname>
                <orgname>Innodata Isogen</orgname></member>
            <member><personname>Ben Trafford</personname>
                <orgname>Invited Expert</orgname></member>
            <member><personname>Benoit Larroque</personname>
                <orgname>Feedbooks</orgname></member>
            <member><personname>Bill McCoy</personname>
                <orgname>Invited Expert</orgname></member>
            <member><personname>Bill Kasdorf</personname>
                <orgname>Apex CoVantage</orgname></member>
            <member><personname>Bob Kasher</personname>
                <orgname>The BookMasters Group</orgname></member>
            <member><personname>Brady Duga</personname>
                <orgname>eBook Technologies</orgname></member>
            <member><personname>Byron Laws</personname>
                <orgname>PreMedia Global</orgname></member>
            <member><personname>Catherine Zekri</personname>
                <orgname>University of Montreal</orgname></member>
            <member><personname>Chris Kennedy</personname>
                <orgname>Pearson Education</orgname></member>
            <member><personname>Corey Podolsky</personname>
                <orgname>Entourage Systems Inc.</orgname></member>
            <member><personname>Cristina Mussinelli</personname>
                <orgname>AIE</orgname></member>
            <member><personname>Daihei Shiohama</personname>
                <orgname>Voyager Japan</orgname></member>
            <member><personname>Dan Amos</personname>
                <orgname>DNAML</orgname></member>
            <member><personname>Dan Galperin</personname>
                <orgname>Kobo</orgname></member>
            <member><personname>Dan Kok</personname>
                <orgname>Crossway Books and Bibles</orgname></member>
            <member><personname>Dave Cramer</personname>
                <orgname>Hachette Book Group USA</orgname></member>
            <member><personname>Dave Gunn</personname>
                <orgname>RNIB Centre for Accessible Information</orgname></member>
            <member><personname>David Mandelbaum</personname>
                <orgname>Barnes&amp;Noble.com</orgname></member>
            <member><personname>Deidra Roberts</personname>
                <orgname>World Health Organization</orgname></member>
            <member><personname>Donald Goyette</personname>
                <orgname>McGraw-Hill Professional</orgname></member>
            <member><personname>Eric Freese</personname>
                <orgname>Aptara</orgname></member>
            <member><personname>Eric Gold</personname>
                <orgname>Digital Divide Data</orgname></member>
            <member><personname>Eric Muller</personname>
                <orgname>Adobe</orgname></member>
            <member><personname>Gregory Shepherd</personname>
                <orgname>Cengage Learning</orgname></member>
            <member><personname>Guy Fain</personname>
                <orgname>Crossway Books &amp; Bibles</orgname></member>
            <member><personname>Hadrien Gardeur</personname>
                <orgname>Feedbooks</orgname></member>
            <member><personname>Hisashi Hoda</personname>
                <orgname>Voyager Japan</orgname></member>
            <member><personname>Ignacio Fernández Galván</personname></member>
            <member><personname>Israel Viente</personname>
                <orgname>Mendele He-Books</orgname></member>
            <member><personname>Jim Link</personname>
                <orgname>Macmillan Publishing Solutions</orgname></member>
            <member><personname>James MacFarlane</personname>
                <orgname>Easypress Technologies</orgname></member>
            <member><personname>Jim Rura</personname>
                <orgname>Educational Testing Service</orgname></member>
            <member><personname>John Crossman</personname>
                <orgname>Benetech</orgname></member>
            <member><personname>John Prabhu</personname>
                <orgname>HOV Services</orgname></member>
            <member><personname>John Rivlin</personname>
                <orgname>eBook Technologies</orgname></member>
            <member><personname>John Wait</personname>
                <orgname>Pearson Education</orgname></member>
            <member><personname>Jon Noring</personname>
                <orgname>Invited Expert</orgname></member>
            <member><personname>Joshua Tallent</personname>
                <orgname>eBook Architects</orgname></member>
            <member><personname>Karen Broome</personname>
                <orgname>Sony</orgname></member>
            <member><personname>Keith Fahlgren</personname>
                <orgname>Threepress Consulting</orgname></member>
            <member><personname>Kenny Johar</personname>
                <orgname>Vision Australia</orgname></member>
            <member><personname>Laurie Casey</personname>
                <orgname>Pearson</orgname></member>
            <member><personname>Lech Rzedzicki</personname>
                <orgname>Pearson UK</orgname></member>
            <member><personname>Liisa McCloy-Kelley</personname>
                <orgname>Random House</orgname></member>
            <member><personname>Lindy Humphreys</personname>
                <orgname>Wiley/ Blackwell Books</orgname></member>
            <member><personname>Liza Daly</personname>
                <orgname>Theepress Consulting</orgname></member>
            <member><personname>Makoto Murata</personname>
                <orgname>JEPA EPUB Study Group</orgname></member>
            <member><personname>Marco Croella</personname>
                <orgname>Simplicissimus Book Farm</orgname></member>
            <member><personname>Markus Gylling</personname>
                <orgname>DAISY Consortium</orgname></member>
            <member><personname>Mattias Karlsson</personname>
                <orgname>Dolphin Computer Access AB</orgname></member>
            <member><personname>Michael Smith</personname>
                <orgname>IDPF</orgname></member>
            <member><personname>Neil Soiffer</personname>
                <orgname>Design Science</orgname></member>
            <member><personname>Noah Genner</personname>
                <orgname>BookNet Canada</orgname></member>
            <member><personname>Pat Pagano</personname>
                <orgname>HarperCollins</orgname></member>
            <member><personname>Patricia Payton</personname>
                <orgname>Bowker</orgname></member>
            <member><personname>Patrick Barry</personname>
                <orgname>The Educational Company of Ireland</orgname></member>
            <member><personname>Patrick Berube</personname>
                <orgname>LEARN</orgname></member>
            <member><personname>Paul Durrant</personname>
                <orgname>Durrant Software Limited</orgname></member>
            <member><personname>Paul Norton</personname>
                <orgname>Invited Expert</orgname></member>
            <member><personname>Penelope Reid</personname>
                <orgname>EPUB User Group (UK</orgname>)</member>
            <member><personname>Perce Huang</personname>
                <orgname>Far EasTone Telecommunications</orgname></member>
            <member><personname>Peter Brantley</personname>
                <orgname>Internet Archive</orgname></member>
            <member><personname>Peter Sorotokin</personname>
                <orgname>Adobe</orgname></member>
            <member><personname>Richard Heiberger</personname>
                <orgname>HarperCollins Publishers</orgname></member>
            <member><personname>Richard Kwan</personname>
                <orgname>Invited Expert</orgname></member>
            <member><personname>Russell White</personname>
                <orgname>Random House</orgname></member>
            <member><personname>Samir Kakar</personname>
                <orgname>Aptara</orgname></member>
            <member><personname>Satya Pamarty</personname>
                <orgname>codeMantra</orgname></member>
            <member><personname>Scott Cook</personname>
                <orgname>codeMantra</orgname></member>
            <member><personname>Sean Ramsey</personname>
                <orgname>LibreDigital</orgname></member>
            <member><personname>Siobahn Padgett</personname>
                <orgname>Hachette BG USA</orgname></member>
            <member><personname>Steve Arany</personname>
                <orgname>John Wiley &amp; Sons</orgname></member>
            <member><personname>Takeshi Kanai</personname>
                <orgname>Sony</orgname></member>
            <member><personname>Thad Swiderski</personname>
                <orgname>LibreDigital</orgname></member>
            <member><personname>Tim Middleton</personname>
                <orgname>BookNet Canada</orgname></member>
            <member><personname>Trudy Conti</personname>
                <orgname>Follett</orgname></member>
            <member><personname>Tyler Ruse</personname>
                <orgname>LibreDigital</orgname></member>
            <member><personname>William Howard</personname>
                <orgname>EasyPress Technologies</orgname></member>
        </simplelist>

        <para>Version 1.0 of this specification was prepared by the International Digital Publishing
            Forum’s Unified OEBPS Container Format Working Group. Active members of the working
            group at the time of publication of revision 1.0 were:</para>
        <simplelist>
            <member><personname>Garth Conboy</personname>
                <orgname>eBook Technologies</orgname>
                <jobtitle>Working Group Co-Chair</jobtitle></member>
            <member><personname>John Rivlin</personname>
                <orgname>eBook Technologies</orgname>
                <jobtitle>Working Group Co-Chair</jobtitle></member>
            <member><personname>Jon Ferraiolo</personname>
                <orgname>IBM</orgname>
                <jobtitle>Working Group Vice-Chair</jobtitle></member>
            <member><personname>Nick Bogaty</personname>
                <orgname>IDPF</orgname>
                <jobtitle>Working Group Secretary</jobtitle></member>
        </simplelist>
        <simplelist>
            <member><personname>Kelley L. Allen</personname>
                <orgname>Random House</orgname></member>
            <member><personname>Angel Ancin</personname>
                <orgname>iRex Technologies</orgname></member>
            <member><personname>Ryan Bandy</personname>
                <orgname>Random House</orgname></member>
            <member><personname>Richard Bellaver</personname>
                <orgname>Ball State University</orgname></member>
            <member><personname>Thierry Brethes</personname>
                <orgname>Mobipocket</orgname></member>
            <member><personname>Janice Carter</personname>
                <orgname>Benetech/Bookshare.org</orgname></member>
            <member><personname>Richard Cohn</personname>
                <orgname>Adobe Systems Inc.</orgname></member>
            <member><personname>Neil De Young</personname>
                <orgname>Hachette Book Group USA</orgname></member>
            <member><personname>Linh N. Do</personname>
                <orgname>Random House, Inc.</orgname></member>
            <member><personname>Geoff Freed</personname>
                <orgname>WGBH</orgname></member>
            <member><personname>Liang Gang</personname>
                <orgname>TriWorks Asia</orgname></member>
            <member><personname>Peter Ghali</personname>
                <orgname>Motricity, ereader.com</orgname></member>
            <member><personname>Markku T. Hakkinen</personname>
                <orgname>DAISY Consortium</orgname></member>
            <member><personname>Gillian Harrison</personname>
                <orgname>NetLibrary</orgname></member>
            <member><personname>Jonathan Hevenstone</personname>
                <orgname>Publishing Dimensions</orgname></member>
            <member><personname>Theresa Horner</personname>
                <orgname>HarperCollins</orgname></member>
            <member><personname>Karen Iannone</personname>
                <orgname>Houghton Mifflin</orgname></member>
            <member><personname>Claire Israel</personname>
                <orgname>Simon &amp; Schuster</orgname></member>
            <member><personname>Mattias Karlsson</personname>
                <orgname>Dolphin Computer Access</orgname></member>
            <member><personname>Bill Kasdorf</personname>
                <orgname>Apex Publishing</orgname></member>
            <member><personname>George Kerscher</personname>
                <orgname>DAISY Consortium</orgname></member>
            <member><personname>Steve Kotrch</personname>
                <orgname>Simon &amp; Schuster</orgname></member>
            <member><personname>Bill McCoy</personname>
                <orgname>Adobe Systems, Inc.</orgname></member>
            <member><personname>Bill McKenna</personname>
                <orgname>Follett</orgname></member>
            <member><personname>Bonnie Melton</personname>
                <orgname>Houghton Mifflin College Division</orgname></member>
            <member><personname>Jon Noring</personname>
                <orgname>OpenReader Consortium</orgname> Invited Expert</member>
            <member><personname>Sayu Osayande</personname>
                <orgname>Motricity, ereader.com</orgname></member>
            <member><personname>Lee Passey</personname> Invited Expert</member>
            <member><personname>Steve Potash</personname>
                <orgname>OverDrive</orgname></member>
            <member><personname>Tyler Ruse</personname>
                <orgname>Codemantra</orgname></member>
            <member><personname>Mike Smith</personname>
                <orgname>Harlequin</orgname></member>
            <member><personname>Kimi Sugeno</personname>
                <orgname>John Wiley &amp; Sons</orgname></member>
            <member><personname>Gary Varnell</personname>
                <orgname>Osoft.com</orgname></member>
            <member><personname>Xin Wang, Ph.D.</personname>
                <orgname>ContentGuard, Inc.</orgname></member>
            <member><personname>Andrew Weinstein</personname>
                <orgname>Lightning Source</orgname></member>
            <member><personname>Tom Whitcomb</personname>
                <orgname>NetLibrary</orgname> </member>
            <member><personname>Andy Williams</personname>
                <orgname>Cambridge University Press</orgname></member>
            <member><personname>Eli Willner</personname>
                <orgname>Green Point Technology Services</orgname></member>
        </simplelist>
    </appendix>

    <bibliography xml:id="references">
        <title>References</title>

        <!-- note when adding "et al." to the end of a personname field, omit the terminating 
            period; one is auto-generated after -->

        <bibliodiv>
            <title>Normative References</title>
            <biblioentry xml:id="refIRI">
                <abbrev>IRI</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc3987.txt"> Internationalized
                        Resource Identifier</link>
                </title>
                <author>
                    <personname>M. Duerst, et al</personname>
                </author>
                <date>January 2005</date>
            </biblioentry>
            <biblioentry xml:id="refODF">
                <abbrev>ODF</abbrev>
                <title><link
                        xlink:href="http://www.oasis-open.org/committees/download.php/12572/OpenDocument-v1.0-os.pdf"
                        >ODF Open Document Format</link></title>
            </biblioentry>
            <biblioentry xml:id="refODFManifestSchema">
                <abbrev>ODF10 Manifest Schema</abbrev>
                <title><link
                        xlink:href="http://www.oasis-open.org/committees/download.php/12570/OpenDocument-manifest-schema-v1.0-os.rng"
                        >ODF 1.0 Manifest Schema</link></title>
            </biblioentry>

            <biblioentry xml:id="refOPF">
                <abbrev>OPF</abbrev>
                <title><link xlink:href="http://www.idpf.org/doc_library/epub/OPF_3.0_draft.htm"
                        >Open Packaging Format</link><remark role="todo">TODO fix
                    link</remark></title>
            </biblioentry>
            <biblioentry xml:id="refOPS">
                <abbrev>OPS</abbrev>
                <title><link xlink:href="http://www.idpf.org/doc_library/epub/OPS_2.0.1_draft.htm"
                        >Open Publication Structure</link><remark role="todo">TODO fix
                    link</remark></title>
            </biblioentry>
            <biblioentry xml:id="refRelaxNG">
                <abbrev>RelaxNG</abbrev>
                <title>
                    <link
                        xlink:href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip"
                        >ISO/IEC 19757-2: Regular-grammar-based validation &#8212; RELAX NG</link>
                </title>
                <date>3 December 2001</date>
            </biblioentry>
            <biblioentry xml:id="refRFC2046">
                <abbrev>RFC2046</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc2046.txt">Multipurpose Internet
                        Mail Extensions (MIME) Part Two: Media Types</link> (RFC 2046) </title>
                <author>
                    <personname>N. Freed, N. Borenstein</personname>
                </author>
                <date>November 1996</date>
            </biblioentry>
            <biblioentry xml:id="refRFC2048">
                <abbrev>RFC2048</abbrev>
                <title><link xlink:href="http://www.ietf.org/rfc/rfc2048.txt">Multipurpose Internet
                        Mail Extensions (MIME) Part Four: Registration Procedures </link> (RFC
                    2048)</title>
                <author>
                    <personname>Freed, et al</personname>
                </author>
                <date>November 1996</date>
            </biblioentry>
            <biblioentry xml:id="refRFC2119">
                <abbrev>RFC2119</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc2119.txt">Key words for use in RFCs
                        to Indicate Requirement Levels</link> (RFC 2119) </title>
                <date>March 1997</date>
            </biblioentry>
            <biblioentry xml:id="refRFC3986">
                <abbrev>RFC3986</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc3986.txt">Uniform Resource
                        Identifier (URI): Generic Syntax</link> (RFC 3986) </title>
                <author>
                    <personname>Berners-Lee, et al</personname>
                </author>
                <date>January 2005</date>
            </biblioentry>
            <biblioentry xml:id="refRFC3987">
                <abbrev>RFC3987</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc3987.txt">Internationalized
                        Resource Identifiers (IRIs)</link> (RFC 3987) </title>
                <author>
                    <personname>M Duerst, et al</personname>
                </author>
                <date>January 2005</date>
            </biblioentry>
            <biblioentry xml:id="refUAAG10">
                <abbrev>UAAG10</abbrev>
                <title>
                    <link xlink:href="http://www.w3.org/TR/WAI-USERAGENT/">User Agent Accessibility
                        Guidelines 1.0</link>
                </title>
                <author>
                    <personname>Ian Jacobs, et al</personname>
                </author>
                <date>17 December 2002</date>
            </biblioentry>
            <biblioentry xml:id="refUnicode5">
                <abbrev>Unicode</abbrev>
                <title>The Unicode Consortium. The Unicode Standard, Version 5.0.0, defined by: The
                    Unicode Standard, Version 5.0 (Boston, MA, Addison-Wesley, 2007. ISBN
                    0-321-48091-0)</title>
            </biblioentry>
            <biblioentry xml:id="refWCAG20">
                <abbrev>WCAG20</abbrev>
                <title>
                    <link xlink:href="http://www.w3.org/TR/WCAG20/">Web Content Accessibility
                        Guidelines (WCAG) 2.0</link>
                </title>
                <author>
                    <personname>Ben Caldwel, et al</personname>
                </author>
                <date>11 December 2008</date>
            </biblioentry>
            <biblioentry xml:id="refXML">
                <abbrev>XML</abbrev>
                <title>
                    <link xlink:href="http://www.w3.org/TR/2008/REC-xml-20081126/">Extensible Markup
                        Language (XML) 1.0 (Fifth Edition)</link>
                </title>
                <author>
                    <personname>T. Bray, et al</personname>
                </author>
                <date>26 November 2008</date>
            </biblioentry>
            <biblioentry xml:id="refXMLENCCORE">
                <abbrev>XML ENC Core</abbrev>
                <title>
                    <link xlink:href="http://www.w3.org/TR/2002/REC-xmlenc-core-20021210">XML
                        Encryption Syntax and Processing</link>
                </title>
                <author>
                    <personname>D. Eastlake, et al</personname>
                </author>
                <date>10 December 2002</date>
            </biblioentry>
            <biblioentry xml:id="refXMLDSIGCORE">
                <abbrev>XML DSIG Core</abbrev>
                <title>
                    <link xlink:href="http://www.w3.org/TR/2002/REC-xmldsig-core-20020212"
                        >XML-Signature Syntax and Processing</link>
                </title>
                <author>
                    <personname>M. Bartel, et al</personname>
                </author>
                <date>12 February 2002</date>
            </biblioentry>
        </bibliodiv>

        <bibliodiv>
            <title>Informative References</title>

            <biblioentry xml:id="refIDPFFontMangling">
                <abbrev>IDPF Font Embedding</abbrev>
                <title>
                    <link xlink:href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT">Font
                        Embedding for Open Container Format Files</link>
                </title>
                <date>May 9, 2010</date>
                <orgname>IDPF</orgname>
            </biblioentry>
            <biblioentry xml:id="refZIP">
                <abbrev>ZIP APPNOTE</abbrev>
                <title>
                    <link xlink:href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT">ZIP
                        File Format Specification</link>
                </title>
                <date>September 28, 2007</date>
                <orgname>PKWARE, Inc.</orgname>
            </biblioentry>
        </bibliodiv>
    </bibliography>

</book>
