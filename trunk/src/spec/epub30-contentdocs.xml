<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="../../util/docbook/schema/docbookspec.rng" type="xml"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbookspec.sch"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbook.sch"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:epub="http://www.idpf.org/2011/epub" xmlns:xi="http://www.w3.org/2001/XInclude"
    version="5.1">
    <title>EPUB Content Documents 3.0</title>

    <info>
        <releaseinfo>Editors Draft</releaseinfo>
        <pubdate>16 December 2010</pubdate>

        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Diffs to previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
        </printhistory>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup role="current">
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>DAISY Consortium</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>WebPaper LLC</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Elika Etemad</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname><remark role="todo">TBD - additional editors</remark></personname>
            </editor>
        </authorgroup>

        <authorgroup role="previous">
            <editor>
                <personname>Garth Conboy</personname>
                <affiliation>
                    <org>
                        <orgname>eBook Technologies</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname><remark role="todo">TBD - additional editors</remark></personname>
            </editor>
        </authorgroup>

        <!-- <abstract>
            <title>Open Publication Structure 3.0</title>
            <para>EPUB Content Documents 3.0 specifies a usage of XHTML, SVG and CSS optimized for
                representation of structured, composable, and accessible documents. EPUB Content
                Documents 3.0 is one of a family of related specifications that comprise EPUB3. The
                EPUB3 Overview describes the overall state of EPUB3 and should be read before other
                EPUB3 documents. </para>
        </abstract> -->

    </info>

    <chapter xml:id="sec-overview">
        <title>Overview</title>

        <section xml:id="sec-overview-purpose-and-scope">
            <title>Purpose and Scope</title>

            <para>This specification, EPUB Content Documents 3.0, defines profiles of XHTML, SVG,
                and CSS for use in the context of <xref linkend="gloss-epub-publication"/>s.</para>

            <xi:include href="./share/specdesc-prepara.xml"/>
            <itemizedlist xml:id="epub-specs-listing">
                <xi:include href="./share/specdesc-overview.xml"/>
                <xi:include href="./share/specdesc-publications.xml"/>
                <xi:include href="./share/specdesc-ocf.xml"/>
                <xi:include href="./share/specdesc-overlays.xml"/>
            </itemizedlist>

            <para>This specification supersedes Open Publication Structure (OPS) 2.0.1 <xref
                    linkend="refOPS2"/>. Refer to <xref linkend="refEPUB3Changes"/> for information
                on differences between this specificaton and its predecessor.</para>

        </section>

        <section xml:id="sec-overview-relations">

            <title>Relationship to Other Specifications</title>

            <section xml:id="sec-overview-relations-html">
                <title>Relationship to HTML5</title>

                <para>The <link linkend="sec-contentdocs-xhtml">XHTML document type defined by this
                        specification</link> is based on W3C HTML5. This specification inherits all
                    definitions of semantics, structure and behaviors of the elements and attributes
                    in the W3C HTML5 vocabulary from the HTML5 specification. <xref
                        linkend="refHTML5"/></para>

                <para>In addition, this specification <link
                        linkend="sec-xhtml-additional-constructs">defines a set of extensions</link>
                    to the W3C HTML5 document model. Since these extensions are optional, any conforming
                    W3C XHTML5 document is a conforming EPUB XHTML Content Document as defined
                    herein.</para>
                <!-- TODO @Matt: the "Since... para might be droppable depending on whether the overview discusses this  -->

                <note>
                    <para><remark role="todo">TODO versioning strategy info goes
                        here</remark></para>
                </note>

                <para>This specification defines a simplified processing model that does not require
                    Reading Systems to support scripting, HTML forms or the HTML DOM.</para>

                <note>
                    <para><xref linkend="gloss-epub-reading-system"/>s conformant with this
                        specification are only required to be able to process a conforming <xref
                            linkend="gloss-content-document-epub"/>. As support for scripting and HTML
                        forms are optional Reading System features, a conformant Reading System may
                        not be a fully-conformant HTML5 User Agent (i.e., it may not implement the
                        complete HTML5 processing model).</para>
                </note>

            </section>

            <section xml:id="sec-overview-relations-svg">
                <title>Relationship to SVG</title>

                <para>This specification defines <link linkend="sec-contentdocs-svg">a restricted
                        subset of SVG 1.1</link> to represent vector graphics inline in <xref
                        linkend="gloss-content-document-epub-xhtml"/>s and as standalone <xref
                        linkend="gloss-content-document-epub-svg"/>s. </para>
            </section>

            <section xml:id="sec-overview-relations-css">
                <title>Relationship to CSS</title>
                <para>The <link linkend="sec-css">CSS profile</link> defined in this specification
                    has CSS 2.1 <xref linkend="refCSS21"/> as its baseline. Any CSS Style Sheet that
                    conforms to CSS 2.1 may be used in the context of an EPUB Publication, except as
                    noted in <xref linkend="sec-css-2.1"/>.</para>
                <para>This specification also incorporates features defined by CSS3 Modules and
                    introduces EPUB-specific CSS constructs.</para>
            </section>

        </section>

        <xi:include href="./share/terminology.xml"/>

        <section xml:id="sec-overview-conformance">
            <title>Conformance</title>
            <xi:include href="./share/conformancestatements.xml"/>
        </section>

    </chapter>

    <chapter xml:id="sec-contentdocs">
        <title>EPUB3 Content Documents</title>

        <section xml:id="sec-contentdocs-doctypes">
            <title>Content Document Types</title>

            <para>This section defines two <xref linkend="gloss-content-document-epub"/> types:</para>

            <remark role="todo">TODO: add descriptions and possibly elaborate this to a fuller
                section</remark>
            <itemizedlist>
                <listitem>
                    <para><xref linkend="sec-contentdocs-xhtml"/> &#8212; which ...; and</para>
                </listitem>
                <listitem>
                    <para><xref linkend="sec-contentdocs-svg"/> &#8212; which ... .</para>
                </listitem>
            </itemizedlist>

            <para>When a given XML document instance conforms to the constraints of either of these
                definitions, it is a <xref linkend="gloss-core-media-type"/> and may be included in
                an <xref linkend="gloss-epub-publication"/>
                <xref linkend="gloss-spine"/> without the provision of <olink type="epub-spec"
                    targetdoc="publications" targetptr="sec-fallback-processing-flow"
                    >fallbacks</olink>.</para>

            <section xml:id="sec-scripted-content">
                <title>Scripted Content Documents</title>
                <remark role="todo">TODO improve</remark>
                <para>Since scripted content may be processed differently, with features such as
                    pagination potentially disabled, content items that set the property value of
                    "scripted" should not be spine items unless absolutely required by a publication
                    (i.e. scripted content should if possible be nested, contained within top-level
                    content via "object" or "iframe").</para>
                <para>Reading Systems may render <xref linkend="gloss-content-document-epub-scripted"/>s
                    as an interactive, scripted HTML User Agent according to <xref
                        linkend="refHTML5"/> rather than according to the simplified processing
                    model defined for EPUB User Agents in <xref linkend="refContentDocs3"/>, i.e.
                    with scripting enabled. Reading Systems should not enable scripting for any
                    resources other than Scripted Content Documents.</para>
                <para>Reading Systems may implement support for Scripted Content Documents in a
                    manner that disables other EPUB capabilities and/or provides a different
                    rendering such as, for example, disabling pagination.</para>
                <note>
                    <para>The <literal><olink type="epub-spec" targetdoc="publications"
                                targetptr="propdef-scripted"/></literal> property of the <xref
                            linkend="gloss-manifest"/>
                        <code>item</code> element indicates that a Content Document is
                        scripted.</para>
                </note>
            </section>
        </section>

        <section xml:id="sec-contentdocs-xhtml">
            <title>XHTML Content Documents</title>

            <caution xml:id="caution-html5">
                <para>The EPUB3 XHTML Content Document definition references features in the W3C
                    HTML5 specification that are still works in progress and may change in
                    incompatible ways. When utilizing such features, authors should consider the
                    inherent risks in terms of the potential impact on interoperability and document
                    longevity.</para>
            </caution>

            <section xml:id="sec-contentdocs-xhtml-content-conf">
                <title>XHTML Content Documents Content Conformance</title>

                <variablelist role="conformance-list" xml:id="confreq-cd-xhtml">
                    <varlistentry xml:id="confreq-cd-xhtml-docprops">
                        <term>Document Properties</term>
                        <listitem>
                            <para xml:id="confreq-cd-xhtml-docprops-xml">An <xref linkend="gloss-content-document-epub-xhtml"/>
                                must be a well-formed XML Document <xref linkend="refXML"/>.</para>
                            <para xml:id="confreq-cd-xhtml-enc">An XHTML Content Document must be encoded in UTF-8 or
                                UTF-16 <xref linkend="refUnicode5"/>.</para>
                            <para xml:id="confreq-cd-xhtml-docprops-schema">An XHTML Content Document must be valid to the
                                XHTML Content Document schema as defined in <xref
                                    linkend="app-xhtml-schema"/>and conform to all
                                content conformance constraints expressed in <xref
                                    linkend="sec-contentdocs-xhtml-def"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="confreq-cd-xhtml-fileprops">
                        <term>File Properties</term>
                        <listitem>
                            <para xml:id="confreq-cd-xhtml-fileprops-name">The XHTML Content Document's filename should use
                                the file extension <filename>.xhtml</filename>.</para>
                            <para xml:id="confreq-cd-xhtml-fileprops-docfragname">Document fragments
                                included via external general entities <xref linkend="refXML"/>
                                should not use the <filename>.xhtml</filename> extension. </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="confreq-cd-xhtml-refprops">

                        <term>Reference Properties</term>
                        <listitem>
                            <para><remark role="todo">TODO this is linked from publications, MG will
                                    move to def section later</remark></para>
                            <para xml:id="confreq-cd-xhtml-refprops-iframe" xreflabel="TODO">Only XHTML Content
                                Documents must be referenced via <code>iframe</code> elements. </para>
                            <para xml:id="confreq-cd-xhtml-refprops-fallback"> </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sec-contentdocs-xhtml-rs-conf">
                <title>XHTML Content Documents Reading System Conformance</title>
                <para><remark role="todo">TODO</remark></para>
                <!-- TODO: -->
                <!-- Use: -->
                <!--
                    <variablelist role="conformance-list">
                    <varlistentry xml:id="xxx">
                    <term>xxx</term>
                    <listitem>
                    <para xml:id="confreq-xxx">xxx</para>                        
                    </listitem>
                    <listitem>
                    <para xml:id="confreq-xxx">xxx</para>                        
                    </listitem>
                    </varlistentry>
                    </variablelist>    
                -->

                <!-- 1) Unless explicitly specified as optional or discouraged, RS must support the associated behaviors of the elements and attributes in the XHTML Content Document Core Media Type...   -->
                <!-- 2) RS's with a CSS view port must support visual rendering of XHTML Content Documents as defined in sec-css -->
                <!--   ... also need glossentries for "view port" and "CSS view port" (as well as auditory and TTS later on) -->
                <!-- 3) RS may support scripting+forms, give link to scripted property in Publications, a la: 
                     <note>It is expected that by default EPUB Reading Systems will not be script-enabled. In
                    order to request scripting for an XHTML Content Document, the scripted
                    property must be set on the corresponding manifest item. See also fallbacks section</note> -->
                <!-- 4) RS must support the processing of fallbacks defined in publications#sec-fallback-processing-flow-xhtml-intrinsic -->
                <!-- 5) RS should support embedded ARIA markup and exposure to relevant platform accessibility APIs -->
                <!-- 6)... -->

            </section>
        </section>

        <section xml:id="sec-contentdocs-xhtml-def">
            <title>XHTML Content Document Definition</title>

            <section xml:id="sec-xhtml-additional-constructs">
                <title>Additions and Enhancements</title>
                <!-- TODO @Matt: "language used in title above, "document type" used further up in purpose and scope, 
                need to harmonize this - sounds familiar? -->

                <para><remark role="todo">TODO intro para</remark></para>


                <para>All elements defined in this section are in the
                        <literal>http://www.idpf.org/2011/epub</literal> namespace unless otherwise
                    specified. For convenience, the prefix <literal>epub</literal> is used within
                    this section to identify this namespace name. </para>


                <section xml:id="sec-xhtml-semantic-inflection">
                    <title>Semantic Inflection</title>

                    <section xml:id="sec-xhtml-semantic-inflection-intro">
                        <title>Introduction</title>
                        <para>Semantic inflection is the process of attaching additional meaning
                            about the specific purpose and/or nature that an element plays in an
                                <xref linkend="gloss-content-document-epub-xhtml"/>. Semantic metadata is
                            not intended for human consumption, however. It instead provides a
                            controlled but discoverable way for Reading Systems and other User
                            Agents to learn more about the structure and content of a document,
                            providing them the opportunity to enhance the reading experience for
                            users. </para>

                        <para>A typical case for semantic inflection is on sectioning elements.
                            Although these elements effectively partition a document into its
                            logical structure on their own, they provide no indication of the role
                            any given section plays in a document. To discover if a document is
                            composed of chapters or sections, only the title would be available,
                            which often contains no hint. Using semantic inflection, each
                                <code>section</code> could be identifier as a part, section,
                            chapter, etc. enabling, for example, an accessible Reading System to
                            announce the current navigation level without resorting to nesting. </para>

                        <para>This specification defines two methods for attaching semantic
                            information to content:</para>

                        <itemizedlist>
                            <listitem>
                                <para>the <code>epub:type</code> attribute (defined in <xref
                                        linkend="attrdef-epub-type"/>); and</para>
                            </listitem>
                            <listitem>
                                <para>the W3C HTML5 <code>rel</code> attribute <xref
                                        linkend="refHTML5"/>.</para>
                            </listitem>
                        </itemizedlist>

                        <para>Each of these attributes serves a different purpose annotating
                            content. The <code>epub:type</code> attribute is the more traditional
                            attribute, annotating the element it is attached to. The
                                <code>rel</code> attribute identifies the relationship another
                            element or resource has to the attached element or to the <xref
                                linkend="gloss-content-document-epub"/> (for example, it could indicate
                            that a resource identified in the element's <code>href</code> attribute
                            contains the licensing information).</para>

                        <para>Unlike the W3C HTML5 <code>class</code> attribute, for example, which
                            provides only loose associations, these semantic attributes use terms
                            and properties from RDFa vocabularies as their values. RDFa vocabularies
                            define the meaning of each property and may provide other useful
                            metadata to Reading Systems. More importantly, they provide a measure of
                            control and predictability over the semantic inflections that can be
                            made, so even Reading Systems that aren't fully RDFa aware can predict
                            the values they will encounter when a vocabulary they recognize is
                            used.</para>

                        <para>This specification uses a subset of the vocabulary association
                            mechanism defined in RDFa 1.1 Core <xref linkend="refRDFa11Core"/>. For
                            more information, refer to <remark role="todo">TODO: where is this
                                defined specific to content docs?</remark>.</para>
                    </section>

                    <section xml:id="sec-xhtml-content-type-attribute">
                        <title>The <code>epub:type</code> Attribute</title>

                        <para>The <code>epub:type</code> attribute is intended to be functionally
                            equivalent to the W3C Role Attribute <xref linkend="refPFRoleAttribute"
                            />, but with restrictions as specified in <xref
                                linkend="sec-contentdocs-vocab-association"/>. </para>

                        <para>
                            <remark role="todo">NOTE: pending finalization of discussions with the
                                W3C, the epub:type attribute may be replaced by a reference to the
                                    <link xlink:href="http://www.w3.org/WAI/PF/role-attribute/">PF
                                    Role Attribute</link>, although the restrictions below would be
                                retained.</remark>
                        </para>

                        <variablelist xreflabel="epub:type" role="elem-synopsis"
                            xml:id="attrdef-epub-type">
                            <varlistentry>
                                <term>Attribute Name</term>
                                <listitem>
                                    <para><literal>type</literal></para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Attribute Namespace</term>
                                <listitem>
                                    <para><literal>http://www.idpf.org/2011/epub</literal></para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Occurrence</term>
                                <listitem>
                                    <para>Common, may be specified on all <link
                                            xlink:href="http://www.w3.org/TR/html5/infrastructure.html#html-elements"
                                            >HTML elements</link>.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Content Model</term>
                                <listitem>
                                    <para>CURIEs <xref linkend="refRDFa11Core"/> with restrictions
                                        given below</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </section>

                    <section xml:id="sec-xhtml-rel-attribute">
                        <title>The <code>rel</code> Attribute</title>
                        <para/>
                    </section>

                    <section xml:id="sec-contentdocs-vocab-association">
                        <title>Vocabulary Association</title>
                        <para>The following restrictions apply to the prefix mapping mechanisms of
                                <code>epub:type</code> and <code>rel</code> as compared to their
                            definitons in <xref linkend="refPFRoleAttribute"/> and <xref
                                linkend="refRDFa11Core"/> respectively:</para>
                        <itemizedlist>
                            <listitem>
                                <para>The use of <code>xmlns</code> to establish prefix mappings is
                                    not allowed; the <code>profile</code> and <code>prefix</code>
                                    attributes <xref linkend="refRDFa11Core"/> must be used
                                    instead</para>
                            </listitem>
                            <listitem>
                                <para>The <code>profile</code> and <code>prefix</code> attributes
                                    are only allowed on the document root element</para>
                            </listitem>
                            <listitem>
                                <para>The <code>profile</code> attribute has the fixed value of
                                        <literal>http://www.idpf.org/epub/30/profile/content/</literal></para>
                            </listitem>
                            <listitem>
                                <para>Prefix mappings established in the profile defined above must
                                    not be overriden locally in document instances</para>
                            </listitem>
                            <listitem>
                                <para>The <code>epub:type</code> attribute value must conform to the
                                        <code>CURIEs</code> datatype. <xref linkend="refRDFa11Core"
                                    /></para>
                            </listitem>
                        </itemizedlist>
                        <para>Given the restrictions above, all EPUB3 Publications will have the
                            following properties in common:</para>
                        <itemizedlist>
                            <listitem>
                                <para>All EPUB3 Publications (via the fixed URI in the
                                        <code>profile</code> attribute on the document root element)
                                    refer to the same profile document</para>
                            </listitem>
                            <listitem>
                                <para>The profile document defines a default vocabulary (i.e. the
                                    vocabulary whose properties are referred to without a prefix),
                                    which is the vocabulary located at
                                        <literal>http://www.idpf.org/TODO/vocab/structure/</literal>.
                                    The default vocabulary is fixed, and must not be overridden in
                                    instances. </para>
                            </listitem>
                            <listitem>
                                <para>The profile document associates the prefix <code>xhv</code> to
                                    the XHTML Vocabulary <xref linkend="refXHTMLVocab"/>. This
                                    prefix mapping is fixed, and must not be overridden in instances
                                        <remark role="todo">TODO revisit if we add pim
                                    etc</remark></para>
                            </listitem>
                            <listitem>
                                <para>The establishment of prefix mappings additional to those in
                                    the profile document is done exclusively using the root element
                                        <code>prefix</code> attribute</para>
                            </listitem>
                        </itemizedlist>
                    </section>

                    <section xml:id="sec-contentdocs-semantic-inflection-processing-reqs">
                        <title>The <code>epub:type</code> and <code>rel</code> Attributes:
                            Processing Requirements</title>
                        <para>Reading Systems must process the <code>epub:type</code> and
                                <code>rel</code> attributes as follows:</para>
                        <itemizedlist>
                            <listitem>
                                <para>A Reading System may associate specialized behaviors with
                                    none, some or all of the properties given in the default
                                    vocabulary.</para>
                            </listitem>
                            <listitem>
                                <para>A Reading System may associate specialized behaviors with
                                    properties given in vocabularies other than the default
                                    one.</para>
                            </listitem>
                            <listitem>
                                <para>A Reading System may support the dereferencing of unrecognized
                                    CURIEs occurring in the <code>epub:type</code> and
                                        <code>rel</code> attributes. If a Reading System
                                    successfully dereferences an unrecognized CURIE, it may
                                    (depending on the information available in the referenced
                                    vocabulary property) employ adaptive behaviors in response to
                                    the change to the document structural semantics that results
                                    from the CURIE dereferencing.</para>
                            </listitem>
                            <listitem>
                                <para>If the attempt to dereference an unrecognized CURIE fails, or
                                    if the dereferencing of unrecognized CURIEs is not supported,
                                    then the Reading System must ignore the given unrecognized CURIE
                                    and continue processing the <code>epub:type</code> or
                                        <code>rel</code> attribute.</para>
                            </listitem>
                            <listitem>
                                <para>When Reading System behavior associated with a given CURIE
                                    conflicts with behavior associated with the carrying XHTML
                                    element, then the behavior associated with the element must take
                                    precedence.</para>
                            </listitem>
                        </itemizedlist>
                    </section>

                    <section xml:id="examples-semantic-inflection">
                        <title>Semantic Inflection: Examples</title>
                        <informalexample>
                            <para>The following example shows the <code>rel</code> and
                                    <code>epub:type</code> attributes used to inflect footnote and
                                note reference semantics. The property used is defined in the
                                default vocabulary. </para>
                            <synopsis>
<xi:include href="./examples/contentdocs/epub-type-1.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>
                </section>

                <section xml:id="sec-xhtml-epub-trigger">
                    <title>The <literal>epub:trigger</literal> Element</title>
                    <para>The <code>trigger</code> element associates an <code>event</code> from a
                        specified source object (<code>observer</code>) with a desired action to be
                        performed with a specified target object (<code>ref</code>), enabling
                        content-provided user interface for controlling multimedia objects such as
                        audio and video playback even in a non-scripted context.</para>
                    <variablelist xreflabel="spine" role="elem-synopsis" xml:id="elemdef-opf-spine">
                        <varlistentry>
                            <term>Element name</term>
                            <listitem>
                                <para><literal>trigger</literal></para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Usage</term>
                            <listitem>
                                <para>As a child of <code>head</code>. Repeatable.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Attributes</term>
                            <listitem>
                                <variablelist role="elem-synopsis-attlist">
                                    <varlistentry xml:id="attrdef-trigger-id">
                                        <term><literal>id</literal>
                                            <option>[optional]</option></term>
                                        <listitem>
                                            <xi:include href="./share/id-prose-para.xml"/>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-action">
                                        <term><literal>action</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>Legal values:
                                                  <code>show</code>|<code>hide</code>|<code>play</code>|<code>pause</code>|<code>resume</code>|<code>mute</code>|<code>unmute</code>
                                            </para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-ref">
                                        <term><literal>ref</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>relative URL to the element which is an object of
                                                an action (#id form)</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-event">
                                        <term><literal>ev:event</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>applicable event for this trigger as defined in
                                                [XML Events]</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-observer">
                                        <term><literal>ev:observer</literal>
                                            <option>[required]</option></term>
                                        <listitem>
                                            <para>source object for this trigger as defined in [XML
                                                Events]</para>
                                        </listitem>
                                    </varlistentry>
                                </variablelist>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Content Model</term>
                            <listitem>
                                <para>Empty.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                    <para>The <code>trigger</code> element associates an <code>event</code> from a
                        specified source object (<code>observer</code>) with a desired action to be
                        performed with a specified target object (<code>ref</code>), enabling
                        content-provided user interface for controlling multimedia objects such as
                        audio and video playback even in a non-scripted context. The semantics of
                        the defined <code>action</code> values are: <itemizedlist>
                            <listitem>
                                <para><emphasis role="bold">show</emphasis> - element's visibility
                                    property is set to visible</para>
                            </listitem>
                            <listitem>
                                <para><emphasis role="bold">hide</emphasis>: element's visibility
                                    property is set to hidden</para>
                            </listitem>
                            <listitem>
                                <para><emphasis role="bold">play</emphasis>: play from the beginning
                                    (only applicable to video or audio elements)</para>
                            </listitem>
                            <listitem>
                                <para><emphasis role="bold">pause</emphasis>: pause playing (only
                                    applicable to video or audio elements)</para>
                            </listitem>
                            <listitem>
                                <para><emphasis role="bold">resume</emphasis>: resume playing (only
                                    applicable to video or audio elements)</para>
                            </listitem>
                            <listitem>
                                <para><emphasis role="bold">mute</emphasis> - mute sound (only
                                    applicable to video or audio elements)</para>
                            </listitem>
                            <listitem>
                                <para><emphasis role="bold">unmute</emphasis>: unmute sound (only
                                    applicable to video or audio elements)</para>
                            </listitem>
                        </itemizedlist><remark role="todo">TODO: example - image button controlling
                            video pause/resume</remark>
                    </para>
                    <para>Reading Systems that support video or audio playback must support the
                            <code>epub:trigger</code> element.</para>
                </section>
                <section xml:id="sec-xhtml-alternate-style-tags">
                    <title>Alternate Style Tags</title>
                    <para>In accordance with <xref linkend="refAlternateStyleTags"/> , the
                            <literal>class</literal> attribute of the <literal>link</literal>
                        element is considered to have four values with pre-assigned semantics as
                        denoted in that specification: <literal>horizontal</literal>,
                            <literal>vertical</literal>, <literal>day</literal>, and
                            <literal>night</literal>. </para>
                    <para>Reading Systems should select and utilize such tagged style sets as
                        appropriate, as further discussed in that specification.</para>
                </section>
            </section>

            <section xml:id="sec-xhtml-restrictions">
                <title>Deviations and Constraints</title>
                <!-- @Matt the purpose of the title above is to say "restrictions on or deviations from HTML5" -->
                <section xml:id="sec-xhtml-mathml">
                    <title>MathML Support</title>
                    <para><remark role="todo">TODO review this, as there have been changes in the
                            HTML5 spec recently wrt mathml</remark></para>

                    <para>XHTML Content Documents may include, and Reading Systems must support,
                        MathML content as defined in <xref linkend="refHTML5"/>, subject to the
                        further restrictions specified in this section.</para>
                    <para>XHTML Content Documents are required to limit usage of MathML to a
                        restricted subset of the support defined in <xref linkend="refHTML5"/>, as
                        defined in the following subsections. This subset is designed to ease the
                        implementation burden on Reading Systems and promote accessibility, while
                        retaining compatibility with HTML5 User Agents. These restrictions limit the
                        MathML to presentation MathML except inside of a semantics element. They
                        also provide guidelines on how fall back images and alternative text should
                        be given.</para>
                    <section xml:id="sec-xhtml-mathml-content">
                        <title>Content MathML</title>
                        <para>All content MathML elements shall be inside of an
                                <literal>annotation-xml</literal> element. The
                                <code>annotation-xml</code> element shall be the second child of a
                            semantics element whose first child is presentation MathML. The
                                <code>annotation-xml</code> element shall set the encoding attribute
                            to <code>"MathML-Content"</code> or to
                                <code>"application/mathml-content+xml"</code>. These two values are
                            equivalent. The value of the name attribute shall be
                                <code>"contentequiv"</code>. </para>
                    </section>
                    <section xml:id="sec-annot-types">
                        <title>Annotation Types</title>
                        <para>Legal <literal>annotation</literal> and
                                <literal>annotation-xml</literal> attributes and content are
                            restricted in the following ways:</para>
                        <itemizedlist>
                            <listitem>
                                <para>The value for the content dictionary must be
                                        <literal>mathmlkeys</literal></para>
                            </listitem>
                            <listitem>
                                <para>The values for <literal>name</literal> must be
                                        <literal>alternate-representation</literal> or
                                        <literal>contentequiv</literal></para>
                            </listitem>
                            <listitem>
                                <para>The values for <literal>encoding</literal> for
                                        <literal>annotation-xml</literal> should be
                                        <literal>MathML-Content/application/mathml-content+xml</literal>
                                    or <literal>application/xhtml+xml</literal> When the latter is
                                    specified, the content must be conformant with this XHTML
                                    Content Document specification content, with the further
                                    restrictions that it must have the same flow model (block or
                                    inline) as the parent MathML, and must not itself contain MathML
                                    content</para>
                            </listitem>
                        </itemizedlist>

                    </section>
                    <section xml:id="sec-fallback-images">
                        <title>Fallback Images</title>
                        <para>Fallback images should be provided on the math element or on
                            annotation. Preference order for fallback is: annotation, math
                            (altimg).</para>
                        <para>In the context of EPUB, content conformance and fallback processing
                            rules for such fallback images in MathML content are defined as the same
                            as defined for the <code>&lt;img></code> element, as more specifically
                            described in [Publication3].</para>
                    </section>
                </section>
                <section xml:id="sec-xhtml-svg">
                    <title>SVG Support</title>

                    <para>This section defines conformance requirements for SVG embedded in XHTML
                        Content Documents. Refer to <xref linkend="sec-contentdocs-svg"/> for
                        conformance requirements for SVG as a standalone document type.</para>

                    <remark role="todo">TODO: assuming most of these reqs. are unnecessary if html5
                        pointer to svg 1.2 is wrong</remark>
                    <variablelist role="conformance-list">
                        <varlistentry role="conformance-item">
                            <term>??? Properties</term>
                            <listitem>
                                <para>Each instance of SVG markup must be contained in an
                                    <literal>svg</literal> element in the SVG namespace <xref
                                        linkend="refSVG"/>.</para>
                                <para>Each instance of SVG markup must represent a valid instance of SVG
                                    1.1 <xref linkend="refSVG"/> as defined by that
                                    specification.</para>
                                <para>SVG markup must not include animation elements or
                                    attributes.</para>
                                <para>SVG markup must additionally adhere to the requirements for
                                    embedding SVG markup in XHTML Content Documents as defined in W3C
                                    HTML5 <xref linkend="refHTML5"/>.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                    <para>When an XHTML Content Document contains instances of SVG markup, the
                        corresponding manifest <literal>item</literal> in the <xref
                            linkend="gloss-package-document"/> must identify indicate the
                            <olink>svg</olink> property <remark role="todo">TODO:
                        how</remark>.</para>

                </section>
                <section xml:id="sec-xhtml-unicode-restriction">
                    <title>Unicode Private Use Characters and Embedded Fonts</title>
                    <para>Any text characters in XHTML and SVG Content Documents that map to a code
                        point within one of the Private Use Area (PUA) ranges as defined in <xref
                            linkend="refUnicode5"/> must occur within a string that is styled or
                        attributed in a manner that includes a reference to an <link
                            linkend="sec-css-fonts">embedded font</link> that contains an
                        appropriate glyph for that code point. </para>
                </section>
                <section xml:id="sec-xhtml-resource-refs">
                    <title>Resource References</title>
                    <!-- <para>Relative references to resources including but not
                        limited to <code>src</code> attributes of <code>img</code>,
                            <code>object</code>, and <code>iframe</code> elements must correspond to
                        manifest items and otherwise follow the rules defined for Core Media Types
                        and fallback processing in [Publications3]. The <code>src</code> atribute of
                        any <code>iframe</code> element must reference an XHTML Content Document as
                        defined herein.</para> -->

                    <!-- @WH mg suggests rewrite as per below, note that its repeated in SVG and CSS sections -->
                    <!-- this para may live better in sec-contentdocs-xhtml-content-conf -->
                    <para>Unless explicitly defined by this specification or its sibling
                        specifications to be an <xref linkend="gloss-external-resource"/>, any
                        resource referenced from an XHTML Content document (typically but not
                        exclusively using the HTML <code>src</code> or <code>href</code> attributes)
                        must correspond to a <xref linkend="gloss-manifest"/> item and follow the
                        rules defined for <olink type="epub-spec" targetdoc="publications"
                            targetptr="sec-publication-resources">Core Media Types and fallback
                            processing</olink> and <olink type="epub-spec" targetdoc="publications"
                            targetptr="sec-resource-locations">Publication Resource
                            locations</olink>. </para>
                </section>
                <section xml:id="sec-xhtml-discouraged">
                    <title>Discouraged Constructs</title>
                    <para>A number of elements and attributes defined in <xref linkend="refHTML5"/>
                        are present primary for backwards-compatibility with Reading Systems
                        compatible with HTML4 or earlier versions. Use of the constructs detailed
                        below in Content Documents is strongly discouraged. </para>

                    <section xml:id="sec-xhtml-discouraged-rp">
                        <title>The <code>rp</code> Element</title>
                        <para>The <code>rp</code> element is intended to provide for an optional
                            parenthesis display around ruby markup by older version Reading Systems
                            that do not support Ruby. HTML5 User Agents would be expected to simply
                            ignore occurances of <code>rp</code>, so use in Content Documents is
                            discouraged.</para>
                    </section>
                </section>
            </section>

        </section>

        <section xml:id="sec-contentdocs-svg">
            <title>SVG Content Documents</title>

            <section xml:id="sec-contentdocs-svg-intro">
                <title>Introduction</title>

                <para>The Scalable Vector Graphics 1.1 specification <xref linkend="refSVG"/>
                    defines a format for representing final-form vector graphics and text in <xref
                        linkend="gloss-content-document-epub-xhtml"/>s, either as the referenced
                    resources of images or embedded within the document markup (as defined by <xref
                        linkend="refHTML5"/>). Standalone SVG documents can also be an alternative
                    to XHTML documents in certain circumstances, such as when final-form page images
                    are the only suitable representation of content (such as "manga" or comic
                    books). </para>

                <para>This section defines conformance requirements for SVG as a standalone document
                    type. Refer to <xref linkend="sec-xhtml-svg"/> for conformance requirements for
                    SVG embedded in XHTML.</para>

            </section>

            <section xml:id="sec-contentdocs-svg-content-conf">
                <title>SVG Content Documents Content Conformance</title>

                <variablelist role="conformance-list">
                    <varlistentry xml:id="confreq-mo-docprops">
                        <term>Document Properties</term>
                        <listitem role="conformance-item">
                            <para xml:id="confreq-svg-docprops-xml">An <xref linkend="gloss-content-document-epub-svg"/> must 
                                be a well-formed XML Document <xref linkend="refXML"/>.</para>
                            <para xml:id="confreq-svg-docprops-enc">An SVG Content Document must be
                                encoded in UTF-8 or UTF-16 <xref linkend="refUnicode5"/>.</para>
                            <para xml:id="confreq-svg-docprops-schema">An SVG Content Document must be valid to the SVG Content Document 
                                schema as defined in <xref linkend="app-svg-schema"/> and conform to all
                                content conformance constraints expressed in <xref
                                    linkend="sec-contentdocs-svg-def"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="confreq-svg-fileprops">
                        <term>File Properties</term>
                        <listitem>
                            <para xml:id="confreq-svg-fileprops-name">An SVG Content Document's filename
                                should use the file extension <filename>.svg</filename>.</para>
                            <para xml:id="confreq-svg-fileprops-docfragname">Document fragments included via external general entities 
                                <xref linkend="refXML"/> should not use the <filename>.svg</filename> extension. </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sec-contentdocs-svg-rs-conf">
                <title>SVG Content Documents Reading System Conformance</title>

                <para>A conformant <xref linkend="gloss-epub-reading-system"/> must meet all of the
                    following criteria for processing <xref linkend="gloss-content-document-epub-svg"
                    />s:</para>

                <orderedlist role="conformance-list">
                    <listitem role="conformance-item">
                        <para>It may support scripting (see the <olink targetdoc="publications"
                                targetptr="scripted" type="epub-spec">scripted
                            property</olink>).</para>
                    </listitem>
                </orderedlist>

                <para><remark role="todo">TODO</remark></para>
            </section>

            <section xml:id="sec-contentdocs-svg-def">
                <title>SVG Content Document Definition</title>

                <para><remark role="todo">TODO</remark></para>

                <section xml:id="sec-svg-embedded-content">
                    <title>Embedded Content</title>
                    <para><remark role="todo">TODO: similar requirement to MathML wrt embedded flow
                            content in SVG</remark></para>
                </section>

                <section xml:id="sec-svg-resource-refs">
                    <title>Resource References</title>
                    <!-- <para>Relative references to resources including but not
                        limited to <code>src</code> attributes of <code>img</code>,
                        <code>object</code>, and <code>iframe</code> elements must correspond to
                        manifest items and otherwise follow the rules defined for Core Media Types
                        and fallback processing in [Publications3]. The <code>src</code> atribute of
                        any <code>iframe</code> element must reference an XHTML Content Document as
                        defined herein.</para> -->
                    <!-- @WH mg suggests rewrite as per below, note that its repeated in XHTML and CSS sections -->
                    <para>Unless explicitly defined by this specification or its sibling
                        specifications to be an <xref linkend="gloss-external-resource"/>, any
                        resource referenced from an SVG Content document
                        <!-- (typically but not exclusively using the HTML
                        <code>src</code> and <code>href</code> attributes) -->
                        must correspond to a <xref linkend="gloss-manifest"/> item and follow the
                        rules defined for <olink type="epub-spec" targetdoc="publications"
                            targetptr="sec-publication-resources">Core Media Types and fallback
                            processing</olink> and <olink type="epub-spec" targetdoc="publications"
                            targetptr="sec-resource-locations">Publication Resource
                            locations</olink>. </para>
                </section>
            </section>

        </section>
    </chapter>

    <xi:include href="./sections/epub30-contentdocs-nav.xml"/>

    <chapter xml:id="sec-css">
        <title>EPUB Style Sheets</title>

        <para>This section defines a profile for Cascading Style Sheets (CSS). An instance of a CSS
            Style Sheet that conforms to this profile is a <xref linkend="gloss-core-media-type"/>
            and is referred to in this specification and its sibling specfications as an <link
                linkend="gloss-stylesheet">EPUB Style Sheet</link>.</para>

        <caution xml:id="caution-css">
            <para>The EPUB3 CSS Profile references CSS specifications that are still works in
                progress and may change in incompatible ways. When utilizing features from such
                specifications, authors should consider the inherent risks in terms of the potential
                impact on interoperability and document longevity.</para>
        </caution>

        <section xml:id="sec-css-content-conf">
            <title>EPUB Style Sheet Content Conformance</title>

            <para>A CSS Style Sheet is conformant to this specification if it adheres to all content
                restrictions given in <xref linkend="sec-css-profile"/>.</para>

            <para>EPUB Style Sheets may be included in or referenced by <xref
                    linkend="gloss-content-document-epub-xhtml"/>s. EPUB Style Sheets must not be
                included in or referenced by <xref linkend="gloss-content-document-epub-svg"/>s, as SVG
                provides its own profile for CSS. <xref linkend="refSVG"/>
                <remark role="todo">TODO @WH: Is the above SVG statement
                    sufficient/correct?</remark>
            </para>

            <!-- mg: note that the below para is repeated in SVG and CSS sections, can be made into an
                xinclude with a switch            -->
            <para>Unless explicitly defined by this specification or its sibling specifications to
                be an <xref linkend="gloss-external-resource"/>, any resource referenced from an
                EPUB Style Sheet must correspond to a <xref linkend="gloss-manifest"/> item and
                follow the rules defined for <olink type="epub-spec" targetdoc="publications"
                    targetptr="sec-publication-resources">Core Media Types and fallback
                    processing</olink> and <olink type="epub-spec" targetdoc="publications"
                    targetptr="sec-resource-locations">Publication Resource locations</olink>. </para>

        </section>

        <section xml:id="sec-css-rs-conf">
            <title>EPUB Style Sheet Reading System Conformance</title>

            <para>Reading Systems with a CSS view port should, unless detailed otherwise in <xref
                    linkend="sec-css-profile"/> below, support (render as defined by the
                corresponding specification in the view port) all features included in this
                profile.</para>

            <para>Reading systems must handle any encountered unsupported CSS features as <link
                    xlink:href="http://www.w3.org/TR/CSS21/conform.html#ignore">defined</link> in
                    <xref linkend="refCSS21"/>. </para>
            <note>
                <para>Reading Systems have varying capabilities with regards to CSS rendering
                    support. For this reason, Reading Systems may ignore some or all style
                    information of an EPUB Style Sheet. Note also that even in the case where a
                    Reading System does have a CSS view port, it is likely to render in a manner
                    that differs from typical HTML5 User Agents (e.g. paginating content rather than
                    providing a infinitely scrolling surface). </para>
            </note>
        </section>

        <section xml:id="sec-css-profile">
            <title>EPUB3 CSS Profile</title>

            <section xml:id="sec-css-2.1">
                <title>CSS 2.1</title>

                <para>The style baseline of an EPUB Style Sheet is Cascading Style Sheets Level 2
                    Revision 1 <xref linkend="refCSS21"/>. An EPUB Style Sheet may include, and a
                    Reading System must accept, all style sheet constructs normatively defined in
                        <xref linkend="refCSS21"/>, with the following exceptions:</para>

                <itemizedlist>
                    <listitem>
                        <para>The <literal>fixed</literal> value of the
                                <property>position</property> property must not be included in an
                            EPUB Style Sheet.</para>
                    </listitem>
                    <listitem>
                        <para>The <property>direction</property> and
                                <property>unicode-bidi</property> properties must not be included in
                            an EPUB Style Sheet. Authors should use appropriate XHTML markup to
                            express directionality information instead. <remark role="TODO">TODO we
                                are still unpositioned wrt bidi unicode control
                            chars</remark></para>
                    </listitem>
                </itemizedlist>

                <!-- TODO is this really the only one that must be supported? -->
                <para>Reading Systems that have a CSS view port must support the
                        <property>font-family</property> property.</para>

                <note>
                    <para>The ability of Reading Systems to paginate absolutely positioned layouts
                        is not guaranteed, and thus the reliance on absolutely positioned layouts is
                        discouraged. Reading Systems may choose not to support these property
                        values.</para>
                </note>
            </section>
            <section xml:id="sec-css-2.0-list-style-type">
                <title>CSS 2.0</title>
                <para>EPUB Style Sheets may include, in addition to the list styles listed in
                    CSS2.1, the following list style types <link
                        xlink:href="http://www.w3.org/TR/2008/REC-CSS2-20080411/generate.html#lists"
                        >defined in</link>
                    <xref linkend="refCSS20"/>:</para>
                <itemizedlist>
                    <listitem>
                        <para><literal>cjk-ideographic</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>hiragana</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>katakana</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>hiragana-iroha</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>katakana-iroha</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>hebrew</literal></para>
                    </listitem>
                </itemizedlist>
                <para>Additional details on these list styles can be found in <xref
                        linkend="refCSS3Lists"/>. <remark role="todo">The definitions in CSS3 Lists
                        are incorrect, so remove this paragraph if an updated WD has not yet been
                        published.</remark>
                </para>
            </section>
            <section xml:id="sec-css-voice-characteristics">
                <title>CSS Speech</title>
                <para>EPUB Style Sheets may include all features defined in the CSS Speech Module
                        <xref linkend="refCSS3Speech"/>. Reading Systems that support text-to-speech
                    should support in particular the following properties:</para>
                <itemizedlist>
                    <listitem>
                        <para><literal>voice-family</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>pause</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>cue</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>rest</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>speak</literal></para>
                    </listitem>
                </itemizedlist>
            </section>
            <section xml:id="sec-css-fonts">
                <title>CSS Fonts Level 3</title>
                <!-- jdaggett, editor of CSS3 Fonts, believes the below-referenced @font-face portion of
                 CSS3 Fonts to be stable. Other parts of the CSS3 Fonts spec are not yet stable.
                 2011-01-11 -->

                <para>EPUB Style Sheets may include <literal>@font-face</literal> rules as defined
                    in the CSS Fonts Module Level 3 <xref linkend="refCSS3FontsModule"/>
                    specification. OpenType <xref linkend="refOpenType"/>, WOFF <xref
                        linkend="refWOFF"/> and SVG <xref linkend="refSVG"/> fonts may be referenced
                    using the <code>@font-face</code> mechanism. For EPUB 2.0 Reading System forward
                    compatibility purposes, a system font should also be refenced from the Style
                    Sheet.</para>

                <para>Reading Systems with a CSS view port must support OpenType <xref
                        linkend="refOpenType"/> and WOFF <xref linkend="refWOFF"/> fonts embedded
                    using the <literal>@font-face</literal> rule, as well as the font obfuscation
                    mechanism defined in <olink type="epub-spec" targetdoc="ocf"
                        targetptr="font-obfuscation"/>. Reading Systems may support SVG
                    fonts.</para>

                <para>In addition, Reading Systems must support at least the following
                        <literal>@font-face</literal> font descriptors:</para>

                <itemizedlist>
                    <listitem>
                        <para><literal>font-family</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>src</literal></para>
                    </listitem>
                    <listitem>
                        <para><remark role="todo"><literal>unicode-range</literal> TODO Pending
                                final WG decision</remark></para>
                    </listitem>
                    <listitem>
                        <para><literal>font-size</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>font-style</literal></para>
                    </listitem>
                    <listitem>
                        <para><literal>font-variant</literal> (<literal>normal</literal> and
                                <literal>small-caps</literal> values only)</para>
                    </listitem>
                    <listitem>
                        <para><literal>font-weight</literal></para>
                    </listitem>
                </itemizedlist>

                <para>Refer to <olink type="epub-spec"
                        targetptr="sec-fallback-processing-flow-fonts" targetdoc="publications"/>
                    for requirements regarding font fallback processing. </para>

            </section>
            <section xml:id="sec-css-text">
                <title>CSS Text Level 3</title>
                <para>EPUB Style Sheets may include the following properties defined in the CSS Text
                    Level 3 <xref linkend="refCSS3Text"/> specification:</para>
                <itemizedlist>
                    <listitem>
                        <para><property>line-break</property></para>
                    </listitem>
                    <listitem>
                        <para><property>punctuation-trim-start</property></para>
                    </listitem>
                    <listitem>
                        <para><property>text-align-last</property></para>
                    </listitem>
                    <listitem>
                        <para><property>text-emphasis</property></para>
                    </listitem>
                    <listitem>
                        <para><property>text-emphasis-style</property></para>
                    </listitem>
                    <listitem>
                        <para><property>text-emphasis-color</property></para>
                    </listitem>
                    <listitem>
                        <para><property>text-transform</property></para>
                    </listitem>
                    <listitem>
                        <para><property>word-break</property></para>
                    </listitem>
                    <listitem>
                        <para><property><remark role="todo">TODO
                            </remark>hypenation</property></para>
                    </listitem>
                </itemizedlist>
            </section>
            <section xml:id="sec-css-writing-modes">
                <title>CSS Writing Modes</title>
                <para>EPUB Style Sheets may include all of the features defined in the CSS Writing
                    Modes Module Level 3 <xref linkend="refCSS3WritingModesModule"/> specification
                    except for the <property>direction</property> and
                        <property>unicode-bidi</property> properties. It is non-conforming to use
                    these properties in an XHTML Content Document. Authors should use appropriate
                    XHTML markup to express directionality information instead.</para>
            </section>
            <section xml:id="sec-css-media-queries">
                <title>Media Queries</title>
                <para>EPUB Style Sheets may include <literal>@media</literal> rules with media
                    queries as defined in the Media Queries ( <xref linkend="refMediaQueries"/> )
                    specification.</para>
            </section>
            <section xml:id="sec-css-multi-column">
                <title>CSS Multi-Column Layout</title>
                <para>EPUB Style Sheets may include all of the features defined in the CSS
                    Multi-column Layout Module <xref linkend="refCSS3Multicol"/> specification with
                    the exception of the <property>column-span</property> property. </para>
                <caution>
                    <para>Authors should not rely on column behavior in overflow conditions as this
                        behavior is unstable and may change.</para>
                </caution>
                <caution>
                    <para>Pagination algorithms are not fully defined in CSS. Authors should
                        therefore expect exact pagination poins to vary from Reading System to
                        Reading System.</para>
                </caution>
                <para>Reading Systems must treat the <property>oeb-column-number</property> property
                    as an alias for the <property>column-count</property> property. The use of the
                        <property>oeb-column-number</property> property in EPUB Style Sheets is
                    deprecated; this conformance requirement will be removed in the next major
                    version of EPUB.</para>
            </section>
            <section xml:id="sec-css-ruby-position">
                <title>Ruby Positioning</title>
                <para>EPUB Style Sheets may include the <property>-epub3-ruby-position</property>
                    property as defined below:</para>

                <informaltable>
                    <thead>
                        <tr>
                            <td>Name:</td>
                            <td>-epub-ruby-position</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Value:</td>
                            <td>over | under | <remark role="todo">right</remark></td>
                        </tr>
                        <tr>
                            <td>Initial:</td>
                            <td>over</td>
                        </tr>
                        <tr>
                            <td>Applies to:</td>
                            <td>ruby text elements</td>
                        </tr>
                        <tr>
                            <td>Inherited:</td>
                            <td>yes</td>
                        </tr>
                        <tr>
                            <td>Percentages:</td>
                            <td>N/A</td>
                        </tr>
                        <tr>
                            <td>Media:</td>
                            <td>visual</td>
                        </tr>
                        <tr>
                            <td>Computed value:</td>
                            <td>as specified</td>
                        </tr>
                    </tbody>
                </informaltable>

                <para>This property controls the placement of ruby text with respect to its base
                    text. Values have the following meanings:</para>

                <variablelist>
                    <varlistentry>
                        <term><literal>over</literal></term>
                        <listitem>
                            <para>Ruby text is positioned on the <link
                                    xlink:href="http://www.w3.org/TR/css3-writing-modes/#over"
                                    >over</link> side of the ruby base.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term><literal>under</literal></term>
                        <listitem>
                            <para>Ruby text is positioned on the <link
                                    xlink:href="http://www.w3.org/TR/css3-writing-modes/#under"
                                    >under</link> side of the ruby base.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term><literal>right</literal></term>
                        <listitem>
                            <para>Ruby text is positioned on the right side of the base text. (This
                                value is typically used for Zhuyin Fuhao (Bopomofo) ruby.)</para>
                            <para><remark role="todo">Need a name that avoids misuse in vertical
                                    text when <literal>over</literal> is intended.</remark></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <note>
                    <para>NOTE: This property will become an alias for the
                            <property>ruby-position</property> property in the CSS Ruby Module <xref
                            linkend="refCSS3Ruby"/>.</para>
                </note>
            </section>
            <section xml:id="sec-css-oeb-head-foot">
                <title>Display Property Values <code>oeb-page-head</code> and
                        <code>oeb-page-foot</code></title>
                <para>In addition to the standard values defined for the <code>display</code>
                    property in <xref linkend="refCSS21"/> (<link
                        xlink:href="http://www.w3.org/TR/CSS2/visuren.html#display-prop">Section
                        9.2.4</link>), EPUB Style Sheets may specify the values
                        <literal>oeb-page-head</literal> and <literal>oeb-page-foot</literal>. </para>
                <para>Reading Systems should present the content of an element assigned
                        <code>display: oeb-page-head</code> only as a header, and the content of an
                    element assigned <code>display: oeb-page-foot</code> only as a footer. Neither
                    should be simply presented as if it were <code>inline</code> or
                        <code>block</code>. Reading Systems, however, are free to present headers
                    and footers either in special areas as usual for paper publications, or to make
                    them available in another way. For example, a device with a small screen might
                    instead pop them up on demand. </para>
                <para>For purposes of page layout, these display values are similar to block boxes
                    with an absolute position (i.e. a position value of fixed or absolute). That is,
                    they are removed from the normal flow and a new block box is created with its
                    own flow. Margins, padding, and other block characteristics are determined as if
                    the element had <code>position: fixed</code> set. </para>
                <para>An element assigned <code>display: oeb-page-head</code> or <code>display:
                        oeb-page-foot</code> shall not be considered in effect while any preceding
                    content remains presented, and shall remain in effect until another header or
                    footer respectively is in effect instead, or until no part of its parent element
                    remains presented, whichever occurs first.. For example, when rendered to a
                    screen with appropriate style settings, the myhead-classed div element below
                    would become the page header as soon as nothing preceding the containing div is
                    displayed and go out of effect when that div is no longer visible: <remark
                        role="todo">WM: what if there is content IN the containing div preceding the
                        header - is that "preceding content"?</remark></para>
                <para>
                    <informalexample>
                        <synopsis>
 &lt;div>
   &lt;div class="myhead" style="display: oeb-page-head">
      The OEB Publication Structure: Introduction
   &lt;/div>
   &lt;h2>Introduction&lt;/h2>
   &lt;p>...&lt;/p>
&lt;/div>           
            
        </synopsis>
                    </informalexample>
                </para>
            </section>

        </section>

    </chapter>

    <appendix xml:id="app-xhtml-schema">
        <title>XHTML Content Document Schema</title>
        <para>The schema for XHTML Content Documents is available at <link
                xlink:href="../schema/epub-xhtml-30.nvdl"
            >../schema/epub-xhtml-30.nvdl</link>.</para>
        <para>This schema is normative. In case of conflicts between the specification prose and
            this schema, the schema shall be considered definitive.</para>

        <xi:include href="./share/schema-usage.xml"/>

    </appendix>

    <appendix xml:id="app-xhtml-nav-schema">
        <title>EPUB Navigation Document Schema</title>
        <para>The schema for EPUB Navigation Documents is available at <link
                xlink:href="../schema/epub-nav-30.nvdl">../schema/epub-nav-30.nvdl</link>.</para>
        <para>This schema is normative. In case of conflicts between the specification prose and
            this schema, the schema shall be considered definitive.</para>

        <xi:include href="./share/schema-usage.xml"/>

    </appendix>

    <appendix xml:id="app-svg-schema">
        <title>SVG Content Document Schema</title>
        <para><remark role="todo">TODO</remark></para>
        <xi:include href="./share/schema-usage.xml"/>
    </appendix>

    <appendix xml:id="acknowledgements" role="acknowledgements" conformance="informative">
        <title>Contributors</title>
        <xi:include href="./share/contributors.xml"/>
    </appendix>

    <xi:include href="./share/references.xml"/>

    <appendix xml:id="DUMMY_REMOVE">
        <!-- a dummy that is removed by the build -->
        <title>THIS SECTION SHOULD NOT BE IN THE BUILD</title>
        <para xml:id="physical-container-zip"/>
        <para xml:id="sec-package-documents"/>
        <para xml:id="sec-core-media-types"/>
        <para xml:id="sec-spine-elem"/>
        <para xml:id="sec-manifest-elem"/>
        <para xml:id="sec-fallback-processing-flow"/>
    </appendix>

</book>
