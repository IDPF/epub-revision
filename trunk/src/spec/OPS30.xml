<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="../../util/docbook/schema/docbookspec.rng" type="xml"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbookspec.sch"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbook.sch"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1b2">
   <title>EPUB Content Documents 3.0</title>

    <info>
        <releaseinfo>Internal Working Group Draft</releaseinfo>
        <pubdate>2010-xx-xx</pubdate>

        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Diffs to previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
        </printhistory>

        <copyright>
            <year>2010</year>
            <year>2011</year>
            <holder>International Digital Publishing Forumâ„¢</holder>
        </copyright>

        <legalnotice>
            <para>All rights reserved. This work is protected under Title 17 of the United States
                Code. Reproduction and dissemination of this work with changes is prohibited except
                with the written permission of the International Digital Publishing Forum.</para>
        </legalnotice>

        <authorgroup>
            <editor>
                <personname>Garth Conboy</personname>
                <affiliation>
                    <org>
                        <orgname>eBook Technologies</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>DAISY Consortium</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>WebPaper LLC</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname><remark role="todo">TBD - additional editors</remark></personname>
            </editor>

        </authorgroup>

        <abstract>
            <title>Open Publication Structure 3.0</title>
            <para>EPUB Content Documents 3.0 specifies a usage of XHTML, SVG and CSS optimized for
                representation of structured, cmposable, and accessible documents. EPUB Content
                Documents 3.0 is one of a family of related specifications that comprise EPUB3. The
                EPUB3 Overview describes the overall state of EPUB3 and should be read before other
                EPUB3 documents. </para>
        </abstract>

    </info>

    <chapter xml:id="sec-overview">
        <title>Overview</title>
        <section xml:id="sec-overview-purpose-and-scope">
            <title>Purpose and Scope</title>
            <para>This specification, EPUB Content Documents 3.0, defines a usage of XHTML, SVG, and
                CSS optimized for representation of structured, composable, and accessible
                documents. OPS is one of a family of related specifications that comprise <link
                    linkend="refEPUB">EPUB3</link>, the third major revision of an interchange and
                delivery format for digital publications based on XML and Web Standards. The <link
                    linkend="refEPUB">EPUB3 Overview</link> describes the overall state of EPUB3 and
                specifies publication-level conformance requirements and should be read before other
                EPUB3 documents.</para>
            <para>TODO: Link element microformat (fantasai stuff).</para>
            <para>It is intended that this specification be able to be utilized in multiple
                contexts. While illustrative examples in this specification may be based on its use
                by EPUB, this specification normatively defines its conformance requirements in a
                self-standing manner. Conformance requirements specific to EPUB are normatively
                defined in the EPUB3 Overview.</para>
        </section>
        <section xml:id="sec-overview-relationship">
            <title>Relationship to Other Specifications</title>
            <para>This specification relies on several building-block specifications. The XHTML
                vocabulary is defined by HTML5, and by default all terminology used in this
                specification has the same meaning as its use in HTML5. OPS also relies on XML
                Namespaces, and in this specification the term "XML namespace" (or just "namespace")
                has the meaning defined in that specification. The SVG vocabulary is defined by SVG
                1.1. Additionally, OPF defines rules for CSS style sheets based on CSS 2.1 and
                certain CSS 3 modules.</para>
            <para>This specification supersedes </para>
            <para>
                <remark role="todo"><remark role="todo">TODO: enumerate other dependent specs
                    </remark>TODO: statement about layered use of terminology from other dependent
                    specs </remark>
                <remark role="todo">TODO: statement about conformance requirements based on
                    dependent specs<remark role="todo">TODO: make this a list not prose
                        paragraphs</remark></remark>
            </para>
            </section>

        <section xml:id="sec-overview-terminology">
            <title>Terminology</title>
            <glosslist>
                <glossentry xml:id="gloss-epub-publication">
                    <glossterm>EPUB Style Sheet (or, in this specification, "Style
                        Sheet")</glossterm>
                    <glossdef>
                        <para>A CSS Style Sheet that is conformant with the content conformance
                            requirements of this specification.</para>
                    </glossdef>
                    </glossentry>
                    <glossentry>
                    <glossterm>XHTML Content Document</glossterm>
                    <glossdef>
                        <para>An XML Document that is conformant with the constraints of version 5
                            of the XML serialization of HTML (XHTML5), which adheres to additional
                            restrictions and may contain additional constructs as defined by this
                            specification.</para>
                    </glossdef>
                    </glossentry>
                        <glossentry> <glossterm>SVG Content Document</glossterm>
                    <glossdef>
                        <para>An XML Document that is conformant with the constraints of Scalable
                            Vector Graphics 1.1 (SVG 1.1), which adheres to additional restrictions
                            and may contain additional constructs as defined by this
                            specification.</para>
                    </glossdef>
                    </glossentry>
                            <glossentry><glossterm>Content Document</glossterm>
                    <glossdef>
                        <para>An XHTML Content Dozcument or SVG Content Document.</para>
                    </glossdef>
                    </glossentry>
                                <glossentry><glossterm>User Agent</glossterm>
                    <glossdef>
                        <para>A User Agent as defined in HTML5 that processes Content Documents and
                            EPUB Style Sheets in a manner conformant with this specification.
                        </para>
                    </glossdef>
                </glossentry>
            </glosslist>
        </section>            
        
        <section xml:id="sec-overview-conformance">
            <title>Conformance</title>
            <xi:include href="./share/conformancestatements.xml"/>
        </section>

    </chapter>

    <chapter xml:id="sec-opf-introduction">
        <title>Introduction to Content Documents</title>
        <para>EPUB3 Content Documents defines a usage of XHTML5 and SVG 1.1, as well as several
            additional elements and attributes and requirements for use of CSS, intended to
            facilitate representation of structured, accessible documents that may be composed
            together and presented to users in a variety of manners as part of an overall
            publication. EPUB3 Content Documents also defines a simplified User Agent processing
            model.</para>
        <section xml:id="sec-ocf-overview-intro">
            <title>Relationship to HTML</title>
            
        
        <para>EPUB3 Content Documents does not define a new language but rather a usage of HTML5 and
                CSS. Every EPUB Content Document is a conforming HTML5 Document, and every style
                sheet conformant with CSS 2.1 is a valid EPUB3 Style Sheet It is not required that
                an EPUB3 Content Document utilize any constructs beyond those defined in HTML5 and
                CSS 2.1. Optionally, EPUB3 Content Documents and OPS Style Sheets may utilize
                additional constructs defined in this specification. However, OPS is a subset
                profile; in particular, it requires that content utilize the XML serialization of
                HTML5 (XHTML5), and use of CSS in EPUB3 Content Documents is restricted to CSS 2.1
                and a specfic set of capabilities from CSS3 Modules.</para>
        <para>Since Content Documents are XHTML5 documents it is completely legitimate to process
                EPUB3 Content Documents according to the processing model defined for HTML5 (which
                is defined to require User Agents to ignore the additional namespaced elements and
                attributes). This specification defines a simplified processing model that does not
                require support for scripting or a DOM, further constraining the requirements given
                in the HTML5 specification. Any User Agent conformant with this specification must
                be able to process any conforming EPUB3 Content Document according to this
                specification, but it is not presumed that such User Agents will necessarily be in
                full conformance with HTML5, i.e. they may not implement the complete processing
                model of HTML5. </para>
        </section>
        <section xml:id="sec-overview-css-relationship">
            <title>Relationship to CSS </title>
            <para>Content Documents, like any HTML documents, may reference style sheets or include
                inline style information. EPUB3 is based on CSS 2.1, and any style sheet content
                legitimate in CSS 2.1 may appear in a style sheet utilized by an EPUB3 Content
                Document. In addition, EPUB3 utilizes several style capabilities defined by CSS3
                Modules, and defines several additional CSS constructs specific to EPUB3. </para>
        </section>
        <section xml:id="sec-example-doc">
            <title>Example Content Document</title>
            <para>This section is non-normative, showing an EPUB3 Content Document that utilizes
                ...</para>
            <itemizedlist>
                <listitem>
                    <para>Hello World</para>
                </listitem>
                <listitem>
                    <para>Another?</para>
                </listitem>
            </itemizedlist>
        </section>
    </chapter>
    <chapter xml:id="sec-ocf-overview">
        <title>XHTML5 Content Documents</title>
        <section xml:id="sec-additional_constructs">
            <title>Additional Language Constructs</title>
            <para>Any conformant XHTML5 document can be considered to be a conformant Content
                Document according to this specification, so long as its uses and references to
                styles conform to the EPUB Style Sheet rules described in the following chapter. In
                addition, a Content Document may utilize several additional constructs, these
                include: </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>role attribute</para>
                    </listitem>
                    <listitem>
                        <para>trigger elements</para>
                    </listitem>
                    <listitem>
                        <para>dictionary elements</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>Since these constructs are defined in the "epub-content" namespace, XHTML5 Content
                Documents should be successfully processed by XHTML User Agents, as they are
                required to ignore unknown namespace-qualified elements and attributes. Thus, XHTML5
                Content Documents according to this specification ALWAYS remain valid XHTML5
                Documents according to the HTML5 specification, whether or not they include any of
                these optional constructs.</para>
            <para>The following sections specify these constructs in more detail.</para>
            
        <section xml:id="sec-xhtml-content-role-attribute">
            <title>Role Attribute</title>
            <para>Blah.</para>
            <para>Blah.</para>
        </section>
            <section xml:id="sec-xhtml-content-triggers">
                <title>Declarative Triggers</title>
                <para>Blah.</para>
                <para>Blah.</para>
            </section>
            <section xml:id="sec-xhtml-dictionaries">
                <title>Dictionary Markup</title>
                <para>Blah.</para>
                <para>Blah.</para>
            </section>
        </section>
        <section xml:id="sec-xhtml-mathml">
            <title>MathML Support</title>
            <para>XHTML Content Documents may include, and User Agents must support, MathML content
                as defined in HTML5, subject to the further restrictions specified in this
                section.</para>
            <para>XHTML Content Documents are required to limit usage of MathML to a restricted
                subset of the support defined in HTML5, as defined in the following subsections.
                This subset is designed to ease the implementation burden on User Agents and promote
                accessibility, while retaining compatibility with HTML5 User Agents. These
                restrictions limit the MathML to presentation MathML except inside of a semantics
                element. They also provide guidelines on how fall back images and alternative text
                should be given.</para>
            <section xml:id="sec-xhtml-mathml-content">
                <title>Content MathML</title>
                <para>All content MathML elements SHALL be inside of an annotation-xml element. The annotation-xml element SHALL be the second child of a semantics element whose first child is presentation MathML. The annotation-xml element SHALL set the encoding attribute to "MathML-Content" or to "application/mathml-content+xml". These two values are equivalent. The value of the name attribute SHALL be "contentequiv".
                    
                </para>
            </section>
            <section xml:id="sec-annot-types">
                <title>Legal Annotation Types</title>
                <para>Blah.</para>
                <para>Blah.</para>
            </section>
            <section xml:id="sec-fallback-images">
                <title>Fallback Images</title>
                <para>Blah.</para>
                <para>Blah.</para>
            </section>
            </section>
            
        <section xml:id="sec-ocf-overview-examples">
            <title>User Agent Conformance Requirements</title>
            <para>This section specifies additional expectations for ...</para>
            <para/>
         
            

        </section>
        <section xml:id="sec-xhtml-schema">
            <title>Schema Information</title>
            <para>The W3C HTML5 Working Group has determined not to create a normative baseline
                schema for XHTML5. Thus, it is not possible to create a normative schema for the
                additional elements and attributes defined in this specification. However, a
                non-normative RelaxNG schema can be obtained at <remark role="todo">TODO</remark>
            </para>
           
        </section>
    </chapter>

    <chapter xml:id="sec-css">
        <title>EPUB Style Sheets</title>
        <para>This section defines a baseline for CSS that may be included in or referenced by Content Documents.
         User Agents conformant with this specification should support these CSS constructs, consistent with their
        usage context. Content Documents may utilize any constructs defined in this section, with the proviso that
        User Agents according to this specification may ignore some or all style information, and are likely to render
        in a manner that differs from typical HTML5 User Agents (e.g. paginating content rather than providing a
         infinitely scrolling surface).</para>
        <section xml:id="sec-css-2.1">
            <title>CSS 2.1</title>
            <para>The style baseline in EPUB3 is Cascading Style Sheets version 2.1 (CSS 2.1). An
                EPUB style Sheet MAY include, and a User Agent MUST accept, all style sheet
                constructs defined in CSS 2.1.</para>
            <para>Use of the CSS position property values to achieve absolute positioning (i.e.
                    <literal>absolute</literal> and <literal>fixed</literal>) is strongly
                discouraged, and User Agents may choose not to support these property values.</para>
        </section>

        <section xml:id="sec-css-hyphenation">
            <title>CSS Text Level 3 Hyphenation </title>
            <para>EPUB Style Sheets MAY include, and a User Agent MUST accept, either of two
                properties "line-break" and "word-break" which have the meanings defined in CSS Text
                Level 3. </para>
        </section>
        <section xml:id="sec-css-media-queries">
            <title>Media Queries </title>
            <para>EPUB Style Sheets MAY include, and a User Agent MUST accept, @media queries
                as defined in the CSS Media Queries specification. </para>
        </section>
        <section xml:id="sec-css-multi-column">
            <title>Multi-Column Layout </title>
            <para>EPUB Style Sheets MAY include, and a User Agent MUST accept, all of the constructs defined
                in the CSS Multi-column Layout Module specification. </para>
        </section>
        
    </chapter>

    <appendix xml:id="acknowledgements" role="acknowledgements" conformance="informative">
        <title>Contributors</title>
        <xi:include href="./share/contributors.xml"/>
    </appendix>

    <bibliography xml:id="references">
        <title>References</title>

        <!-- note when adding "et al." to the end of a personname field, omit the terminating 
            period; one is auto-generated after -->

        <bibliodiv>
            <title>Normative References</title>
            <biblioentry xml:id="refIRI">
                <abbrev>IRI</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc3987.txt"> Internationalized
                        Resource Identifier</link>
                </title>
                <author>
                    <personname>M. Duerst, et al</personname>
                </author>
                <date>January 2005</date>
            </biblioentry>
            <biblioentry xml:id="refODF">
                <abbrev>ODF</abbrev>
                <title><link xlink:href="http://www.oasis-open.org/committees/download.php/12572/OpenDocument-v1.0-os.pdf">ODF Open Document Format</link></title>
            </biblioentry>
            <biblioentry xml:id="refODFManifestSchema">
                <abbrev>ODF10 Manifest Schema</abbrev>
                <title><link xlink:href="http://www.oasis-open.org/committees/download.php/12570/OpenDocument-manifest-schema-v1.0-os.rng">ODF 1.0 Manifest Schema</link></title>
            </biblioentry>

            <biblioentry xml:id="refEPUB">
                <abbrev>EPUB Overview</abbrev>
                <title><link xlink:href="http://www.idpf.org/doc_library/epub/OPF_3.0_draft.htm">Open Packaging Format</link><remark role="todo">TODO fix
                    link</remark></title>
            </biblioentry>
            <biblioentry xml:id="refOPF">
                <abbrev>OPF</abbrev>
                <title><link xlink:href="http://www.idpf.org/doc_library/epub/OPF_3.0_draft.htm">Open Packaging Format</link><remark role="todo">TODO fix
                    link</remark></title>
            </biblioentry>
            <biblioentry xml:id="refOPS">
                <abbrev>OPS</abbrev>
                <title><link xlink:href="http://www.idpf.org/doc_library/epub/OPS_2.0.1_draft.htm">Open Publication Structure</link><remark role="todo">TODO fix
                    link</remark></title>
            </biblioentry>
            <biblioentry xml:id="refRelaxNG">
                <abbrev>RelaxNG</abbrev>
                <title>
                    <link xlink:href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip">ISO/IEC 19757-2: Regular-grammar-based validation &#8212; RELAX NG</link>
                </title>
                <date>3 December 2001</date>
            </biblioentry>
            <biblioentry xml:id="refRFC2119">
                <abbrev>RFC2119</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc2119.txt">Key words for use in RFCs
                        to Indicate Requirement Levels</link> (RFC 2119) </title>
                <date>March 1997</date>
            </biblioentry>
            <biblioentry xml:id="refRFC3986">
                <abbrev>RFC3986</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc3986.txt">Uniform Resource
                        Identifier (URI): Generic Syntax</link> (RFC 3986) </title>
                <author>
                    <personname>Berners-Lee, et al</personname>
                </author>
                <date>January 2005</date>
            </biblioentry>
            <biblioentry xml:id="refRFC3987">
                <abbrev>RFC3987</abbrev>
                <title>
                    <link xlink:href="http://www.ietf.org/rfc/rfc3987.txt">Internationalized
                        Resource Identifiers (IRIs)</link> (RFC 3987) </title>
                <author>
                    <personname>M Duerst, et al</personname>
                </author>
                <date>January 2005</date>
            </biblioentry>
            <biblioentry xml:id="refUAAG10">
                <abbrev>UAAG10</abbrev>
                <title>
                    <link xlink:href="http://www.w3.org/TR/WAI-USERAGENT/">User Agent Accessibility
                        Guidelines 1.0</link>
                </title>
                <author>
                    <personname>Ian Jacobs, et al</personname>
                </author>
                <date>17 December 2002</date>
            </biblioentry>
            <biblioentry xml:id="refUnicode5">
                <abbrev>Unicode</abbrev>
                <title>The Unicode Consortium. The Unicode Standard, Version 5.0.0, defined by: The
                    Unicode Standard, Version 5.0 (Boston, MA, Addison-Wesley, 2007. ISBN
                    0-321-48091-0)</title>
            </biblioentry>
            <biblioentry xml:id="refWCAG20">
                <abbrev>WCAG20</abbrev>
                <title>
                    <link xlink:href="http://www.w3.org/TR/WCAG20/">Web Content Accessibility
                        Guidelines (WCAG) 2.0</link>
                </title>
                <author>
                    <personname>Ben Caldwel, et al</personname>
                </author>
                <date>11 December 2008</date>
            </biblioentry>
            <biblioentry xml:id="refXML">
                <abbrev>XML</abbrev>
                <title>
                    <link xlink:href="http://www.w3.org/TR/2008/REC-xml-20081126/">Extensible Markup
                        Language (XML) 1.0 (Fifth Edition)</link>
                </title>
                <author>
                    <personname>T. Bray, et al</personname>
                </author>
                <date>26 November 2008</date>
            </biblioentry>
        </bibliodiv>

    </bibliography>  
</book>