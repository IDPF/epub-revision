<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="../../util/docbook/schema/docbookspec.rng" type="xml"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbookspec.sch"?>
<?oxygen SCHSchema="../../util/docbook/schema/docbook.sch"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:epub="http://www.idpf.org/2011/epub" xmlns:xi="http://www.w3.org/2001/XInclude"
    version="5.1">
    <title>EPUB3 Changes from EPUB 2.0.1</title>

    <info>
        <releaseinfo>Working Group Draft</releaseinfo>
        <pubdate>31 January 2010</pubdate>
        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
            <formalpara>
                <title>Diffs to previous version</title>
                <para><link xlink:href="www.idpf.org/specs/TODO"/></para>
            </formalpara>
        </printhistory>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>
                    <remark role="todo">TBD - additional editors</remark>
                </personname>
            </editor>
        </authorgroup>
        <abstract>
            <title>EPUB3 Changes from EPUB 2.0.1</title>
            <para>EPUB3 defines the third major revision of EPUB, a digital publication interchange
                and delivery format based on XML and Web Standards. This document informatively
                describes the changes in EPUB3 from the previous release, EPUB 2.0.1.</para>
        </abstract>
    </info>

    <chapter xml:id="sec-overview">
        <title>Overview</title>
        <section xml:id="sec-overview-purpose-and-scope">
            <title>Purpose and Scope</title>

            <para>This document, EPUB3 Differences from EPUB 2.0.1, describes changes made in the
                third major revision fo EPUB, a digital publication interchange and delivery format
                based on XML and Web Standards, including some rationale for the changes, and some
                guidance for content authors and Reading System developers regarding backwards
                compatibility considerations.</para>

        </section>
    </chapter>

    <chapter xml:id="sec-introduction">
        <title>Introduction</title>

        <para>EPUB is an interchange and delivery format for digital publications, based on XML and
            Web Standards. An EPUB Publication can be thought of as a reliable packaging of Web
            content that represents a digital book, magazine, or other type of publication, and able
            to distributed for online and offline consumption. </para>

        <para>This document, EPUB3 Differences from EPUB 2.0.1, describes changes made in the third
            major revision of EPUB, including some rationale for the changes, and some guidance for
            content authors and Reading System developers regarding backwards compatibility
            considerations.</para>

        <para>This document is entirely non-normative. The EPUB specification documents should be
            consulted for definitive information on EPUB3:</para>

        <itemizedlist xml:id="sibling-specs">
            <listitem>
                <para>EPUB Publications 3.0 <xref linkend="refPublications3"/>, which defines
                    publication-level semantics and overarching conformance requirements for EPUB
                    Publications.</para>
            </listitem>

            <listitem>
                <para>EPUB Content Documents 3.0 <xref linkend="refContentDocs3"/>, which defines
                    profiles of XHTML, SVG and CSS for use in the context of EPUB
                    Publications.</para>
            </listitem>

            <listitem>
                <para>EPUB Open Container Format (OCF) 3.0 <xref linkend="refOCF30"/>, which defines
                    a file format and processing model for encapsulating a set of related resources
                    into a single-file (ZIP) Container.</para>
            </listitem>

            <listitem>
                <para>EPUB Media Overlays 3.0 <xref linkend="refOverlays3"/>, which defines a format
                    and a processing model for synchronization of text and audio.</para>
            </listitem>

        </itemizedlist>

        <para>Unless otherwise specified, terms used herein have the meaning defined in these
            specifications.</para>

        <section xml:id="sec-diff-intro-history">
            <title>EPUB Revision History</title>

            <para>EPUB had its roots in the interchange format known as the Open EBook Publication
                Structure (OEBPS). OEBPS 1.0 was approved in 1999 by the Open eBook Forum, an
                organization that later became the International Digital Publishing Forum (IDPF).
                Subsequent revisions 1.1 and 1.2 were approved by the IDPF in 2001 and 2002
                respectively.</para>

            <para> It was realized that a need existed for a format standard that could be used for
                delivery as well as interchange, and work began in late 2005 on a single-file
                container format for OEPBS, which was approved by the IDPF as the OEBPS Container
                Format (OCF) in 2006. Work on a 2.0 revision of OEBPS began in parallel which was
                approved as the renamed EPUB 2.0 in October, 2007, consisting of a triumvirate of
                specifications: Open Package Format (OPF), Open Publication Format (OPF) together
                with OCF. EPUB 2.0.1, a maintenance update to the 2.0 specification set primarily
                intended clarify and correct errata in the specifications, was approved in
                September, 2010. <xref linkend="refOPF2"/>
                <xref linkend="refOPS2"/>
                <xref linkend="refOCF2"/></para>
        </section>

        <section xml:id="sec-dev-process">
            <title>EPUB3 Development Process</title>

            <para>This document is part of EPUB3, which is being developed by the IDPF EPUB Working
                Group under a <link
                    xlink:href="http://www.idpf.org/idpf_groups/IDPF-EPUB-WG-Charter-4-27-2010.html"
                    >charter approved by the IDPF in May, 2010</link> and is expected to be
                completed and approved by IDPF by May, 2011. </para>

        </section>

    </chapter>

    <chapter xml:id="sec-history">
        <title>Changes to EPUB Specification Documents</title>
        <para>In addition to significant changes in functionality, the EPUB3 specifications are
            structured and named differently than EPUB 2.0.1, and certain terminology changes have
            been made to improve clarity. The following sections describe these changes.</para>
        <section xml:id="sec-history-intro">
            <title>Changes in Document Organization </title>
            <para>In order to help those familiar with EPUB 2.0.1 to understand the mapping of
                information in EPUB3, the following table shows where information in EPUB3 is
                located relative to the EPUB 2.0.1 specifications.</para>
            <table frame="all">
                <title>Specification Document Organization</title>
                <tgroup cols="3">
                    <colspec colname="c1" colnum="1" colwidth="1.04*"/>
                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                    <colspec colname="c3" colnum="3" colwidth="1.02*"/>
                    <thead>
                        <row>
                            <entry>Area</entry>
                            <entry>EPUB3 Specification</entry>
                            <entry>EPUB 2.0.1 Specification</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>Overview</entry>
                            <entry>EPUB3 Overview</entry>
                            <entry>(throughout)</entry>
                        </row>

                        <row>
                            <entry>Publication-level Specification &amp; Package Docs</entry>
                            <entry>EPUB Publications 3.0</entry>
                            <entry>Open Packaging Format 2.0.1</entry>
                        </row>

                        <row>
                            <entry>Content-level Specification</entry>
                            <entry>EPUB Content Documents 3.0</entry>
                            <entry>Open Publication Structure 2.0.1</entry>
                        </row>
                        <row>
                            <entry>EPUB Navigation Documents</entry>
                            <entry>EPUB Publications 3.0</entry>
                            <entry>N/A (NCX referenced as DAISY specification)</entry>
                        </row>
                        <row>
                            <entry>Media Overlays</entry>
                            <entry>EPUB Media Overlays 3.0</entry>
                            <entry>N/A</entry>
                        </row>
                        <row>
                            <entry>Container packaging</entry>
                            <entry>EPUB Open Container Format 3.0</entry>
                            <entry>Open Container Format 2.0.1</entry>
                        </row>
                        <row>
                            <entry>Changes from previous version</entry>
                            <entry>EPUB3 Changes from EPUB 2.0.1</entry>
                            <entry>(throughout)</entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
        <section xml:id="sec-terminology-changes">
            <title>Changes in Terminology </title>
            <para>It was a non-goal for EPUB3 to make gratuitous terminology changes from EPUB
                2.0.1. However, changes in document organization, feature set and conformance
                requirements did result in a number of consequential changes in terminology.</para>
            <para>Each specification contains a Terminology section near the top that defines and
                explains the new terms; e.g. <olink type="epub-spec" targetptr="sec-terminology"
                    targetdoc="publications"/>. </para>
        </section>
    </chapter>

    <chapter xml:id="sec-new-changed">
        <title>New and Changed Functionality in EPUB3</title>
        <para>This section describes the major new and changed functionality and constructs present
            in EPUB3.</para>
        <section xml:id="sec-new-changed-xhtml5">
            <title>HTML5</title>
            <para>EPUB3's base content format is based on the the XML serialization of HTML5
                (XHTML5) <xref linkend="refContentDocs3"/>, whereas EPUB2 supported two basic
                content types, a profile of XHTML 1.1 and a semantically-enhanced markup focused on
                accessibility concerns, DTBook <xref linkend="refOPS2"/>.</para>
            <para>The EPUB3 XHTML Content Document definition includes both extensions to and
                restrictions on its HTML5 base (many of which are discussed below); refer to <olink
                    type="epub-spec" targetdoc="contentdocs" targetptr="sec-xhtml-additions"/> and
                    <olink type="epub-spec" targetdoc="contentdocs" targetptr="sec-xhtml-deviations"
                /> for complete information.</para>
        </section>
        <section xml:id="sec-new-changed-audio-video">
            <title>Audio and Video</title>
            <para>EPUB3 inherits support for the HTML5 &lt;audio> and &lt;video> elements. EPUB
                further specifies, in its <olink type="epub-spec" targetdoc="publications"
                    targetptr="sec-epub-rs-conf">definition of support for Core Media Types</olink>,
                that all Reading Systems that support audio playback must support MP3 audio, and
                that all Reading Systems that support video playback must support H.264 video with
                AAC audio in MPEG4 container format (and standalone AAC audio).</para>
        </section>
        <section xml:id="sec-new-changed-scripting">
            <title>Scripting</title>
            <para>EPUB3 Reading Systems may optionally support <!-- JavaScript --> scripting, which
                was explicitly disallowed in EPUB 2. Scripted content <olink type="epub-spec"
                    targetdoc="publications" targetptr="propdef-scripted">must be marked as such in
                    the package manifest</olink> and is subject to other restrictions and
                limitations as further described in <olink type="epub-spec" targetdoc="contentdocs"
                    targetptr="sec-scripted-content"/>.</para>
        </section>
        <section xml:id="sec-new-changed-trigger">
            <title>Triggers</title>
            <para>To facilitate content-specific user experiences for audio and video controls
                without requiring scripting, a new <code>trigger</code> element is defined in the
                    <olink type="epub-spec" targetdoc="contentdocs" targetptr="sec-xhtml">EPUB
                    profile of XHTML5</olink>, that allows declarative binding of activation events
                from image or textual elements to properties of audio and video players (e.g., play,
                stop, pause).</para>
        </section>       
        <section xml:id="sec-new-changed-semantic-inflection">
            <title>Semantic Inflection</title>
            <para>A method for inflecting domain-specific semantics in XHTML using attributes has
                been added. Refer to <olink type="epub-spec" targetdoc="contentdocs"
                    targetptr="sec-xhtml-semantic-inflection"/> for further information.</para>
        </section>
        <section xml:id="sec-new-changed-speech">
            <title>Speech</title>
            <para>Multiple features to assist Text-to-Speech (TTS) engines have been added. These
                include Package-level Pronunciation Lexicons, SSML attributes in XHTML, and support
                for the CSS3 Speech Module. <xref linkend="refContentDocs3"/></para>
        </section>
        <section xml:id="sec-new-changed-css">
            <title>CSS</title>
            <para>EPUB3 defines a profile of CSS that is based on CSS 2.1, with added modules from
                CSS3, whereas EPUB23 was based on a specific subset of CSS 2. Refer to <olink
                    type="epub-spec" targetdoc="contentdocs" targetptr="sec-css"/> for further
                information.</para>
        </section>
        <section xml:id="sec-new-changed-svg">
            <title>SVG</title>
            <para>SVG documents can now appear in the spine in EPUB3; i.e., SVG no longer needs to
                be nested within an XHTML document.</para>
        </section>
        <section xml:id="sec-new-changed-mathml">
            <title>MathML</title>
            <para>Support for MathML is new in EPUB3. Refer to <olink type="epub-spec"
                    targetdoc="contentdocs" targetptr="sec-xhtml-mathml"/> for further
                information.</para>
        </section>
        <section xml:id="sec-new-changed-mo">
            <title>Text and Audio Syncronization</title>
            <para>The separate specification EPUB Media Overlays 3.0 <xref linkend="refOverlays3"/>,
                defines a format and a processing model for publication-wide synchronization of text
                and audio.</para>
        </section>
        <section xml:id="sec-new-changed-meta-package">
            <title>Publication Metadata and Identity</title>
            <para>The minimally required Package metadata as defined in EPUB 2.0.1 remains
                fundamentally unchanged. Only one new required metadata property,
                    <code>dcterms:modified</code> has been added. This new property contributes to
                the new solution to persistence in Publication Identifiers, as further discussed in
                    <olink type="epub-spec" targetdoc="publications"
                    targetptr="sec-package-metadata-identifiers"/>.</para>
            <para>The generic Package Document <code>meta</code> element <olink type="epub-spec"
                    targetdoc="publications" targetptr="sec-meta">has been enhanced</olink> with a
                declarative term vocabulary assocation mechanism, as well as the ability to describe
                not only the Publication as a whole, but also individual resources and/or fragments
                within it.</para>
            <para>A new metadata <olink type="epub-spec" targetdoc="publications"
                    targetptr="sec-link-elem"><code>link</code> element</olink> has been added,
                allowing the association of external supplementary metadata resources with the
                publication, e.g. ONIX or XMP records.</para>
        </section>
        <section xml:id="sec-new-changed-meta-resources">
            <title>Resource Metadata</title>
            <para>The new <code>properties</code> attribute on the Package Document manifest
                    <code>item</code> and spine <code>itemref</code> elements allows for the
                declaration of metadata about individual Publication Resources.</para>
            <para> Under certain defined circumstances these declarations are required in EPUB3
                (such as for example declaring that a Content Document contains scripting). Refer to
                    <olink type="epub-spec" targetdoc="publications"
                    targetptr="sec-item-property-values"/> and <olink type="epub-spec"
                    targetdoc="publications" targetptr="sec-itemref-property-values"/> for further
                information.</para>
        </section>
        <section xml:id="sec-new-changed-embedded-fonts">
            <title>Embedded Fonts</title>
            <para>EPUB3 requires Reading Systems to support the OpenType and WOFF font formats for
                embedded fonts in conjunction with the CSS font-face property. Refer to <olink
                    type="epub-spec" targetdoc="contentdocs" targetptr="sec-css-fonts"/> for further
                information.</para>
        </section>
        <section xml:id="sec-new-changed-nav">
            <title>Navigation</title>
            <para>EPUB3 defines a new human- and machine-readable grammar for publication-wide
                navigation information via a specialized adaptation of the general EPUB XHTML
                Content Document. <olink type="epub-spec" targetdoc="contentdocs"
                    targetptr="sec-xhtml-nav"/> supersedes the NCX grammar used in EPUB 2.</para>
            <para>While NCX support was optional for EPUB2 Reading Systems, inclusion of and support
                for EPUB Navigation Documents it is required in EPUB3.</para>
            <para>As noted in <olink type="epub-spec" targetdoc="publications"
                    targetptr="ncx-superseded"/>, EPUB3 Publications may include the EPUB 2 NCX for
                EPUB 2 Reading System forward compatibility purposes.</para>
        </section>
        <section xml:id="sec-new-changed-bindings">
            <title>Bindings</title>
            <para>The new <code>bindings</code> element provides a means to define script-based
                handlers for non-standard media types. Refer to <olink type="epub-spec"
                    targetdoc="publications" targetptr="sec-bindings-elem"/> for further
                information. </para>
        </section>
        <section xml:id="sec-new-changed-remote">
            <title>Remote Resources</title>
            <para>There are new <olink type="epub-spec" targetdoc="publications"
                    targetptr="sec-resource-locations">restrictions on references to remote
                    resources</olink> (i.e. Publication Resources not located in the OCF Container).
                The implications of this change are more fully described in <link
                    linkend="sec-removals-filesystem-container">Removal of Filesystem
                    Container</link>.</para>
        </section>
        <section xml:id="sec-new-changed-ocf-obf">
            <title>Font Obfuscation</title>
            <para>A new normative section <olink type="epub-spec" targetdoc="ocf"
                    targetptr="font-obfuscation"/> has been added the Open Container Format
                specification. This was previously <link
                    xlink:href="http://www.idpf.org/doc_library/informationaldocs/FontManglingSpec_2.0.1_draft.htm"
                    >an informative document at idpf.org</link>.</para>
        </section>
        <section xml:id="sec-new-changed-ocf-white-space">
            <title>Whitespace in MIMETYPE file</title>
            <para><xref linkend="refOCF2"/> restricted the required MIMETYPE file from having any
                leading or trailing spaces; in <xref linkend="refOCF30"/> the restriction against
                trailing spaces has been removed.</para>
        </section>
    </chapter>

    <chapter xml:id="sec-replaced">
        <title>EPUB 2.0.1 Features Replaced in EPUB3</title>
        <para>A number of features in EPUB3 and its building-block Web Standards replace existing
            features in EPUB 2.0.1, and several features in EPUB 2.0.1 that were not widely adopted
            by content authors or Reading Systems are discontinued. Such features, from a content
            conformance perspective, are either <emphasis role="italic">removed</emphasis> (which
            means that conformant EPUB3 content may not use the construct) or <emphasis
                role="italic">deprecated</emphasis> (which means that use of the construct in EPUB3
            is allowed but not recommended. Note that in most cases Reading Systems are for
            backwards compatibility reasons still required to support these constructs, as
            normatively stated in the relevant specifications.</para>
        <para>The following sections list the EPUB 2.0.1 features removed and deprecated in
            EPUB3.</para>
        <section xml:id="sec-removals">
            <title>Features Removed from EPUB3</title>
            <section xml:id="sec-removals-dtbook">
                <title>DTBook</title>
                <para>DAISY DTBook <xref linkend="refZ39862005"/> was an alternative syntax to XHTML
                    1.1 for Content Documents in OPS 2.0.1 <xref linkend="refOPS2"/>, in order to
                    provide an option for more semantic, and thus more accessible, content. As
                    XHTML5 includes intrinsic semantic markup capabilities of a similar nature to
                    DTBook, DTBook is no longer an alternative syntax in EPUB3. </para>
            </section>
            <section xml:id="sec-removals-inline-islands">
                <title>Inline XML Islands</title>
                <para>Inline XML islands functionality (including "switch", "case", and "default"
                    elements) <xref linkend="refOPS2"/> is no longer part of the specification of
                    Content Documents.
                    <!-- Some of the functionality that this mechanism defined in OPS
                    2.0.1, beyond baseline capabilities of XHTML 1.1, are now part of XHTML5.
                        <remark role="todo">TODO - be more specific</remark> -->
                </para>
            </section>
            <section xml:id="sec-removals-out-of-line-XML-islands">
                <title>Out-of-Line XML Islands</title>
                <para>OPF 2.0.1. specified an optional extension mechanism enabling a spine item to
                    be "custom module" XHTML or arbitrary XML styled with CSS. This feature was not
                    widely adopted by content or Reading Systems, and has been removed from EPUB3,
                    which also defines a more powerful script-based extensibility mechanism. As a
                    result the <code>&lt;item></code> element no longer has an optional
                        <literal>fallback-style</literal> attribute.</para>
            </section>
            <section xml:id="sec-removals-tours">
                <title>Tours</title>
                <para>The Package Document schema no longer includes the <code>tours</code> element
                    (which was deprecated in OPF 2.0.1).</para>
            </section>
            <section xml:id="sec-removals-filesystem-container">
                <title>Filesystem Container</title>
                <para>OCF 3.0 <xref linkend="refOCF30"/> only defines a single-file (ZIP-based)
                    container, and no longer defines a "Filesystem Container" abstraction. This
                    change was made in conjunction with new restrictions in Publications 3.0
                    restricting references to remote resources in EPUB Publications to specific
                    media types and contexts. Taken together, these changes mean that the only
                    instantiation of an EPUB Publication defined at this time is the EPUB ZIP
                    Container, and that EPUB files must in general contain all constituent parts of
                    the publication, with certain well-defined exceptions. </para>
                <para>These changes may seem counter-intuitive given that online consumption of
                    content is increasingly prevalent, as are browser-based Reading System
                    implementations. The Working Group recognizes this, and understands that in an
                    online environment, particularly when browser-based, it will often be
                    inefficient or even impractical to download an entire EPUB file to a client
                    system before reading can occur. However, a number of significant issues exist
                    for browser-based Reading Systems, including cross-domain resource loading
                    restrictions in the browser security model and the potential for inadvertent
                    interaction between script-based interactivity within EPUB3 content and
                    script-based Reading System implementations. Publishers and content distributors
                    providing EPUB content are presently utilizing server-based software to manage
                    these issues, in effect creating a distributed client-server Reading System in
                    which a packaged EPUB file is ingested on a server and may be transformed en
                    route to client software into whatever set of resources is convenient for that
                    implementation. Thus there was no pressing requirement to interoperably define a
                    distributed form of an EPUB Publication in order to meet the requirements of the
                    Working Group charter. </para>
                <para>EPUB 2.x (via the OCF Filesystem container and by being relatively vague in
                    the OPF specification about where absolute URLs were legal) can be considered to
                    have incompletely described distributed publications without specifying
                    conformance requirements for them. This was a combination of historical (with
                    respect to OPF which was a revision to a predecessor specification that
                    pre-dated any ZIP-based container) and aspirational (with respect to OCF)
                    factors. </para>
                <para>Since the Working Group did have a goal to improve the interoperability of the
                    EPUB ecosystem by increasing the clarity and rigor of our conformance
                    requirements, it was decided that these partial definitions were unhelpful and
                    should be removed from the EPUB3 base specifications. However, the Working Group
                    understands that networked publications will be increasingly important and
                    expects future work to include development of robust interoperable conformance
                    definitions for distributed EPUB Publications based on emerging content
                    publisher and Reading System requirements.</para>
            </section>
        </section>
        <section>
            <title>Features Deprecated in EPUB3</title>
            <section xml:id="sec-deprecations-guide">
                <title>Guide</title>
                <para>Use of the optional <code>guide</code> element in the Package document has
                    been deprecated in favor of the EPUB Navigation Document
                        <literal>landmarks</literal> feature. Refer to <olink type="epub-spec"
                        targetdoc="contentdocs" targetptr="sec-xhtml-nav"/> for further
                    information.</para>
            </section>
            <section xml:id="sec-deprecations-ncx">
                <title>NCX</title>
                <para>As described in more detail in <xref linkend="sec-new-changed-nav"/> above,
                    the NCX has been superseded in favor of <olink type="epub-spec"
                        targetdoc="contentdocs" targetptr="sec-xhtml-nav"/>.</para>
            </section>
        </section>
    </chapter>

    <appendix xml:id="acknowledgements" role="acknowledgements" conformance="informative">
        <title>Contributors</title>
        <xi:include href="./share/contributors.xml"/>
    </appendix>

    <xi:include href="./share/references.xml"/>
</book>
